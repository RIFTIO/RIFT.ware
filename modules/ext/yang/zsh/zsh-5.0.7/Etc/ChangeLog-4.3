2012-07-17  Barton E. Schaefer  <schaefer@zsh.org>

	* users/17051 (cf. 30571): Completion/compinit: explicit IFS for
	"read" of bindkey, dumpfiles, etc.

2012-07-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Bart: 30560: Src/builtin.c: unset array element by setting
	to null.

2012-07-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Danek: 30562: Completion/Solaris/Command/_dladm,
	Completion/Solaris/Command/_flowadm,
	Completion/Solaris/Command/_ipadm,
	Completion/Solaris/Command/_zoneadm,
	Completion/Unix/Command/_zfs, Completion/Unix/Command/_zpool,
	Completion/Unix/Type/_zfs_dataset: Solaris completion updates.

2012-06-30  Barton E. Schaefer  <schaefer@zsh.org>

	* 30540: Src/builtin.c: process the rest of the typeset flags when
	changing the numeric type of SECONDS e.g. from integer to float.

2012-06-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: belatedly commit version number update.

2012-06-26  Barton E. Schaefer  <schaefer@zsh.org>

	* 30533: Src/utils.c: when processing a change in the value of
	COLUMNS, do not assert the change into the tty driver winsize.
	The code for this was dead the whole time IPDEF5 was broken and
	this seems a bad time to make it live; besides which it is not
	consistent about the handling of LINES (which is ignored when
	changed by itself, but would be asserted when COLUMNS changes).

	* 30530: Src/params.c: fix long-broken IPDEF5 definition to use
	the GSU struct, thus fixing problems with values of LINES or
	COLUMNS less than 1.

2012-06-21  Peter Stephenson  <pws@csr.com>

	* Danek (plus .distfiles changes): 30520:
	Completion/Solaris/Command/.distfiles:
	Completion/Solaris/Command/_beadm,
	Completion/Solaris/Command/_dladm,
	Completion/Solaris/Command/_dtrace,
	Completion/Solaris/Command/_flowadm,
	Completion/Solaris/Command/_fmadm,
	Completion/Solaris/Command/_ipadm,
	Completion/Solaris/Command/_netstat,
	Completion/Solaris/Command/_pkg5,
	Completion/Solaris/Command/_prstat,
	Completion/Solaris/Command/_ps,
	Completion/Solaris/Command/_snoop,
	Completion/Solaris/Command/_svcadm,
	Completion/Solaris/Command/_svccfg,
	Completion/Solaris/Command/_svcprop,
	Completion/Solaris/Command/_zlogin,
	Completion/Solaris/Command/_zoneadm,
	Completion/Solaris/Type/.distfiles,
	Completion/Solaris/Type/_be_name,
	Completion/Solaris/Type/_svcs_fmri,
	Completion/Solaris/Type/_zones,
	Completion/Unix/Command/_zfs,
	Completion/Unix/Command/_zpool,
	Completion/Unix/Type/.distfiles,
	Completion/Unix/Type/_zfs_dataset,
	Completion/Unix/Type/_zfs_keysource_props: updated completions
	for Solaris 11.

	* 30518: configure.ac, Src/zsh_system.h: attempt to supply
	tgoto() prototype only when missing for Solaris 10 and earlier.

	* 30519 (correction noticed by Danek): MACHINES: try to
	modernise.

2012-06-18  Peter Stephenson  <pws@csr.com>

	* Dima Kogan: 30515: Src/glob.c: glob size test failed on very
	large files owing to integer type error.

2012-06-15 Phil Pennock  <pdpennock@users.sourceforge.net>

	* 30513: zsh/regex metafy fixes for widechar; similar to 29838.

2012-06-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30509: FEATURES, README, Etc/FAQ.yo: updates for 5.0.0.

	* Danek: 30510: Doc/Zsh/params.yo: bad indentation.

2012-06-10  Clint Adams  <clint@zsh.org>

	* 30503: Completion/Unix/Command/_mosh: rudimentary
	completion for mosh.

2012-06-10  Mikael Magnusson  <mikachu@gmail.com>

	* Jeremy Mates: 30505: Completion/Unix/Command/_wget: Allow
	multiple --header=.

2012-06-06  Barton E. Schaefer  <schaefer@zsh.org>

	* users/17134: Functions/Misc/promptnl: avoid bad math error

2012-06-06  Peter Stephenson  <pws@csr.com>

	* Vincent: 30497: Completion/Unix/Command/_xmlsoft: option
	completion issue.

2012-06-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/17132: Doc/Zsh/contrib.yo,
	Functions/Zle/forward-word-match,
	Functions/Zle/select-word-style: skip-whitespace-first style for
	compatibility with bash and other editors in forward-word.

2012-05-31  Peter Stephenson  <pws@csr.com>

	* Foudil Brétel: 30495: Completion/Unix/Command/_systemd (also
	Completion/Unix/Command/.distfiles): replace
	Completion/Unix/Command/_systemctl and add various enhancements.

2012-05-23  Frank Terbeck  <ft@bewatermyfriend.org>

	* Juliano Ravasi: 30488:
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git: Fix
	initialisation of `$stgit_unapplied'.

2012-05-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T.: 30483: Completion/Unix/Command/_mount: improved
	completion on MacOS.

	* Danek: 30485: Src/jobs.c: trailing garbage after signal
	number not recognised in kill builtin.

2012-05-21  Peter Stephenson  <pws@csr.com>

	* c.f 30482 (Peter Jaros): Completion/Unix/Command/_tmux: typo
	in description.

2012-05-17  Mikael Magnusson  <mikachu@gmail.com>

	* 30473: Completion/Linux/Command/_strace: update for 4.7 and
	mark all options as taking sticked arguments.

	* 30474: Completion/Unix/Command/_ssh: Add -O cancel.

2012-05-14  Mikael Magnusson  <mikachu@gmail.com>

	* 30468: Functions/Prompts/prompt_fade_setup: add missing $
	reported by Devon Meunier.

	* 30466: Completion/Unix/Type/.distfiles,
	Completion/Unix/Type/_ps1234, Completion/Zsh/Command/_print:
	Add new completer for prompt format specifiers and hook it up
	to print -P and assigning to the various prompt parameters.
	Add completion for printf and print -f formats.

2012-05-08  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted, see users/17062: Doc/Zsh/contrib.yo: Briefly describe
	option semantic differences from xargs to zargs.  (Merged with
	PWS edits.)

2012-05-08  Peter Stephenson  <pws@csr.com>

	* 30469: Src/builtin.c: allow reverse listing of history using
	fc -r, but don't allow reverse execution of commands at all.

	* unposted: Doc/Zsh/contrib.yo: clarify that zargs is different
	from xargs.

2012-05-03  Peter Stephenson  <pws@csr.com>

	* unposted, see 30465: Doc/Zsh/expn.yo, Doc/Zsh/params.yo: add
	index entries and cross-references for matching parameters.

2012-05-02  Mikael Magnusson  <mikachu@gmail.com>

	* 30461, 30462 (tweaked): Functions/Prompts/promptinit,
	Functions/VCS_Info/vcs_info_setsys, Functions/Zftp/zfcd_match,
	Functions/Zle/url-quote-magic: add missing local for match,
	mbegin and mend.

	* 30425 (fixed): Src/Zle/zle_params.c, Doc/Zsh/zle.yo:
	Add localhistory/globalhistory to $ZLE_STATE as set by the
	set-local-history zle widget.

2012-05-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/17046: Src/utils.c, Test/D04parameter.ztst: don't
	count too many elements when splitting quoted parameter
	substitution on null separator.

2012-05-01  Mikael Magnusson  <mikachu@gmail.com>

	* 30456: Completion/Unix/Command/_getconf: Use new array syntax.

2012-04-25  Peter Stephenson  <pws@csr.com>

	* 30455: NEWS, Src/params.c: remove max array length test.

2012-04-25  Mikael Magnusson  <mikachu@gmail.com>

	* 30429: Completion/Unix/Command/_init_d: Avoid error when the
	service doesn't exist.

	* 30430: Doc/intro.ms: Fix some errors and outdatedness.

	* 30444: NEWS: Add entry for new syntax added in 30431 below.

2012-04-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Src/subst.c: add test for valid identifier to 30431.

	* Test/D04parameter.ztst: 30439: Src/subst.c,
	Test/D04parameter.ztst: ${...:*...} with nonexistent or
	non-array variable second should return no results.

	* 30431 (typo in _typeset fixed):
	Completion/Zsh/Command/_typeset, Doc/Zsh/expn.yo, Src/params.c,
	Src/subst.c, Test/D04parameter.ztst:  add ${...:|...} and
	${...:*...} operators for removal or inclusion of results
	by array element.

2012-04-21  Barton E. Schaefer  <schaefer@zsh.org>

	* 30433: Src/hist.c: double backslash is not line continuation.

2012-04-20  Mikael Magnusson  <mikachu@gmail.com>

	* 30412: Doc/Zsh/zle.yo: Document the set-local-history
	widget in the list of widgets.

	* Vin Shelton: 30427: Doc/Zsh/zle.yo: Remove erroneous enditem
	from previous commit.

2012-04-16  Peter Stephenson  <pws@csr.com>

	* Michael Prokop: 30414: Completion/Linux/Command/_mdadm: more
	flexible configuration file usage.

	* 30413: Src/params.c, Src/utils.c, Test/D04parameter.ztst:
	(q-) parameter flag should quote the empty string and should
	report an error with extra trailing q's.

2012-04-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: NEWS: incorporate the remainder of Bart's
	suggestions from 30408.

	* 30410 (with the addition of one other case): Src/jobs.c: avoid
	some divide-by-zero errors in TIMEFMT interpretation.

2012-04-14  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30402: Doc/.distfiles, Doc/Makefile.in: turn intro.ms into
	intro.pdf for doc distribution.  Still needs some tidy ups.

2012-04-14  Mikael Magnusson  <mikachu@gmail.com>

	* 30406: NEWS: some typo fixes.

2012-04-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Etc/.distfiles: missed this.

	* Christian Neukirchen: 30398, 30399: Doc/params.yo: TIMEFMT
	documentation.

	* 30400 (plus a few extra tweaks): NEWS, Etc/NEWS-4.3: update
	NEWS for forthcoming 5.0 release.

2012-04-13  Peter Stephenson  <pws@csr.com>

	* 30391: Src/params.c: New hash-based arrayuniq() doesn't
	care about (or set the flag correctly for) disabled hash nodes,
	so we need to ignore that flag.

2012-04-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30388, 30389 (Stephane): Functions/Misc/zargs: handle
	zero-length arguments.

2012-04-09  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Test/D04parameter.ztst: hash seive needs more than 10
	array elements for arrayuniq() testing.  This test will need to
	be tweaked if that size changes.

	* unposted (see users/17000): Src/params.c: fix allocation bug in
	16991 by using heap memory for hash nodes; throw an error if out
	of heap; pull hash table creation out into a helper function and
	use arrlen() to count the array.

	* Václav Zeman: users/16991: Src/params.c: implement hash-table
	seive variant of arrayuniq() to improve speed at cost of space,
	falls back on the constant-space version for small arrays.

	* 30383: Src/params.c: improve the constant-space variant of
	arrayuniq() by optimizing shifts.

2012-04-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/16944: Functions/Zle/url-quote-magic: some more "local"s
	needed.

2012-03-30  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Zle/split-shell-arguments: add some
	typeset -g's to avoid WARN_CREATE_GLOBAL warnings.

	* unposted: Src/init.c: add some braces to avoid warnings from
	some versions of gcc.

2012-03-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/zle.yo: add missing parenthesis.

	* users/16932: Doc/Zsh/zle.yo, Functions/Zle/replace-string:
	Src/Zle/zle.h, Src/Zle/zle_params.c, Src/Zle/zle_utils.c:
	implement $UNDO_CHANGE_NO and argument to undo widget.

2012-03-25  Mikael Magnusson  <mikachu@gmail.com>

	* Jesper Nygårds: 30378: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_gradle: new gradle completion.

2012-03-24  Mikael Magnusson  <mikachu@gmail.com>

	* 30371: Completion/Unix/Command/_ssh: You can specify -i
	multiple times.

	* 30372: Completion/Unix/Command/_tmux: Redirect error output
	produced when no tmux server is running to /dev/null.

	* 30368: Completion/Unix/Command/_tmux: Make completion work
	when an unambiguous prefix for a known subcommand is given, as
	in 'tmux att -<tab>'.

2012-03-23  Simon Ruderich  <simon@ruderich.org>

	* 30366: Misc/vcs_info-examples: Fix outdated quilt examples.
	* 30367: Doc/Zsh/contrib.yo: vcs_info, mention settings used for
	patch-format/nopatch-format.

2012-03-13  Peter Stephenson  <pws@csr.com>

	* Luka Perkov: 30354: Completion/Unix/Command/_quilt: update

	* 30351 changed as in 30352: Src/params.c, Src/utils.c: metafy
	scalar and array parameter values as they are imported from
	strings defined outside zsh.

2012-03-07  Peter Stephenson  <pws@csr.com>

	* users/16865: Doc/Zsh/cond.yo: note that -eq and friends are
	less convenient for purely numeric work than conditional
	expressions.

2012-03-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Alexey: 30322: Completion/Unix/Command/_xmlsoft: accept more
	file types.

2012-03-06  Barton E. Schaefer  <schaefer@zsh.org>

	* 30320: Doc/Zsh/builtins.yo, Src/builtin.c, Src/init.c,
	Src/options.c: "emulate" accepts invocation-time setopt flags
	after the shell name, in addition to "-c command".

	* 30320 (bonus): Doc/Zsh/params.yo: document interaction of
	sun_keyboard_hack with the KEYBOARD_HACK paramter.

	* 30320 (misc.): Etc/FAQ.yo: rectify a minor omission.

2012-03-05  Clint Adams  <clint@zsh.org>

	* 30314: Completion/Unix/Command/_ssh: add completion for
	ssh-copy-id.

	* 30316: Completion/Unix/Type/_pdf: complete .pdf for evince and
	epdfview.

	* 30317: Completion/Unix/Command/_git: complete git merge --ff-only

2012-03-05  Peter Stephenson  <pws@csr.com>

	* 30307 plus change suggested by Wayne in 30309: configure.ac,
	Src/exec.c, Src/glob.c, Src/prompt.c, Src/utils.c,
	Src/Modules/parameter.c: use %lld format where available when
	zlong is long long.

2012-03-01  Peter Stephenson  <pws@csr.com>

	* 30303: Doc/builtins.yo, Src/options.c: emulate executed inside
	a function marked for execution tracing enables xtrace.

2012-02-29  Barton E. Schaefer  <schaefer@zsh.org>

	* 30272 (tweaked): Src/exec.c: most failures of fork() cause
	non-interactive shells to exit nonzero; bad options to "exec"
	cause exit under POSIX_BUILTINS behavior.

	* unposted (see users/16715): Doc/Zsh/options.yo: document the
	effects of HASH_LIST_ALL on spelling correction.

	* 30184: Src/hashtable.c: the HASH_EXECUTABLES_ONLY test matches
	the test used during path search in exec.c:iscom().

	* unposted (see 30090): Functions/Misc/add-zsh-hook: add -h and
	-L options for help text and a list of extant hooks respectively.

	* unposted (see users/16697): Functions/Misc/zkbd: select a more
	reasonable output file name when the DISPLAY variable refers to a
	local socket file (MacOS); fix problem with writing the output
	file when the user overrides the default value of TERM.

2012-02-29  Mikael Magnusson  <mikachu@gmail.com>

	* 30276: Src/glob.c: Use zlong rather than int when calculating
	brace expansions of the form {1..9}.

2012-02-29  Peter Stephenson  <pws@csr.com>

	* 30299: Src/subst.c, Test/D04parameter.ztst: "$*" was split
	in SHWORDSPLIT if IFS was unset or empty.

2012-02-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Alexey I. Froloff: 30270: Test/C02cond.ztst: we don't care
	about errors from df when testing whether the file system has
	noatime.

	* unposted: Config/version.mk: Update version to 4.3.17-dev-0 to
	avoid clash with release, also fix incorrect year noticed by
	Darryl Zurn.

2012-02-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: 4.3.17.

2012-02-22  Peter Stephenson  <pws@csr.com>

	* 30238 with small fixes: Doc/Zsh/jobs.yo: document the fork
	behaviour on suspending complex builtin execution.

2012-02-20  Barton E. Schaefer  <schaefer@zsh.org>

	* 30242: Src/subst.c, Test/D04parameter.ztst: use PREFORK_SINGLE
	for the right-hand side of ${...=...} when SH_WORD_SPLIT is in
	effect (POSIX emulation).

2012-02-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Etc/Config.yo, Completion/X/Type/.distfiles,
	Test/.distfiles: 4.3.16.

2012-02-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30231 plus Mikael's change in 30232: NEWS, README, Etc/FAQ.yo:
	updates for 4.3.16.

2012-02-14  Oliver Kiddle  <opk@zsh.org>

	* 30198: Completion/Unix/Command/_sudo, Doc/Zsh/compsys.yo:
	fix environ style lookup to be done in conventional manner

	* Mikael: Completion/Debian/Command/_dpkg: fix dpkg-deb
	completion broken by 30199

2012-02-14  Peter Stephenson  <pws@csr.com>

	* users/16760: Functions/Zle/url-quote-magic: make reply
	local for the benefit of styles.

2012-02-13  Frank Terbeck  <ft@bewatermyfriend.org>

	* 30214: Functions/Prompts/prompt_redhat_setup: Fix quoting in
	`redhat' prompt.

2012-02-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30203 (plus rename PF_ flags to PREFORK_): Src/exec.c,
	Src/glob.c, Src/subst.c, Src/zsh.h, Test/D04parameter.ztst:
	Pass sh-wordsplitting instructions to nested parameter
	substitution by flags, avoiding side effects of explicitly
	changing the option.

2012-02-11  Mikael Magnusson  <mikachu@gmail.com>

	* 30206: Completion/Unix/Command/_ldd: Fix ldd completion broken by
	previous commit.

2012-02-10  Oliver Kiddle  <opk@zsh.org>

	* 30199: Completion/Debian/Command/_pbuilder,
	Completion/Darwin/Command/_defaults, Completion/Darwin/Command/_fink,
	Completion/Darwin/Command/_hdiutil, Completion/Debian/Command/_dak,
	Completion/Debian/Command/_debdiff, Completion/Debian/Command/_dpkg,
	Completion/Debian/Command/_linda, Completion/Debian/Command/_lintian,
	Completion/Debian/Command/_piuparts,
	Completion/Linux/Command/_modutils,
	Completion/Mandriva/Command/_urpmi,
	Completion/Unix/Command/_bittorrent,
	Completion/Unix/Command/_bogofilter, Completion/Unix/Command/_cdrdao,
	Completion/Unix/Command/_cplay, Completion/Unix/Command/_git,
	Completion/Unix/Command/_hg, Completion/Unix/Command/_ldd,
	Completion/Unix/Command/_metaflac, Completion/Unix/Command/_pax,
	Completion/Unix/Command/_rubber, Completion/Unix/Command/_sisu,
	Completion/Unix/Command/_texinfo, Completion/Unix/Command/_vim,
	Completion/Unix/Command/_vorbiscomment,
	Completion/Unix/Command/_xmms2:
	add (-.) to many completion _files globs

	* 30197: Completion/Unix/Command/_subversion: complete changelists

	* 30177: Completion/X/Command/_xterm,
	Completion/X/Type/_xft_fonts: completion for fontconfig fonts

2012-02-09  Barton E. Schaefer  <schaefer@zsh.org>

	* 30193: Src/Zle/compcore.c: remnulargs() after poking into string
	in case length changes.

2012-02-08  Peter Stephenson  <pws@csr.com>

	* Timothy Redaelli: 30187: Src/hist.c: file name manipulations
	in history can return NULL if HAVE_CANONICALIZE_FILE_NAME.

2012-02-07  Peter Stephenson  <pws@csr.com>

	* Holger Macht via Ismail: 30185: Src/Zle/complete.mdd: add
	missing openSUSE file locations.

2012-02-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30127: Src/builtin.c: forbid executing history lines via fc in
	the wrong order.

2012-02-03  Peter Stephenson  <pws@csr.com>

	* Mariusz Glebocki: 30179: Completion/Unix/Type/_services:
	suppress stderr for service list.

2012-02-01  Frank Terbeck  <ft@bewatermyfriend.org>

	* A.Costa: unposted: Doc/Zsh/grammar.yo, Etc/ChangeLog-3.1: Fix
	typo to "definition".

2012-01-31  Peter Stephenson  <pws@csr.com>

	* seiler via Ismail: 30174: Completion/Unix/Command/_osc,
	Completion/openSUSE/Command/_osc: update.

	* Felipe: 30158: Test/.distfiles, Test/compgentest,
	Test/Y04compgen.ztst: compgen test is not useful with current
	bashcopmpinit.

2012-01-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	*  Richard Hartmann: 30140: Completion/X/Command/_mplayer:
	whitespace fix.

	* Felipe Contreras: 30131, 30132, 30133, 30134, 30135,
	30136, 30137: Completion/bashcompinit: various improvements to
	bash-like behaviour.

2012-01-23  Peter Stephenson  <pws@csr.com>

	* Ben: 30118: Completion/Unix/Command/_sqlite,
	Completion/Unix/Command/.distfiles: new sqlite completion.

2012-01-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Ben: 30117 (moved directory): Completion/X/Command/_xclip,
	Completion/X/Command/.distfiles: new completion.

2012-01-19  Frank Terbeck  <ft@bewatermyfriend.org>

	* 30114: Functions/VCS_Info/VCS_INFO_check_com: Remove a
	superfluous stat().

2012-01-16  Frank Terbeck  <ft@bewatermyfriend.org>

	* 30111: Src/exec.c: Fix segfaults with exec options.

2012-01-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Richard Hartmann: 30110: Completion/Unix/Command/_vcsh,
	Completion/Unix/Command/.distfiles: new completion.

2012-01-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Stepan Koltsov: 30105: Completion/Unix/Command/_stgit: fix
	delete completion.

2012-01-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/16711: Completion/Unix/Type/_path_commands: try to take
	account of PATH_DIRS option in command completion.

	* 30101: Doc/Zsh/options.yo, Src/hashtable.c, Src/options.c,
	Src/zsh.h: add HASH_EXECUTABLES_ONLY option, off by default to
	avoid problems with huge paths and remote directories.

2012-01-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30098: Jun T.: Src/params.c: more minimal alternative to
	30079, don't set LANG if LC_ALL set.

2012-01-06  Peter Stephenson  <pws@csr.com>

	* Src/Modules/pcre.c (cond_pcre_match): unposted: fix (harmless)
	warning with uninitialised variable.

2012-01-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Christian Höltje: 30087: Functions/Prompts/promptinit: remove
	any hooks for a prompt theme when removing it.

	* 30084: Doc/Zsh/zle.yo, Src/init.c, Src/Zle/zle_main.c,
	Src/Zle/zle_refresh.c, Src/Zle/zle_thingy.c: `zle -T tc func'
	defines function to be used insted of termcap output for
	testing.

	* 30081: Completion/Base/Core/_main_complete: remove necessity
	to have IGNORE_CLOSE_BRACES unset when loaded.

2012-01-04  Frank Terbeck  <ft@bewatermyfriend.org>

	* 30079: Src/params.c: Restore `LC_ALL' when setting `LANG'.

2012-01-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30084: Src/init.c: zsfree(argzero) before we set it again
	following ztrdup() in parseargs().

2012-01-02  Barton E. Schaefer  <schaefer@zsh.org>

	* 30073 (plus comment): Src/Zle/zle_main.c: use queue_signals()
	around critical first call to zrefresh() after zleactive = 1, to
	prevent adjustwinsize() loop reported on FreeBSD.

2011-12-30  Frank Terbeck  <ft@bewatermyfriend.org>

	* 30048: Test/C02cond.ztst: Avoid [[ -N ... ]] on file-systems
	mounted `noatime', if possible.

	* 30046: Functions/VCS_Info/Backends/VCS_INFO_get_data_svn: Fix
	support for subversion version 1.7.

2011-12-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 30069: Doc/Zsh/options.yo: replace empty parens with
	LPAR()RPAR().

2011-12-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30041: Src/subst.c: the offset hack to make
	${foo:offset:length} bash compatible with positional parameters
	doesn't apply when we're indexing into characters of one
	positional parameter.

	* T.C. Hollingsworth: 30036: Completion/Unix/Command/_systemctl:
	new arguments.

2011-12-20  Barton E. Schaefer  <schaefer@zsh.org>

	* 30033: Src/Zle/zle_keymap.c: silence valgrind warnings about
	uninitialized values.

2011-12-19  Peter Stephenson  <pws@csr.com>

	* unposted: Config/version.mk: update version to 4.3.15-dev-0 to
	avoid dev version clashing with installation.

2011-12-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: release 4.3.15.

2011-12-16  Peter Stephenson  <pws@csr.com>

	* Simon Olofsson: 30028: Completion/Unix/Command/_subversion:
	fix matching of subversion help text.

2011-12-14  Mikael Magnusson  <mikachu@gmail.com>

	* 30021: Completion/Zsh/Type/_globquals: Add d flag (see 29991),
	show what unit the digits are entered in as a hint that the
	default is also days.

	* 29783: Completion/Debian/Command/_update-alternatives: Add
	more options.

2011-12-13  Mikael Magnusson  <mikachu@gmail.com>

	* 29998: Completion/Unix/Command/_git: fix a typo (--rerbose).

	* 30019: Completion/Unix/Command/_tar: fix parsing of argument
	to -C.

2011-12-13  Barton E. Schaefer  <schaefer@zsh.org>

	* 30020: Functions/Prompts/promptinit: prevent prompt_opts and
	zle_highlight from leaking out of prompt_preview_theme.

	* 30012: Completion/Base/Core/_main_complete,
	Completion/Base/Utility/_arguments,
	Completion/Base/Utility/_values, Completion/Zsh/Command/_zle,
	Doc/Zsh/compsys.yo: add $state_descr which parallels the $state
	array in the same way that $context does, to make the "message"
	part of each _arguments "optarg" specification available to
	the caller's state handler.  Used in _zle as the description
	passed to _wanted.

2011-12-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30000 plus a couple of comments: Src/exec.c: Better POSIXJOBS
	behaviour: don't restore default behaviour for SIGTTOU etc. if
	we're still doing job handling, and only continue with job
	handling if this is a (...) subshell.

2011-12-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* discussed in 29984: Doc/Zsh/compsys.yo: use m+7 for files
	"more than a week old" since w+1 is a bit counterintuitive.

	* 29991: Doc/Zsh/expn.yo, Src/glob.c: allow explicit 'd' for
	days in time qualifiers.

2011-12-10  Mikael Magnusson  <mikachu@gmail.com>

	* 29962: Completion/Unix/Command/_ssh: Actually return ret.

	* 29961: Completion/Unix/Command/_ssh: Extend option completion.

2011-12-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* GI: 29977: Completion/Linux/Command/_modutils: caching and
	function definition fixes.

2011-12-09  Simon Ruderich  <simon@ruderich.org>

	* 29918: Completion: Add new _remote_files() helper and use it to
	reduce code duplication.

	* 29917: Completion/Unix/Command/_ssh: Tabs to spaces.

2011-12-09  Mikael Magnusson  <mikachu@gmail.com>

	* unposted: Doc/Zsh/compsys.yo: Remove duplicated 'the'.

	* 29409: Completion/X/Command/_x_utils: Add completion for xprop and
	xlsatoms.

2011-12-09  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/compinit: add NO_ignoreclosebraces to
	options needed in completion.

	* users/16614: config.guess, config.sub: update from automake
	1.11.1.

2011-12-09  Mikael Magnusson  <mikachu@gmail.com>

	* 29876: Completion/Unix/Command/_getent: Update getent completion
	to work when additional output comes after the databases.

2011-12-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29955 with bits pointed out by Mikael and Bart:
	Doc/Zsh/grammar.yo, Doc/Zsh/options.yo, Src/lex.c,
	Src/options.c, Src/zsh.h, Test/E01options.ztst: add
	IGNORE_CLOSE_BRACES option.

2011-12-08  Peter Stephenson  <pws@csr.com>

	* 29928: Test/A04redirect.ztst: belated commit to
	fix OpenBSD test failure.

2011-12-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Etc/version.mk: update version to 4.3.14-dev-0 to
	avoid installs clashing with release.

2011-12-07  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* 29952: Src/glob.c: fix cut'n'paste error in nanosecond
	timestamp support

2011-12-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk: release 4.3.14.

2011-12-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29940: Src/utils.c (metafy): null termination shouldn't
	be applied to original buffer if not to be modified.

	* From Stef VAN VLIERBERGHE: 29934: Src/lex.c (add): use of
	uninitialised memory when lexer needed to reallocate token.

2011-12-02  Peter Stephenson  <pws@csr.com>

	* unposted: Test/B01cd.ztst: fix documentation for '*'
	test output syntax.

2011-12-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29924: Test/A04redirect.ztst, Test/B01cd.ztst, Test/ztst.zsh:
	add ability to match output of tests using patterns.

2011-12-01  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_nm: also complete
	directories.

	* 29923: Test/A04redirect.ztst: work around variant message from
	strerror() for invalid file descriptor.

2011-11-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Config/version.mk: 4.3.13 release.

2011-11-28  Peter Stephenson  <pws@csr.com>

	* Ismail Dönmez: 29920: Src/Subst.c: error with arithmetic
	substitution with NO_EXEC.

2011-11-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk: 4.3.12-test-3.

2011-11-24  Simon Ruderich  <simon@ruderich.org>

	* 29916: Completion/Unix/Command/_git: Prevent clash with
	_remote_files() in _ssh.

2011-11-24  Peter Stephenson  <pws@csr.com>

	* 29915: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_nm: new nm completion.

2011-11-23  Peter Stephenson  <pws@csr.com>

	* Ignacy Gawędzki: 29912: Completion/Unix/Command/_ssh: add "--"
	to end options to ls.

2011-11-21  Peter Stephenson  <pws@csr.com>

	* Foudil Brétel: 29911: add --no-legend support (v37+); multiple
	bug fixes (aliases, array range); workaround compadd bug
	(compadd handles its own options)

2011-11-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* gi1242+zsh: users/16587: Completion/Unix/Command_lp: tidy up.

2011-11-18  Peter Stephenson  <pws@csr.com>

	* 29908: Doc/Zsh/contrib.yo, Functions/MIME/.distfiles,
	Functions/MIME/zsh-mime-contexts, Functions/MIME/zsh-mime-handler:
	make MIME functions handle contexts with stacked suffixes such
	as .pdf.gz.

2011-11-17  Peter Stephenson  <pws@csr.com>

	* Jun T.: 29907: Src/Modules/pcre.c: remove declaration of
	unused variable.

2011-11-15  Barton E. Schaefer  <schaefer@zsh.org>

	* users/16581: Src/utils.c: it seems wrong to shortcut correction
	of words not in command position by comparing them to the command
	tables, so don't; if a command correction is rejected, reset the
	incremental path hashing so the new command can be "learned".

2011-11-14  Peter Stephenson  <pws@csr.com>

	* gi1242: users/16578: Completion/Unix/Command/_lp: lpadmin,
	lpinfo and other changes.

2011-11-09  Frank Terbeck  <ft@bewatermyfriend.org>

	* Akinori MUSHA: 29900:
	Functions/VCS_Info/Backends/VCS_INFO_detect_svn: Adjust detection
	to support subversion 1.7.

2011-11-08  Peter Stephenson  <pws@csr.com>

	* Haakon Riiser: 29895, 29887: Completion/Unix/Command/_ffmpeg,
	Completion/Linux/Command/_nmcli (plus
	Completion/Linux/Command/.distfiles): update and new
	NetworkManager client completion.

2011-11-07  Simon Ruderich  <simon@ruderich.org>

	* 29893: Completion/Unix/Command/_ssh: Update (mostly) for 5.9.

2011-11-07  Peter Stephenson  <pws@csr.com>

	* 29894: Doc/Zsh/contrib.yo, Functions/Zle/replace-string:
	display previous replacement and reuse if source string is empty.

2011-11-04  Peter Stephenson  <pws@csr.com>

	* 29892: Functions/Zle/read-from-minibuffer,
	Functions/Zle/replace-string: fix regular expression
	replacements right of the cursor; make save and restore
	in read-from-minibuffer more automated.

	* 29891: Doc/Zsh/zle.yo, Src/Zle/zle_thingy.c: allow "zle -lL"
	with arguments to list in -L format.

2011-10-31  Peter Stephenson  <pws@csr.com>

	* Jun T: 29883: Src/Builtins/rlimits.c, Src/Modules/zftp.c: cast
	to type in printf to work around cases where types aren't
	properly distinguished.

2011-10-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/16547: Completion/Unix/Command/_perforce: quote
	arguments with colon in from _describe.

2011-10-28  Peter Stephenson  <pws@csr.com>

	* Src/module.c (do_load_module): 29879: (via takimoto-j): Metafy
	dlerror message to avoid corruption.

2011-10-26  Phil Pennock  <pdpennock@users.sourceforge.net>

	* 29867: Bart Schaefer: Test/V07pcre.ztst: exit early with
	unimplemented status if zsh/pcre not available; combined with
	Peter's 29865 fix, should make PCRE testing robust.

2011-10-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29844, 29845: Src/exec.c, Test/A04redirect.ztst: remove bogus
	error on closing fd's 0 to 9; update test.

2011-10-26  Peter Stephenson  <pws@csr.com>

	* 29865: Src/Modules/pcre.mdd: don't compile if no pcre-config.

	* 29859: Src/Zle/Complete.c: compadd handles its own options.

2011-10-24  Peter Stephenson  <pws@csr.com>

	* Jérémie Roquet: c.f. users/16541: Doc/Zsh/cond.yo:
	should be "filename generation", not "file generation".

	* Foudil Brétel: 29842: Completion/Unix/Command/_systemctl:
	major rewrite.

2011-10-24  Phil Pennock  <pdpennock@users.sourceforge.net>

	* 29838: Src/Modules/pcre.c: metafy/unmetafy strings, to
	correctly handle non-ASCII characters in UTF-8 for regexp
	matches.

	* unposted: Test/V07pcre.ztst: some PCRE tests

2011-10-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/16492: MACHINES: OpenIndiana issue.

2011-10-22  Simon Ruderich  <simon@ruderich.org>

	* 29823: Completion/Unix/Command/_perl: Update for 5.14.1.

2011-10-19  Frank Terbeck  <ft@bewatermyfriend.org>

	* Suraj N. Kurapati: 29828: Misc/vcs_info-examples: Mention
	different ways to handle remote branch names in
	`vi-git-remotebranch()'.

2011-10-17  Peter Stephenson  <pws@csr.com>

	* unposted: NEWS, README, Config/version.mk, Etc/.distfiles,
	Etc/FAQ.yo, Etc/relnote_4.3.12.txt: tidy up and update for
	4.3.12-test-2.

	* unposted: Completion/Unix/Command/_perforce: small
	documentation update.

2011-10-14  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29820: Doc/Zsh/compsys.yo,
	Completion/Base/Utility/_pick_variant: -b option to match
	builtins.

2011-10-12  Mikael Magnusson  <mikachu@gmail.com>

	* 29815: Doc/Makefile.in: include mod_langinfo in documentation.

2011-09-25  Barton E. Schaefer  <schaefer@zsh.org>

	* 29799: Src/utils.c: swap order of RESET_PROMPT / REFRESH in
	adjustwinsize() so that the cursor is moved to the start of a
	multi-line prompt before the prompt is actually displayed.

	* 29769: Src/signals.c: handle thisjob == -1 (no foreground job)
	when checking for whether a background job is allowed to suspend.

	* unposted: Doc/Zsh/modules.yo: cross-reference zmodload.

2011-09-22  Peter Stephenson  <pws@csr.com>

	* Daniel Friesel: 29796: Completion/X/Command/_mplayer: complete
	.webm.

2011-09-21  Peter Stephenson  <pws@csr.com>

	* Luka Perkov: 29788: Completion/Unix/Command/_quilt:
	improved quilt completion.

2011-09-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/16375: Src/Zle/complist.c: initialise number of
	references each time for multiple match tests when
	highlighting.

2011-09-16  Mikael Magnusson  <mikachu@gmail.com>

	* 29764, 29765: Completion/Unix/Command/_pgrep: use _users and
	_groups rather than reimplementing them, use _wanted instead
	of plain compadd to get descriptions, return 0 on success,
	fix conditions on -f and -x, complete pts/* for -t too.

2011-09-15  Peter Stephenson  <pws@csr.com>

	* 29776 (modified as noted): Src/lex.c, Test/D08cmdsubst.ztst:
	double quotes are not special in double-quote-style parsing
	if the end character is something else.

	* 29773: Marco Hinz: Completion/Unix/Type/_perl_modules:
	complete some missed modules.

2011-09-10  Clint Adams  <clint@zsh.org>

	* 29762: Completion/Debian/Command/_bts: bts completion tag
	update from Ansgar Burchardt.

2011-09-10  Barton E. Schaefer  <schaefer@zsh.org>

	* 29760: Completion/compaudit: declare _i_ulwdirs and make sure
	it is correctly referenced.

2011-09-07  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: updates for
	2010.2 release.

2011-09-07  Simon Ruderich  <simon@ruderich.org>

	* 29756: Doc/Zsh/params.yo: DIRSTACKSIZE is unlimited by default.

	* 29757: Doc/Zsh/compsys.yo: Remove superfluous brace.

2011-09-07  Mikael Magnusson  <mikachu@gmail.com>

	* 29755: Completion/Unix/Command/_ssh: add -O stop to to _ssh.

2011-09-06  Mikael Magnusson  <mikachu@gmail.com>

	* 29736: Doc/Zsh/mod_zutil.yo: mention when zstyle -t returns 1.

	* 29738: Completion/Unix/Command/_ssh: add PreferredAuthentications
	completion.

	* 29739: Completion/Unix/Command/_rsync: redefine _rsync(), make
	-e accept cuddled arguments.

	* 29740: Completion/Unix/Command/_wget: add --content-disposition.

	* 29741: Completion/Zsh/Command/_zattr: add ret=0, fix filename
	globbing like in 27658 for _zip.

	* 29733: Jonathan Kolberg: Completion/Debian/Command/_apt: add
	completion for apt-get changelog.

2011-09-05  Barton E. Schaefer  <schaefer@zsh.org>

	* users/16302: Completion/Unix/Type/_path_files: pattern matching
	for plain files (e.g., *.pdf for xpdf completion) was broken by
	29444.  Hopefully this does not re-break directory patterns.

2011-08-30  Simon Ruderich  <simon@ruderich.org>

	* 29745: Mikael Magnusson: Completion/X/Command/_mplayer: fix -ss
	completion.

2011-08-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29744: Src/builtin.c: don't mess up non '-A' case in
	29731.

2011-08-29  Barton E. Schaefer  <schaefer@zsh.org>

	* users/16291: Functions/Prompts/prompt_bart_setup: revert to
	using history text in non-"fg" case to avoid alias expansion.

2011-08-29  Mikael Magnusson  <mikachu@gmail.com>

	* 29722: Completion/X/Command/_mplayer: escape colon.

	* 29706: Completion/X/Command/_mplayer: add missing ret=0.

2011-08-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29731: Src/builtin.c, Test/B04read.ztst: fix output from `read
	-AE' and test that and `read -Ae'.

	* users/16289: Doc/Zsh/expn.yo, Src/exec.c, Src/jobs.c: don't
	delete temporary files when disowning and document this.

2011-08-20  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Functions/Zle/.distfiles: add move-line-in-buffer

	* 29711: Completion/compaudit: avoid calling potentially-slow
	"getent group" unless group-writable directories are found.

2011-08-20  Nikolai Weibull  <now@bitwi.se>

	* 29707: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_ln: New _ln completer.

2011-08-18  Mikael Magnusson  <mikachu@gmail.com>

	* unposted: Completion/Linux/Command/.distfiles,
	Completion/Linux/Command/_schedtool,
	Completion/Zsh/Command/.distfiles,
	Completion/Zsh/Command/_schedtool: move _schedtool completion
	to correct directory.

	* 29705: Completion/Unix/Command/_iconv: add correct number of
	slashes when completing //TRANSLIT.

2011-08-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29703: Src/exec.c, Src/subst.c, Test/D03procsubst.ztst: 

	* users/16253, users/16255: Src/utils.c, Test/D04parameter.ztst:
	A nulstring should be split like an empty string.

	* Anthony R Fletcher: users/16260:
	Completion/Unix/Command/_systemctl: new completion.

2011-08-17  Nikolai Weibull  <now@bitwi.se>

	* 29698: Completion/Unix/Command/_git: Complete diff options for git
	log.

2011-08-17  Mikael Magnusson  <mikachu@gmail.com>

	* 29681: Src/Zle/zle_refresh.c: consistently use [] to access
	region_highlights.

	* 29682: Completion/Zsh/Command/.distfiles,
	Completion/Zsh/Command/_schedtool: new _schedtool completer.

	* 29683: Completion/Unix/Command/_ssh: add -O forward to _ssh.

	* Daniel Friesel: 29690: Completion/Linux/Command/_cryptsetup,
	Completion/Unix/Command/_twidge: new _twidge and _cryptsetup
	completers.

2011-08-16  Barton E. Schaefer  <schaefer@zsh.org>

	* 29694: Src/hist.c: Don't overwrite the current history word if
	we aren't actually expanding an alias or history event.
	
	* users/16251: Functions/Prompts/prompt_bart_setup: use a preexec
	hook to replace "fg" et al. with the jobtext of the resumed job.

2011-08-16  Wayne Davison  <wayned@users.sourceforge.net>

	* 29650: Src/jobs.c: don't lose the the time info after a
	suspend+restore.

2011-08-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Src/Modules/datetime.c: use pm->node.nam to get
	parameter names for errors.

2011-08-14  Mikael Magnusson  <mikachu@gmail.com>

	* 29673: Doc/Zsh/compsys.yo: clarify what 'other' in the
	ignore-line style does.

	* 28852: Misc/zargs, Zle/match-words-by-style: use syntax that
	doesn't depend on SHORT_LOOPS being set.

	* unposted: Src/hist.c: fix a typo in a comment.

	* unposted: Src/jobs.c: fix capitalized word in the middle of
	a sentence.

	* 29388, 29680: Doc/Zsh/expn.yo: clarify note about e:string:
	quoting.

	* 29504: Doc/Zsh/expn.yo: note when (#cN,M) can't be used in
	place of # or ##.

2011-08-14  Barton E. Schaefer  <schaefer@zsh.org>

	* 29677: Src/exec.c, Src/signals.c, Src/zsh.h: flag jobs that are
	builtins running in the current shell, and if they control a
	pipeline, do not allow the external processes in that pipeline to
	become suspended when the foreground shell cannot suspend.

2011-08-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Src/Modules/datetime.mdd: unposted: also fix the autofeatures.

	* Src/params.c: unposted: Src/params.c, Test/V04features.ztst:
	fix some tests I broke.

	* Src/subst.c: 29674: Src/Modules/datetime.c,
	Doc/Zsh/mod_datetime.yo: add $epochtime array.

2011-08-10  Peter Stephenson  <pws@csr.com>

	* 29663: configure.ac, Src/module.c, Src/Modules/datetime.c,
	Doc/Zsh/mod_datetime.yo: add $EPOCHREALTIME for time in
	double precision floating point.

2011-08-04  Peter Stephenson  <pws@csr.com>

	* 29643: Src/signals.c, Src/utils.c, Src/zle_main.c: set
	incompfunc to zero when executing hook or trap function.

2011-08-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29661: Doc/Zsh/redirect.yo: Improve the documentation for
	{var}>... redirections.

2011-08-09  Barton E. Schaefer  <schaefer@zsh.org>

	* 29654: Src/jobs.c: "wait" should resume stopped jobs identified
	by process ID as well as by job number.

	* 29654: Src/exec.c: don't hide the job table entry for the left
	side of a pipline that ends in a shell builtin.  This change may
	be backed out if the patch in 29660 can be improved.

2011-08-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29644: Functions/Chpwd/zsh_directory_name_cdr,
	Src/Zle/compcore.c, Src/Zle/zle_tricky.c: Work round a bug in
	_describe, plus a new comment and some more braces.

	* 29633: Doc/Zsh/func.yo, Src/parse.c, Test/C04funcdef.ztst: be
	more careful that anonymous function syntax doesn't mess up
	working syntax with other functions.

2011-08-03  Peter Stephenson  <pws@csr.com>

	* 29635: Completion/Base/Widget/_complete_debug: Improve file
	descriptor handling and standardise syntax.

2011-07-29  Frank Terbeck  <ft@bewatermyfriend.org>

	* Luka Perkov: 29624: Completion/Unix/Command/_quilt: Improve
	`push' and `pop' completion.

2011-07-28  Peter Stephenson  <pws@csr.com>

	* 29626: Src/parse.c, Test/C04funcdef.ztst: arguments to
	anonymous functions shouldn't be parsed as command words.

	* 29602 and subsequent changes: Doc/Zsh/expn.yo: clarify meaning
	of filename extension in :r and :e modifiers (which were
	slightly inconsistent).

2011-07-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29561: Test/A04redirect.ztst: this bit didn't get committed,
	somehow.

2011-07-27  Mikael Magnusson  <mikachu@gmail.com>

	* 29618: Completion/Linux/Command/_ethtool,
	Completion/Zsh/Type/_file_descriptors: Fix some syntax to not depend
	on SHORT_LOOPS being set.

2011-07-25  Peter Stephenson  <pws@csr.com>

	* 29561: Src/exec.c, Src/utils.c, Test/A04redirect.ztst: Allow
	closing of file descriptors not recorded internally by the shell.

2011-07-22  Mikael Magnusson  <mikachu@gmail.com>

	* 29596: Completion/compinit: Fix syntax to work with KSH_ARRAYS
	set.

2011-07-22  Nikolai Weibull  <now@bitwi.se>

	* unposted: Completion/Unix/Command/_git: Use _files, not _path_files.

	* 29582: Completion/Unix/Command/_git: Alter the way that commands and
	aliases are listed when both are requested.

	* 29589: Completion/Unix/Command/_git,
	Completion/Debian/Command/_git-buildpackage: Use #description instead
	of #desc: for description of third-party commands.  Also, refactor the
	code to match the rest of the file.

2011-07-21  Nikolai Weibull  <now@bitwi.se>

	* 29272: Completion/Unix/Command/_git: Use return values correctly
	accross all completion functions.

	* unposted: Completion/Unix/Command/_git: Move _gitk and _tig to
	correct location.

	* unposted: Completion/Unix/Command/_git: Fix bug in git-add completion
	that prevented -f option from being used correctly.

	* unposted: Completion/Unix/Command/_git: Update git-add completion to
	not complete already given file arguments and also to not list file
	completions if an option is being completed.

	* unposted: Completion/Unix/Command/_git: Adjust some TODO items.

2011-07-19  Peter Stephenson  <pws@csr.com>

	* 29555: Src/exec.c: fix problem that shell failed to use file
	descriptor opened in parent if beyond max_zsh_fd.

2011-07-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/16131: Src/hist.c: skip reading an empty history file.

2011-07-18  Peter Stephenson  <pws@csr.com>

	* Matthieu Baerts: 29547: Completion/Unix/Command/_bzr: cdiff
	subcommand.

2011-07-12  Peter Stephenson  <pws@csr.com>

	* 29543: Src/hist.c: saved history lines with backslash-newline
	in the middle of words confused histlexwords.

	* 29542: Src/hist.c, Src/Zle/zle_main.c: remove test when
	initialising history that could cause crashes (and was probably
	never useful); ensure ZLE returns NULL if there's an error.

2011-07-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Eric Moors: 29531: Completion/Unix/Command/_adb: completion
	for Android debugger.

2011-07-03  Frank Terbeck  <ft@bewatermyfriend.org>

	* unposted: Doc/Zsh/contrib.yo: Fix typo "paramter". Caught by
	debian's lintian.

2011-07-01  Peter Stephenson  <pws@csr.com>

	* 29530: Src/subst.c, Test/E01options.ztst: ${..?..} shouldn't
	cause an error with NO_EXEC option.

2011-07-01  Frank Terbeck  <ft@bewatermyfriend.org>

	* 29518: Completion/Unix/Command/_git: Fall back to file
	completion for unknown sub-commands.

	* 29527: Completion/Unix/Command/_git: Make file-completion
	fallback optional.

	* 29519: Completion/Unix/Command/_git: Pick up addon completions
	from $fpath.

	* 29521: Completion/Unix/Command/_git: Add `user-commands' support
	again.

	* 29523: Completion/Debian/Command/_git-buildpackage: Use "#desc:"
	line for _git third-party add-on completion description.

	* Daniel Bolton: 29529: Completion/Debian/Command/_aptitude: Complete
	format specifiers with the `-F' option.

2011-06-30  Frank Terbeck  <ft@bewatermyfriend.org>

	* 29526: Functions/VCS_Info/vcs_info: Set `max-exports' early
	after certain `start-up' hooks.

2011-06-28  Frank Terbeck  <ft@bewatermyfriend.org>

	* Sebastian Ramacher: 29513: Completion/Debian/Command/_apt: Add
	markauto and unmarkauto sub-commands.

2011-06-27  Peter Stephenson  <pws@csr.com>

	*  Mikael Muszynski: 29510: Completion/X/Command/_mplayer:
	complete .m4v files.

2011-06-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Axel Beckert: 29506: Doc/Zsh/params.yo: use format
	SINGLE_LINE_ZLE as elsewhere in manual.

2011-06-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29503: Src/exec.c: Missing popheap() on failed autoload.

2011-06-20  Peter Stephenson  <pws@csr.com>

	* unposted: update version to 4.3.12-dev-1 as wordcode
	now incompatible with anonymous functions.

2011-06-20  Doug Kearns  <dougkearns@gmail.com>

	* unposted: Completion/BSD/Command/_sockstat,
	Completion/Debian/Command/_git-buildpackage,
	Completion/Unix/Command/_at, Completion/Unix/Command/_lp,
	Completion/Unix/Command/_unison, Completion/X/Command/_matlab,
	Completion/X/Command/_okular, Completion/Zsh/Function/_zargs: clean up
	completion descriptions as per Etc/completion-style-guide.

2011-06-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Luka Perkov: 29493: Completion/Unix/Type/_pdf: handle apvlv.

	* 29492: Doc/Zsh/func.yo, Src/exec.c, Src/parse.c, Src/text.c,
	Test/C04funcdef.ztst: add argument handling to anonymous functions.

	* unposted: Src/Zle/zle_refresh.c: remove additional loop
	noticed by Mikael.

	* 29491: Src/glob.c, Src/lex.c, Src/math.c, Src/params.c,
	Src/parse.c, Src/utils.c, Src/Modules/db_gdbm.c,
	Src/Zle/compcore.c, Src/Zle/complist.c, Src/Zle/zle_refresh.c,
	Src/Zle/zle_tricky.c: remove some variables set but not used.

	* 29490: Src/Builtins/rlimits.awk, Src/Builtins/rlimits.c,
	Src/Builtins/rlimits.mdd: add RLIMIT_RTTIME.

2011-06-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Michel Dos Reis: 29482: Completion/Linux/Command/_modutils:
	handle .gz kernel modules.

2011-06-16  Doug Kearns  <dougkearns@gmail.com>

	* 29483: Completion/Unix/Command/_vim: add --servername completion.

2011-06-15  Barton E. Schaefer  <schaefer@zsh.org>

	* 29481: Src/jobs.c, Src/signals.c: always return a matching job
	in findproc() [reverses 28967 and 29472], but scan the whole list
	to prefer running jobs in the rare event that one running and one
	exited job share a PID.

2011-06-14  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/compwid.yo: document change to brace
	parameter context in 29452/29459.

2011-06-12  Barton E. Schaefer  <schaefer@zsh.org>

	* 29472: Src/jobs.c: findproc() needs at least to also return
	stopped jobs.  See 28967.

2011-06-08  Peter Stephenson  <pws@csr.com>

	* Jeremy Sylvestre: 29468: Functions/Zle/define-composed-chars:
	add some ligatures and symbols.

2011-06-06  Peter Stephenson  <pws@csr.com>

	* 29462: Src/subst.c: fix warning with some compilers (code was
	already safe).

2011-06-05  Clint Adams  <clint@zsh.org>

	* unposted: Functions/Zle/move-line-in-buffer: clean
	the funny characters out of move-line-in-buffer.

2011-06-04  Barton E. Schaefer  <schaefer@zsh.org>

	* 29444: Completion/Unix/Type/_path_files: when called with a
	pattern to match directories, as from _files with list-dirs-first,
	do not descend into subdirectories looking for fake files unless
	some fake files have been defined.

2011-06-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29459: Completion/Zsh/Context/_brace_parameter,
	Src/Zle/compcore.c (check_param): In shell function, check for
	${( not at start of match; in C code, check for untokenized
	parentheses when in double quotes.

2011-06-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29452: Completion/Zsh/Context/_brace_parameter,
	Src/Zle/compcore.c (typo corrected): allow completion
	of parameter flags.

2011-06-03  Mikael Magnusson  <mikachu@gmail.com>

	* 29438: Completion/Zsh/Context/_subscript: adjust pattern so
	we complete dynamic directory names in command position as well.

	* 29448: Completion/Unix/Command/_initctl: complete symlinks
	to files too.

	* 29422: Test/D04parameter.ztst: Fix test for g:: to not depend
	on the current locale.

2011-06-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29451: Src/subst.c, Test/D04parameter.ztst: ${##stuff}
	removes stuff from the head of $#.

	* 29413: Doc/Zsh/builtins.yo, Src/builtin.c, Src/hist.c: print
	-S takes a single argument, applies lexical history word
	splitting, and puts it on the history.

2011-06-02  Frank Terbeck  <ft@bewatermyfriend.org>

	* 29434: Doc/Zsh/contrib.yo: Use PLUS() to avoid a + being
	silently dropped.

2011-06-01  Frank Terbeck  <ft@bewatermyfriend.org>

	* 29412: Completion/Unix/Command/_tmux: Disable sub-command
	completions if tmux is not found in `$path'.

	* Valentin Haenel: 29431: Misc/vcs_info-examples: Hook example for
	signaling untracked files in git repositories.

2011-06-01  Barton E. Schaefer  <schaefer@zsh.org>

	* users/16064: Functions/Zle/move-line-in-buffer: example widget
	for moving in multiline buffers without navigating history

	* 29416 (plus typo fixes): Doc/Zsh/contrib.yo: Fix (mis-)uses of
	var() in vcs_info documentation.

2011-05-31  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk: update version to 4.3.12-dev-0
	to avoid confusion with release.

2011-05-31  Frank Terbeck  <ft@bewatermyfriend.org>

	* Jan Pobrislo: 29411:
	Functions/VCS_Info/Backends/VCS_INFO_get_data_bzr: vcs_info: Major
	bzr backend update.

2011-05-31  Barton E. Schaefer  <schaefer@zsh.org>

	* 29410: Test/V01zmodload.ztst: skip autoload persistence test
	when zsh/example module is not available.

2011-05-31  Mikael Magnusson  <mikachu@gmail.com>

	* Omari Norman: users/16057: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_tree: Add completion for tree.

2011-05-31  Peter Stephenson  <pws@csr.com>

	* unposted: Config/version.mk: release 4.3.12.

2011-05-29  Nikolai Weibull  <now@bitwi.se>

	* unposted: Completion/Unix/Command/_git: Update git-branch completion
	to deal with -r and -d correctly.

2011-05-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29403: Src/hist.c: histlexwords splitting of ";;" in case.

2011-05-27  Mikael Magnusson  <mikachu@gmail.com>

	* 28364: Doc/Zsh/zle.yo: Document that space left by wrapping
	double-width characters is highlighted with the 'special' style.

	* 29384: Completion/Base/Completer/_expand,
	Completion/Unix/Type/_have_glob_qual,
	Completion/Unix/Type/_path_files, Completion/compinit: Add
	_comp_caller_options and use it in completions that want to
	check values of options that are overwritten by _comp_options.

	* 29334: Completion/Unix/Command/_sh: Complete options for zsh with
	_arguments --.

	* 29392: Doc/Zsh/compsys.yo: Remove now-defunct use-perl style
	documentation.

	* 29387: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_at: Add completion for at and friends.

	* 29385: Doc/Zsh/compsys.yo: Document when directories and
	local-directories are used.

2011-05-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 29382: Src/Modules/curses.c: apply 29374 to zccmd_input too.

2011-05-27  Mikael Magnusson  <mikachu@gmail.com>

	* 29331: NEWS: Note g:: parameter expansion flag.

	* 29365: Completion/Unix/Command/_make: redefine _make so that
	helper functions are only defined once.

	* 29376: Completion/Unix/Command/_initctl: redefine _initctl so
	that helper functions are only defined once.

	* unposted: Doc/Zsh/params.yo: Document that PROMPT_EOL_MARK can
	be empty, forgot in 28480.

	* 29329: Src/math.c: Fix undefined behaviour in function argument
	evaluation order.

2011-05-26  Peter Stephenson  <pws@csr.com>

	* unposted: Etc/CONTRIBUTORS: expand.

	* 29374: Src/Zle/zle_main.c: Exit ZLE immediately if exit
	is pending when a keypress is expected.

2011-05-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	*  Bernhard Tittelbach: 29371: Completion/Unix/Command/_initctl:
	completion for initctl and related system job management
	utilities.

2011-05-24  Barton E. Schaefer  <schaefer@zsh.org>

	* 29368: Src/exec.c: do not restore xtrerr to stderr before
	running simple commands; restore xtrerr to stderr just before
	running a function body, but after printing the trace of
	the function call itself.

	* 29367: Test/E02xtrace.ztst: update tests to fix mistaken
	assumptions introduced by 25145 and add check of redirection
	inside a function body.

2011-05-24  Mikael Magnusson  <mikachu@gmail.com>

	* 29364: Completion/Unix/Command/_make: Partial fix for
	completion in dirs with spaces and other unusual characters.

	* 29335: Completion/Linux/Command/_valgrind: Update the hack
	for --tool= completion.

	* 29338: Completion/Base/Core/_main_complete: Correct pattern
	checking for true value in insert-tab style.

2011-05-23  Peter Stephenson  <pws@csr.com>

	* unposted: Config/version.mk: 4.3.11-dev-4.

	* 29351: Src/subst.c: need to cast non-integer
	stdarg arguments to integer to fit % prototype.

	* unposted: Completion/Unix/Command/_go: typo

	* 29341, corrected: Completion/Unix/Command/_go,
	Completion/Unix/Command/.distfiles: basic completion for
	commands associated with the Go programming language.

2011-05-22  Mikael Magnusson  <mikachu@gmail.com>

	* unposted: Doc/Zsh/compsys.yo, ChangeLog: Quote -e with tt().
	Fix some formatting in ChangeLog.

	* 29328: Completion/Redhat/Command/_rpm,
	Completion/Unix/Command/_git, Completion/Unix/Command/_gnutls,
	Completion/Unix/Command/_gpg, Completion/Unix/Command/_growisofs,
	Completion/Unix/Command/_php: Another missing backslash in _git,
	remove some not needed backslashes in array definitions.

2011-05-19  Mikael Magnusson  <mikachu@gmail.com>

	* 29224: Doc/Zsh/expn.yo, NEWS, Src/subst.c,
	Test/D04parameter.ztst: Support negative LEN in ${VAR:OFFSET:LEN}
	like bash.

	* 29261: Doc/Zsh/expn.yo, Src/subst.c, Test/D04parameter.ztst:
	Add g:: parameter expansion flag. Add note that s:: can take an
	empty string.

	* 29307, 29308 + replies: Completion/BSD/Command/_bsd_pkg,
	Completion/Base/Utility/_sep_parts, Completion/Unix/Command/_git,
	Completion/Unix/Command/_osc, Completion/Unix/Command/_perforce,
	Completion/compinit, Completion/openSUSE/Command/_osc,
	Completion/openSUSE/Command/_zypper, Doc/Zsh/builtins.yo,
	Doc/Zsh/calsys.yo, Doc/Zsh/compctl.yo, Doc/Zsh/compsys.yo,
	Doc/Zsh/compwid.yo, Doc/Zsh/contrib.yo,
	Doc/Zsh/expn.yo, Doc/Zsh/zle.yo, Etc/CONTRIBUTORS,
	Functions/Calendar/calendar_parse, Functions/Misc/sticky-note,
	Functions/TCP/tcp_read, Functions/Zftp/zfcput, Src/Zle/compctl.c,
	Src/Zle/zle_hist.c, Src/exec.c, Src/hist.c, Src/jobs.c, Src/lex.c,
	Src/math.c, Src/params.c, Src/subst.c: Fix some doubled words in
	docs and comments.

2011-05-18  Wayne Davison  <wayned@users.sourceforge.net>

	* Valentin Haenel: 29315: Completion/Unix/Command/_git: add a
	missing backslash.

2011-05-17  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Doc/Zsh/options.yo: tweak description of the -l (LOGIN)
	option for clarity.

	* 29313: Src/subst.c: when SHWORDSPLIT is in effect, the state of
	the (@) expansion flag depends on the value of $IFS so as to mimic
	Bourne shell join/split behavior more closely (see users/15442).

	* 29312, users/16032: Doc/Zsh/mod_zutil.yo, Src/Modules/zutil.c:
	add "zparseopts -M" which allows option descriptions to map
	synonymous option names onto a single name.

2011-05-17  Clint Adams  <clint@zsh.org>

	* 29306: Completion/Debian/Command/_make-kpkg: typo fix
	from Laurent Fousse.

2011-05-17  Frank Terbeck  <ft@bewatermyfriend.org>

	* Nikolai Weibull: 29166: Completion/Unix/Command/_git: Speed
	improvements for file completion.

2011-05-17  Nikolai Weibull  <now@bitwi.se>

	* 29273: Completion/Unix/Command/_git: Parse compadd options in
	__git_guard_number.

2011-05-14  Barton E. Schaefer  <schaefer@zsh.org>

	* 29278: Completion/Unix/Type/_path_files: fix use of the $skips
	pattern from the squeeze-slashes style.

2011-05-14  Mikael Magnusson  <mikachu@gmail.com>

	* 29271: Doc/Zsh/compwid.yo: document _alternative -O name.

2011-05-14  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29282: Src/mem.c: hide prototypes for ZSH_HEAP_DEBUG with
	#ifdef's.

2011-05-14  Bart Schaefer  <schaefer@zsh.org>

	* 29276: Src/zsh.h: typedef Heapid unconditionally, to prevent
	compile errors in automatically-generated header files.

2011-05-14  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29268: Src/Zle/compcore.c: dupstring() the value that's
	going to be used for prpre, whatever the heck that is.

	* 29267: configure.ac, Src/mem.c, Src/zsh.h, Src/Zle/comp.h,
	Src/Zle/compcore.c, Src/Zle/compctl.c, Src/Zle/complist.c,
	Src/Zle/compresult.c: add --enable-zsh-heap-debug and use
	for debugging completion matcher groups.

2011-05-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Danek: 29254: Src/cond.c, Src/Builtins/rlimits.c,
	Src/Modules/datetime.c, Src/Modules/zftp.c, Src/Zle/computil.c:
	fix some compiler warnings.

2011-05-13  Peter Stephenson  <pws@csr.com>

	*  Jérémie Roquet: 29258: Src/Zle/zle_utils.c: mark a couple
	more functions for export.

	* unposted (late commit): Completion/Unix/Command/.distfiles,
	Config/version.mk, Test/.distfiles: update for 4.3.11-dev-3.

2011-05-12  Mikael Magnusson  <mikachu@gmail.com>

	* 29245: Completion/X/Command/_xset: pass -O instead of -o
	to _describe.

	* Nikolai Weibull: 29124: Completion/Unix/Command/_git: Fix
	-l option.

	* 29205: Completion/Unix/Type/_pids: don't sort processes.

	* 29208: Src/Zle/zle_move.c: make vimatchbracket check the
	character left of the cursor when at the end of the line.

2011-05-11  Mikael Magnusson  <mikachu@gmail.com>

	* 29206: Doc/Zsh/mod_complist.yo: fix formatting.

2011-05-11  Peter Stephenson  <pws@csr.com>

	* 29217: Src/zsh.mdd: zshterm.h and zshcurses.h are now
	dependencies for the main shell.

2011-05-10  Peter Stephenson  <pws@csr.com>

	* unposted: Src/.distfiles, Src/system.h, Src/zsh.mdd,
	Src/zsh_system.h: rename system.h to zsh_system.h to ensure
	there are no clashes.

	* 29214: Src/Makemod.in.in, Src/mkmakemod.sh, Src/zsh.mdd: use
	-I to find headers in order to allow #include'ing generated
	headers from non-generated headers when the build tree is
	separate from the source tree.

	* 29191 (Danek) and 29203 (with fixes): Doc/Zsh/params.yo,
	Src/params.c: make TERMINFO variable special.

2011-05-09  Peter Stephenson  <pws@csr.com>

	* 29195: Src/.distfiles, Src/hashnameddir.c, Src/hashtable.c,
	Src/system.h, Src/zsh.mdd: Separate out hash handling for named
	directories in order to keep RCP header usage from curses to
	avoid clash on Solaris 8.

	* 29193: Src/text.c: fix variable declaration that was after
	code.

	* 29165: Src/builtin.c, Src/exec.c, Src/glob.c, Src/hashtable.c,
	Src/init.c, Src/jobs.c, Src/loop.c, Src/params.c, Src/prompt.c,
	Src/system.h, Src/utils.c, Src/Modules/files.c,
	Src/Modules/termcap.c, Src/Modules/zpty.c, Src/Zle/comp.h,
	Src/Zle/complist.c, Src/Zle/compmatch.c, Src/Zle/compresult.c,
	Src/Zle/computil.c, Src/Zle/zle_refresh.c, Src/Zle/zle_tricky.c,
	Src/Zle/zle_utils.c: Use term.h globally if needed, instead of
	just using in Modules and fudging the headers elsewhere.  Fix
	various name clashes.

2011-05-08  Barton E. Schaefer  <schaefer@zsh.org>

	* users/15986 (belated commit): Src/Modules/curses.c: handle
	EINTR in zccmd_input.

2011-05-08  Wayne Davison  <wayned@users.sourceforge.net>

	* Valentin Haenel: 29187: Completion/Unix/Command/_git: add a
	missing backslash.

2011-05-07  Barton E. Schaefer  <schaefer@zsh.org>

	* 29175 (w/comment typo fixed): Src/mem.c: optimize freeheap.

2011-05-07  Frank Terbeck  <ft@bewatermyfriend.org>

	* 29170: Doc/Zsh/contrib.yo: vcs_info: Clarify check-for-changes
	style behaviour with the mercurial backend.

	* unposted: Doc/Zsh/contrib.yo: Add missing word ("style") spotted
	by Bart.

2011-05-06  Peter Stephenson  <pws@csr.com>

	* 29163: README, Etc/FAQ.yo: update latest version claimed
	to 4.3.12.

2011-05-04  Barton E. Schaefer  <schaefer@zsh.org>

	* 29140: Completion/bashcompinit: introduce function-scope wrapper
	around the call to the bash completion function; in this wrapper,
	hide the "words" special variable so that it may be used as an
	ordinary variable by the bash completions.

2011-05-04  Peter Stephenson  <pws@csr.com>

	* Rocky Bernstein: 29135 (plus tweaks): Completion/bashcompinit,
	Test/.distfiles, Test/Y04compgen.ztst, Test/compgentest: fix and
	test "compgen -W" in bash completion.

	* unposted: NEWS: a few notes for next release.

2011-05-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Haakon Riiser: 29137: Completion/Unix/Command/_ffmpeg: better
	handling of flags.

2011-05-03  Peter Stephenson  <pws@csr.com>

	* 29134: Src/prototypes.h: change termcap prototypes for AIX
	locally until we find the header.

2011-05-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 29129: Src/exec.c: reading off end of file descriptor array
	noticed by Vincent.

2011-05-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Haakon Riiser: unposted: Completion/Unix/Command/_ffmpeg: more
	tweaks.

2011-04-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Haakon Riiser: 29100: Completion/Unix/Command/_ffmpeg: Clean
	up and add dependencies.

	* 29114: Doc/Makefile.in, Doc/Zsh/.distfiles,
	Doc/Zsh/ftp_sites.yo, Doc/Zsh/metafaq.yo, Etc/FAQ.yo: Use same
	FTP sites list in META-FAQ as FAQ.

	* İsmail Dönmez: 29020: Completion/openSUSE/Command/_SuSEconfig,
	Completion/openSUSE/Command/_hwinfo,
	Completion/openSUSE/Command/_osc,
	Completion/openSUSE/Command/_yast2,
	Completion/openSUSE/Command/_zypper (plus .distfiles): new
	completions.

2011-04-29  Barton E. Schaefer  <schaefer@zsh.org>

	* 29107: Src/Zle/zle_tricky.c: replace overlapping strcpy with
	memmove.

2011-04-27  Mikael Magnusson  <mikachu@gmail.com>

	* 29051: Completion/Unix/Command/_make: add _make- prefix to
	internal helper functions.

2011-04-26  Wayne Davison  <wayned@users.sourceforge.net>

	* 29053 (modified): Src/prototypes.h: Use "const" qualifier
	in termcap prototypes.

2011-04-25  Frank Terbeck  <ft@bewatermyfriend.org>

	* Felipe Contreras: 29028: Completion/Unix/Command/_git: Add
	useful completion for `gitk'.

	* Simon Ruderich: 29041: Completion/Unix/Command/_git: Add
	completion for `tig' like the one for `gitk' from 29028.

	* unposted: Functions/Zle/edit-command-line: Revert change from
	28896, which did more evil than good.

2011-04-24  Barton E. Schaefer  <schaefer@zsh.org>

	* Jun T.: 29031: Src/Zle/complist.c: increment global minfo
	state when inserting characters on the line during interactive
	menu selection.

2011-04-21  Barton E. Schaefer  <schaefer@zsh.org>

	* 29025: Test/A01grammar.ztst: in select test, assert LINES=3
	along with COLUMNS=80 so that the selectlist is sure to be
	printed where the control script can capture/examine it.

2011-04-21  Frank Terbeck  <ft@bewatermyfriend.org>

	* Valentin Haenel: 29019, Completion/Unix/Command/_git: Fix git
	stash completion (apply and pop subcommands).

	* 29027: Completion/Unix/Command/_screen: support "/dev/ttyUSB0
	[baud]"-style arguments.

	* unposted: INSTALL: Clarify at which point directories from
	--enable-additional-fpath are added to $fpath.

2011-04-19  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/X/Command/.distfiles, Config/version.mk:
	development version 4.3.11-dev-2.

	* unposted: Completion/Unix/Command/_perforce: don't complete p4
	reopen to same change.

2011-04-18  Frank Terbeck  <ft@bewatermyfriend.org>

	* 29008, 29012: Config/defs.mk.in, Src/init.c, Src/zsh.mdd,
	configure.ac, INSTALL: Add `--enable-additional-fpath' option to
	add arbitrary directories to the default `$fpath'.

2011-04-18  Peter Stephenson  <pws@csr.com>

	* Simon Ruderich: 29004: M Doc/Zsh/compsys.yo,
	Doc/Zsh/metafaq.yo, Etc/FAQ.yo: update archive list.

2011-04-15  Wayne Davison  <wayned@users.sourceforge.net>

	* Unposted: Src/Zle/computil.c: Fix compiler warning caused by
	duplicate initialization of state.doff.

2011-04-15  Frank Terbeck  <ft@bewatermyfriend.org>

	* Simon Ruderich: 28927: Completion/Unix/Command/_git: Fix "git
	tag -v" completion.

2011-04-15  Mikael Magnusson  <mikachu@gmail.com>

	* 28998: Completion/Unix/Command/_make: set return status
	correctly.

2011-04-14  Peter Stephenson  <pws@csr.com>

	* 28997: configure.ac, Src/system.h: make --enable-libc-musl
	explicit.

2011-04-13  Peter Stephenson  <pws@csr.com>

	* gi1242+zsh: 28991: Completion/Unix/Command/_subversion: fix
	caching policy for subversion.

2011-04-12  Peter Stephenson  <pws@csr.com>

	* Valentin Ochs: 28990: configure.ac, Src/system.h: more
	changes needed for signals.

	* Valentin Ochs: 28989: configure.ac: define _POSIX_C_SOURCE
	when testing for sigset_t (needed for musl).

2011-04-11  Peter Stephenson  <pws@csr.com>

	* users/15953: Src/builtin.c: handle EINTR when using read -k or
	-q together with -u or -p.

	* cat.in.136: users/15945: Completion/Redhat/Command/_yum:
	various corrections and updates.

2011-04-05  Wayne Davison  <wayned@users.sourceforge.net>

	* 28977: Src/utils.c: fix copying of uninitialized memory
	when trying to spell-correct a really long string.

2011-04-01  Peter Stephenson  <pws@csr.com>

	* Stef van Vlierberghe: Src/jobs.c: 28965 (as posted in 28967):
	findproc() should not return processes not marked as SP_RUNNING
	since findproc() is used find processes still known to the OS.

2011-03-30  Frank Terbeck  <ft@bewatermyfriend.org>

	* Mike Meyer: 28956, 28957:
	Functions/VCS_Info/Backends/VCS_INFO_detect_fossil,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_fossil,
	Doc/Zsh/contrib.yo: Add fossil support to vcs_info.

	* unposted: Functions/VCS_Info/Backends/.distfiles: Add
	new backend files to `.distfiles'.

	* unposted: ChangeLog: Fix typo in date.

	* 28958: Functions/VCS_Info/VCS_INFO_hook: Support registering
	hooks independent of the context.

	* 28960: Doc/Zsh/contrib.yo, Functions/VCS_Info/.distfiles,
	Functions/VCS_Info/vcs_info, Functions/VCS_Info/vcs_info_hookadd,
	Functions/VCS_Info/vcs_info_hookdel: Add functions to add/remove
	static hooks.

	* 28961: Doc/Zsh/contrib.yo, Functions/VCS_Info/VCS_INFO_set: Add
	`no-vcs' hook.

	* 28959: Doc/Zsh/contrib.yo, Functions/VCS_Info/VCS_INFO_set,
	Functions/VCS_Info/vcs_info: Make the nvcsformats style be used if
	vcs_info is disabled.

2011-03-29  Mikael Magnusson  <mikachu@gmail.com>

	* unposted: Completion/Unix/Command/_vim: Fix typo in
	description for -N.

2011-03-29  Peter Stephenson  <pws@csr.com>

	* Mikael: 28948: Completion/compinit, Doc/Zsh/compsys.yo:
	compdef -e overrides interpretation of argument as service.

2011-03-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael: 28941: Src/Zle/zle_params.c: accessing cursor with
	metafied line was problematic.

2011-03-21  Peter Stephenson  <pws@csr.com>

	* 28936: Src/subst.c: ${#$} and ${#?} also didn't work.

2011-03-20  Frank Terbeck  <ft@bewatermyfriend.org>

	* Johan Sundström: 28890: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_npm: New _npm completion.

2011-03-19  Barton E. Schaefer  <schaefer@zsh.org>

	* 28926: Src/Zle/zle_tricky.c: No newline after the last line in
	listlist() when printing the list in a single column.

2011-03-18  Frank Terbeck  <ft@bewatermyfriend.org>

	* Nikolai Weibull: 28914: Completion/Unix/Command/_git: Typo
	fix in `cvsexportcommit' description.

	* Nikolai Weibull: 28911: Completion/Unix/Command/_git: Only show
	modified files for git-checkout without tree.

	* Nikolai Weibull: 28913: Completion/Unix/Command/_git: Fix typo
	which broke `send-email' completion.

2011-03-16  Frank Terbeck  <ft@bewatermyfriend.org>

	* 28896: Functions/Zle/edit-command-line: unset `monitor' option
	while the widget is running to avoid accidential data loss.

2011-03-16  Peter Stephenson  <pws@csr.com>

	* Mikael: users/15875: Completion/Unix/Command/_gpg: use return
	status from _arguments.

2011-03-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28889: Src/subst.c, Test/D04parameter.ztst: ${##} should
	return the length of $#.

2011-03-11  Barton E. Schaefer  <schaefer@zsh.org>

	* Greg Klanderman: 28887: Completion/Zsh/Type/_command_names:
	fix quoting in defs array.

2011-03-11  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Zsh/Context/_dynamic_directory_name:
	Mikael spotted that completion doesn't work if
	$zsh_directory_name_functions is set but zsh_directory_name
	isn't defined.

	* users/15864: Completion/Zsh/Context/_dynamic_directory_name,
	Doc/Zsh/contrib.yo, Doc/Zsh/expn.yo, Functions/Chpwd/.distfiles,
	Functions/Chpwd/zsh_directory_name_cdr,
	Functions/Misc/add-zsh-hook, Src/subst.c, Src/utils.c:
	turn zsh_directory_name into a hook.

	* 28886: Src/Zle/zle_utils.c: Fix 28772 for the case where
	regions have the "P" flag to include $PREDISPLAY in the
	offsets.

2011-03-08  Barton E. Schaefer  <schaefer@zsh.org>

	* Greg Klanderman: 28846: Completion/Zsh/Type/_functions,
	Completion/Zsh/Type/_command_names,
	Completion/Zsh/Type/_parameters, Doc/Zsh/compsys.yo: adapt
	prefix-needed zstyle to handle the completion function naming
	convention of a leading underscore.

2011-03-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28866: Src/exec.c, Test/A04redirect.ztst: With POSIX_BUILTINS,
	"command" prefix tops a command having special behaviour.

2011-03-05  Barton E. Schaefer  <schaefer@zsh.org>

	* Adrian: 28857: Functions/Prompts/prompt_bigfade_setup: use %d
	instead of $PWD

2011-03-04  Frank Terbeck  <ft@bewatermyfriend.org>

	* 28853: Doc/Zsh/contrib.yo, Doc/Zsh/expn.yo, Functions/Chpwd/cdr,
	Src/builtin.c, Src/prompt.c: Fix typo: preceed -> precede

2011-03-02  Barton E. Schaefer  <schaefer@zsh.org>

	* 28805: Doc/Zsh/builtins.yo, Doc/Zsh/mod_sched.yo: move stray
	text about the sched builtin away from the set builtin.

2011-03-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Baptiste: 28819: Completion/BSD/Command/_sockstat,
	Completion/Unix/Command/_mount,
	Completion/Unix/Type/_file_systems: FreeBSD completion tweaks.

2011-02-28  Barton E. Schaefer  <schaefer@zsh.org>

	* 28823: Src/builtin.c: make it an error to tie the same scalar to
	two different arrays (prevents crash bug); improve a couple of
	other error messages.

2011-02-28  Peter Stephenson  <pws@csr.com>

	* Frank, 28812, modified as in 28813: Src/string.c: wcs_ztrdup()
	needs to allocate array of wchar_t.  Looks like this isn't
	currently used anywhere.

2011-02-27  Wayne Davison  <wayned@users.sourceforge.net>

	* Nikolai Weibull: 28649,28804: Completion/Unix/Command/_git:
	Latest version copied from https://github.com/now/zsh.

2011-02-24  Peter Stephenson  <pws@csr.com>

	* 28799: Src/lex.c: fix bug introduced with lexflags
	that lexical analyser didn't stop quickly enough when
	retrieving completion words.

2011-02-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28795: Src/exec.c: tweak to 28791 for forked shells.
	Also (unposted) typos in comments noticed by Mikael.

2011-02-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28791: Doc/Zsh/options.yo, Src/builtin.c, Src/exec.c,
	Test/A04redirect.ztst: exit on errors in special builtins
	with POSIXBUILTINS.

2011-02-21  Peter Stephenson  <pws@csr.com>

	* 28783: Doc/Zsh/options.yo, Src/lex.c, Test/A01grammar.ztst:
	allow ( to be treated specially in more places when SH_GLOB
	is set but KSH_GLOB isn't.

	* 28784: Doc/Zsh/options.yo, Test/A04redirect.ztst, Src/exec.c:
	exit on exec redirection error with POSIXBUILTINS.

2011-02-19  Frank Terbeck  <ft@bewatermyfriend.org>

	* 28776: Functions/VCS_Info/VCS_INFO_bydir_detect,
	Functions/VCS_Info/Backends/VCS_INFO_detect_hg,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_hg: Let
	vcs_info detect very old mercurial repositories.


2011-02-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28773, Doc/Zsh/zle.yo, Src/zle_hist.c: add
	zle-history-line-set widget.

	* 28772: Doc/Zsh/zle.yo, Src/Zle/compcore.c,
	Src/Zle/compresult.c, Src/Zle/zle.h, Src/Zle/zle_refresh.c,
	Src/Zle/zle_tricky.c, Src/Zle/zle_utils.c: update regions
	in $region_highlight dynamically.

2011-02-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28761: Completion/Unix/Command/_sccs: file completion missing
	for some commands.

	* 28762: Src/exec.c: logic for closing coproc file descriptors
	was wrong.

2011-02-15  Frank Terbeck  <ft@bewatermyfriend.org>

	* 28758: Functions/Misc/colors: work with non-default option sets.

2011-02-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28750 with some extra comments:
	Completion/Unix/Type/_path_files: separate out completeinword
	handling where the current component is not the last but is
	the first from the already handled case where there is a further
	component in front.

2011-02-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28671: Src/Zle/zle_utils.c: better cursor positioning
	after undo.

	* users/15738: Functions/Zle/modify-current-argument: better
	positioning of the cursor after the operation.

2011-02-11  Frank Terbeck  <ft@bewatermyfriend.org>

	* Lennart Weller: 28739:
	Functions/VCS_Info/Backends/VCS_INFO_detect_svn: Fix svn
	detection in vcs_info.

2011-02-10  Barton E. Schaefer  <schaefer@zsh.org>

	* users/15759 (slightly augmented): Functions/Zle/send-invisible,
	Functions/Zle/.distfiles: widget to read a concealed string from
	the keyboard and stash it in $INVISIBLE.

	* users/15770: Src/init.c: disable HASH_DIRS when not interactive.

	* 28710: Completion/Debian/Type/_deb_packages: replace complex
	parameter expansion with command substitution to speed diffing
	of large lists of packages.

	* unposted: Doc/Zsh/contrib.yo: add send-invisible.  Re-order
	some other entries to restore approximate alphabetization.

2011-01-24  Clint Adams  <clint@zsh.org>

	* Carl Worth: 28648: Completion/Unix/Command/_notmuch: notmuch
	completion by Ingmar Vanhassel.

2011-01-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* gi1242+zsh@gmail.com: 28647: Completion/X/Command/_vnc: more
	options.

	* gi1242+zsh@gmail.com: 28646: Completion/X/Command/_matlab: new
	completion.

2011-01-19  Peter Stephenson  <pws@csr.com>

	* 28638: Doc/Zsh/parameter.yo, Src/zsh.h,
	Src/Modules/parameter.c, plus NEWS added: add $usergroups hash
	mapping from user's own groups by name to GID.

2011-01-18  Peter Stephenson  <pws@csr.com>

	* Mikael: 28637: Src/subst.c: ${foo:0:} caused crash.

2011-01-17  Peter Stephenson  <pws@csr.com>

	* Atom Smasher: users/15715: Completion/Zsh/Function/_zargs: new

2011-01-16  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Config/defs.mk.in, configure.ac: use the -L option
	with yodl 3.x.

2011-01-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28631: gi1242+zsh@gmail.com (as in 28633):
	Completion/Unix/Command/.distfiles, Completion/Unix/Command/_lp,
	Completion/Unix/Command/_tex, Completion/Unix/Command/_xournal,
	Completion/Unix/Type/.distfiles, Completion/Unix/Type/_tex,
	Completion/X/Command/.distfiles, Completion/X/Command/_xournal:
	various updates.

	* 28634: Test/D04parameter.ztst: test for 28630.

	* Ricky Zhou: 28630: Src/params.c: fix crash with isident.

	* gi1242+zsh@gmail.com: 28629: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_lp, Completion/Unix/Command/_tex,
	Completion/Unix/Command/_xournal,
	Completion/Unix/Type/.distfiles, Completion/Unix/Type/_tex,
	Completion/X/Command/.distfiles, Completion/X/Command/_xournal:
	completion updates.

2011-01-16  Clint Adams  <clint@zsh.org>

	* unposted: Completion/Unix/Command/_fuser: fix typo in pattern

2011-01-13  Peter Stephenson  <pws@csr.com>

	* c.f. 28628: Doc/Zsh/func.yo: some extra notes on traps.

2011-01-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Src/params.c: fix return types in 28617.

	* 28611: Src/Zle/zle_move.c: remove unused special behaviour for
	VI mark 26.

2011-01-11  Peter Stephenson  <pws@csr.com>

	* 28626: Doc/Zsh/func.yo: summarise differences between two
	types of trap.

2011-01-10  Peter Stephenson  <pws@csr.com>

	* 28617: Src/glob.c, Src/params.c, Test/E01options.ztst: NO_EXEC
	option was doing to much work with parameter subscripting,
	parameter assignments, and globbing.

2011-01-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28544: Src/Makefile.in, Makemod.in.in: another way of handling
	bad dependencies for 'make prep' as in 28541.

	* gi1242+zsh@gmail.com: 28594 (with changes as in 28598):
	Completion/Linux/Command/.distfiles,
	Completion/Linux/Command/_modutils,
	Completion/Linux/Command/_wpa_cli,
	Completion/Unix/Command/.distfiles, Completion/Unix/Command/_lp,
	Completion/Unix/Command/_pgrep,
	Completion/Unix/Command/_subversion,
	Completion/Unix/Command/_unison,
	Completion/Unix/Command/_xournal, Completion/Unix/Type/_pdf,
	Completion/X/Command/.distfiles, Completion/X/Command/_gv,
	Completion/X/Command/_okular, Completion/X/Command/_pdftk,
	Completion/X/Command/_vnc, Completion/X/Command/_xrandr: Various
	new and improved completions.

2011-01-07  Peter Stephenson  <pws@csr.com>

	* 28590 (added a comment): Src/builtin.c, Test/B04read.ztst:
	read builtin should return non-zero status on error.

	* Mikael: 28585: Completion/Unix/Command/_mkdir: don't set ret=0
	when _wanted fails to find any matches.

2011-01-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Src/utils.c: fix argument type for write_loop().

	* 28588: Src/text.c, Test/C02cond.ztst: fix textual display
	after =~ test.

	* Ben: 28574: Completion/Unix/Command/_ri: use bs formatter.

2011-01-06  Barton E. Schaefer  <schaefer@zsh.org>

	* 28579: Completion/Unix/Command/_du: propagate failure status
	from _arguments so that _complete will try other completions.

	* 28578 (plus test): Src/utils.c, Src/zsh.h, Test/B03print.ztst:
	fix handling of numeric escapes that expand to "%" in printf
	format strings, so they are not treated as format introducers.

2011-01-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28568 c.f. 28549 (Ricky Zhou): Src/utils.c: buffer overflow
	examining paths.

	* Alexey: 28557: Completion/Unix/Command/_ri: update for new
	versions of Ruby.

2010-12-25  Clint Adams  <clint@zsh.org>

	* 28548: Completion/Unix/Command/_fuser: match psmisc in any case.

2010-12-21  Barton E. Schaefer  <schaefer@zsh.org>

	* users/15662: Src/params.c: fix array slice assignment with one
	index positive and one negative.

	* unposted: Test/A06assign.ztst: tests for users/15662.

2010-12-21  Peter Stephenson  <pws@csr.com>

	* users/15663: Test/A06Assign.ztst: some (incomplete) array
	assignment tests.

	* unposted: Config/version.mk: update version to 4.3.11-dev-1.

2010-12-20  Peter Stephenson  <pws@csr.com>

	* unposted: Src/Makefile.inc: restore unintentionally removed
	.PHONY entires.

	* unposted: Config/version.mk, Src/Makefile.inc: release 4.3.11.
	Tweak to Src/Makefile.inc was to workaround some make problem
	with timestamps.

	* Paul Ackersviller: 28538: as modified in 28540 plus a couple
	of casts to char * I missed: Src/init.c,Src/input.c,
	Src/parse.c, Src/prototypes.h, Src/utils.c, Src/Zle/zle_main.c:
	pointer arithmetic needs to be done with char *, not void *.

2010-12-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28537: Src/lex.c, Test/D04parameter.ztst: word splitting on
	'((' in command position that turned into nested subshell
	commands was broken.

2010-12-18  Barton E. Schaefer  <schaefer@zsh.org>

	* 27862 (belatedly): Completion/X/Utility/_x_arguments: handle
	X11 versions greater than X11R6 in the compdef line.

	* unposted: Src/Makefile.in: "prep" target depends on Makemod,
	not on the files on which Makemod depends.

2010-12-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael: 28535: NEWS: typo

2010-12-17  Peter Stephenson  <pws@csr.com>

	* Štěpán Němec: 28533: README, Doc/Zsh/compsys.yo,
	Doc/Zsh/compwid.yo, Doc/Zsh/contrib.yo, Doc/Zsh/expn.yo,
	Doc/Zsh/params.yo, Doc/Zsh/zle.yo, Functions/Chpwd/cdr: typos.

	* unposted: NEWS: note zle_highlight suffix control.

	* Mikael: users/15653: Src/Zle/zle_refresh.c:
	zle_highlight=(none) should turn off suffix highlighting.

2010-12-16  Peter Stephenson  <pws@csr.com>

	* Mikael: 28531: Completion/Base/Utility/_combination,
	Doc/Zsh/expn.yo, Doc/Zsh/mod_clone.yo, Doc/Zsh/options.yo,
	Src/exec.c: typos.

	* unposted: NEWS: add notes on (Z) parameter flag.

	* unposted: README, Config/version.mk, Etc/FAQ.yo,
	Completion/Debian/Command/.distfiles: update for 4.3.10-test-3.

2010-12-14  Barton E. Schaefer  <schaefer@zsh.org>

	* 28530: Doc/Zsh/expn.yo, Src/subst.c, Test/D04parameter.ztst:
	replace (z+opts+) flag with (Z:opts:), add reserved (_:flags:).

2010-12-14  Peter Stephenson  <pws@csr.com>

	* unposted: Src/lex.c: another neatening of lexflags use for
	ZLE.

	* 28529: Src/hist.c, Src/lex.c, Src/zsh.h, Src/Zle/compcore.c,
	Src/Zle/compctl.c, Src/Zle/zle_tricky.c: save and restore
	lexflags and separate out special word logic for ZLE by
	adding new flag LEXFLAGS_ZLE.

	* 28528: Doc/Zsh/expn.yo, Src/hist.c, Src/lex.c, Src/subst.c,
	Src/zsh.h, Src/Zle/compcore.c, Src/Zle/compctl.c,
	Src/Zle/zle_tricky.c, Test/D04parameter.ztst: clear up use of
	zleparse variable into lexflags; add (z+n+) for splitting with
	newline treated as ordinary whitespace.

2010-12-13  Peter Stephenson  <pws@csr.com>

	* 28526: Src/lex.c, Test/D04parameter.ztst: zplitting
	'line # with comment' when stripping comments shouldn't generate
	a newline at the end (unless there is one).

2010-12-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28510: Doc/Zsh/expn.yo, Src/hist.c, Src/lex.c, Src/subst.c,
	Src/Modules/parameter.c, Src/Zle/zle_hist.c, Src/Zle/zle_misc.c,
	Test/D04parameter.ztst: add (z+c+) and (z+C+) parameter flags.

2010-12-07  Peter Stephenson  <pws@csr.com>

	* unposted: remove users/15622 which causes problems
	with certain existing forms of testing commands.

2010-12-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	*  Mikael: 28480: Doc/Zsh/params.yo, Src/utils.c: allow
	PROMPT_EOL_MARK to be an empty string.

2010-12-06  Peter Stephenson  <pws@csr.com>

	* users/15622: Completion/Base/Utility/_pick_variant: use
	$service rather than $words[1] to pick the service. Although
	there may be cases where this doesn't work, this provides
	transparent behaviour for simple uses along the lines of
	"compdef <_func> <cmd>=<service>"

	* users/15621: Completion/compinit,
	Completion/Base/Core/dispatch: fix setting service for compef
	-p/-P.

	* Mikael: 28487: Doc/Zsh/builtins.yo, Doc/Zsh/expn.yo,
	Doc/Zsh/options.yo, Doc/Zsh/prompt.yo: fix docs to refer to
	current directory rather than $PWD.

	* 28486: Src/Zle/compcore.c: $compstate[parameter] needed
	untokenizing.

	* Mikael: 28484: Completion/Unix/Command/_du: updated for GNU
	variant.

2010-12-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: NEWS: mention {START..END..STEP} changes.

	* Mikael: 28474, 28478: Doc/Zsh/expn.yo, Src/glob.c,
	Test/D09brace.ztst: extended {START..END..STEP} syntax.

	* 28476: Test/.distfiles, Test/D09brace.ztst: new set of tests
	for brace expansion.

	* 28475: Test/A05execution.ztst: test that starting a background
	job resets the status.

	* 28469: Src/exec.c: fix memory leak in anonymous function.

2010-12-04  Wayne Davison  <wayned@users.sourceforge.net>

	* Aaron Schrab: 28210: Completion/Unix/Command/_git: add completion
	for help subcommand.

2010-12-03  Peter Stephenson  <pws@csr.com>

	* 28468: Completion/Unix/Command/_man: if argument contains a
	"/", complete file instead of manual page reference; prefer
	files with man suffixes.

2010-11-30  Peter Stephenson  <pws@csr.com>

	* unposted: NEWS: add news about ${NAME:OFFSET} and took the
	opportunity for a general tidy up.

2010-11-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 28461: Src/exec.c: flush stderr in PRINT_EXIT_VALUE handling.

	* users/15583: Functions/Misc/sticky-note: update with zstyles and
	for ease of use in zle-line-init.

2010-11-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28459: Src/utils.c: flush shell output in PROMPT_SP handling.

2010-11-25  Wayne Davison  <wayned@users.sourceforge.net>

	* 28445: Src/utils.c: overwrite PROMPT_SP string if it
	should remain invisible, even with an upcoming newline.

2010-11-25  Peter Stephenson  <pws@csr.com>

	* Sebastian Stark: users/15581:
	Completion/Zsh/Command/_zmodload: MacOS has .bundle DLL files.

	* users/15580: Completion/Zsh/Function/_zsh-mime-handler,
	Functions/MIME/zsh-mime-handler: fixes for completion when
	dropping through to normal completion.

	* 28434: Doc/Zsh/expn.yo, Src/subst.c, Test/D04parameter.ztst:
	Make ${NAME:OFFSET} always use zero-offset.

2010-11-22  Peter Stephenson  <pws@csr.com>

	* 28424: Doc/Zsh/options.yo, Src/options.c, Src/utils.c,
	Src/zsh.h, Test/A03quoting.ztst: New POSIX_STRINGS option
	makes \0 in $'...' terminate the quoted string.

2010-11-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28425: Src/subst.c: remove null arguments and untokenize
	in check_colon_subscript().

2010-11-18  Peter Stephenson  <pws@csr.com>

	* 28419: Doc/Zsh/expn.yo, Src/subst.c, Test/D04parameter.ztst:
	KSH_ARRAY ${*:0:1} gives $0 etc.

	* 28418: Doc/Zsh/expn.yo, Src/lex.c, Src/params.c, Src/subst.c,
	Test/D04parameter.ztst: add ${NAME:OFFSET} and
	${NAME:OFFSET:LENGTH} substitution syntax.

2010-11-17  Peter Stephenson  <pws@csr.com>

	* 28377: Doc/Zsh/grammar.yo: document more alias problems.

2010-11-14  Clint Adams  <clint@zsh.org>

	* 28411: Completion/Unix/Command/_git: complete submodule
	and annex as subcommands; complete files when the subcommand
	is unknown.

2010-11-10  Clint Adams  <clint@zsh.org>

	* 28401: Completion/Debian/Command/_git-buildpackage:
	git-buildpackage completion from Felipe Sateler.

2010-11-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael: 28389: Completion/Unix/Type/_java_class: empty section
	in $CLASSPATH.

2010-11-03  Barton E. Schaefer  <schaefer@zsh.org>

	* 28384: Src/params.c: improve error message on assignment to a
	field of a read-only hash.

2010-10-27  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/grammar.yo: typo pointed out by
	Štěpán plus slight rephrasing.

	* 28375: Doc/Zsh/grammar.yo: clarify how to quote aliases from
	expansion.

2010-10-25  Peter Stephenson  <pws@csr.com>

	* 28363: Src/Zle/zle_refresh.c: inserting a character when a
	wide character was at the end of the line didn't work.

2010-10-22  Peter Stephenson  <pws@csr.com>

	* 28360: Src/subst.c, Test/E01options.ztst: NO_UNSET option
	should test parameters with following operators, too.

	* not quite posted: Completion/Unix/Command/_screen: better to
	allow sessions to be completed after -S.

2010-10-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Silas Silva (with minor improvement): users/15464:
	Completion/Unix/Command/_man: support for -M argument.

2010-10-18  Peter Stephenson  <pws@csr.com>

	* Jérôme Pouiller: 28351: Functions/Misc/run-help-openssl,
	Functions/Misc/run-help-sudo: new help functions.

2010-10-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael: 28356: Src/Zle/zle_refresh.c: don't increment old
	display line past NULL.

	* c.f. 28353: Doc/Zsh/metafaq.yo: removing remaining reference
	to sunsite in FTP sites.

2010-10-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28345: Doc/Zsh/expn.yo, Functions/Chpwd/cdr, Src/builtin.c,
	Src/utils.c: make new ${(D)} flag return the contracted file as
	a fully usable command line argument.

2010-10-12  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (users/15440): Doc/Zsh/expn.yo: fix cross-references
	among parameter expansion rules.

2010-10-12  Peter Stephenson  <pws@csr.com>

	* Mikael: 28343: Completion/Unix/Command/_setfacl: didn't
	complete file argument in all cases.

2010-10-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28340: Src/params.c: assignment with negative index didn't
	work with multibyte characters.

	* 28339: Src/hist.c: NO_HIST_LEX_WORDS didn't handle
	backslash-newline line continuation properly, either.

	* 28332: Src/hist.c: HIST_LEX_WORDS didn't handle
	backslash-newline line continuation properly.  Come to think of
	it, neither does the alternative.

2010-10-10  Phil Pennock  <pdpennock@users.sourceforge.net>

	* 28338: Src/cond.c, C02cond.ztst: keep =~ from inverting sense
	of subsequent tests (after &&/||).

2010-10-08  Peter Stephenson  <pws@csr.com>

	* Ben: 28330: Completion/X/Command/_acroread: add
	completion for -openInNewInstance.

	* Ben: 28329: Completion/X/Command/_acroread: version 9 is
	similar to 7 and 8.

2010-10-07  Peter Stephenson  <pws@csr.com>

	* 28327: Src/hist.c: Fix bufferwords() splitting when RC_QUOTES
	is turned on.

2010-10-06  Peter Stephenson  <pws@csr.com>

	* 28326: Src/hist.c, Test/D04parameter.ztst: Problems with
	HIST_LEX_WORDS: memory allocation was screwed if we skipped
	"words" from the lexer; use local heap to avoid silly amounts of
	memory; fallback to non-lex on failure rather than just fixing
	up at the end; workaround oddity with splitting with RC_QUOTES.

	* 28319: Src/hist.c, Test/D04parameter.ztst: ${(z)...}
	splitting oddities and some tests for consistency.

	* 28285: Doc/Zsh/zle.yo, Src/Zle/zle_hist.c: add
	zle-isearch-update and zle-isearch-exit hooks.

2010-10-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: NEWS: note HIST_LEX_WORDS option.

	* 28310 with 28308 (Bart): Doc/Zsh/options.yo, Src/hist.c,
	Src/options.c, Src/zsh.h: HIST_LEX_WORDS option and check
	for full history file read.

	* 28309: Src/subst.c: infinite loop when padding with extra wide
	characters.

	* Mikael: 28301: Doc/Zsh/compsys.yo: restore missing line.

2010-10-01  Oliver Kiddle  <opk@zsh.org>

	* 28307: Completion/Zsh/Command/_zstyle: support new styles
	especially vcs_info ones and allow quoted contexts again

2010-09-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28295 plus tweak for failure case: Src/hist.c: use lexer to
	split words from history file.

2010-09-23  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/manual.yo: update address of HTML manual.

2010-09-20  Peter Stephenson  <pws@csr.com>

	* 28282: Src/Zle/zle_keymap.c, Src/Zle/zle_main.c,
	Src/zle_utils.c: new function zlecallhook() and fix argument to
	zle-keymap-select.

2010-09-19  Barton E. Schaefer  <schaefer@zsh.org>

	* 28268: Src/builtin.c: I/O to a terminated (or never created)
	coprocess emits a "no coprocess" diagnostic, instead of either
	nothing or "bad file number".

2010-09-16  Peter Stephenson  <pws@csr.com>

	* Baptiste: 28264: Completion/Unix/Command/_ffmpeg: remove the
	need for sed.

2010-09-15  Wayne Davison  <wayned@users.sourceforge.net>

	* 28261: Julius Plenz: Completion/Debian/_dpkg: separate the
	options to _arguments.

2010-09-14  Peter Stephenson  <pws@csr.com>

	* 28259: Src/exec.c, Src/lex.c, Src/parse.c, Src/text.c,
	Src/zsh.h, Test/A04redirect.ztst: Fix bug that empty
	here-documents were given a newline, and output here-documents
	from shell text as real here-documents rather than here-strings.

	* 28258: Src/signals.c: bug in 28250 could cause undefined
	variable resulting in mayhem.

2010-09-13  Peter Stephenson  <pws@csr.com>

	* unposted: NEWS: add POSIX_TRAPS

	* Mikael: 28252: Completion/Zsh/Command/_zle: remove unnecessary
	looped that caused errors.

2010-09-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/builtins.yo: note exit trap runs before
	zshexit hook.

	* 28250: Doc/Zsh/options.yo, Src/options.c, Src/signals.c,
	Src/zsh.h, Test/C03traps.ztst: POSIX_TRAPS option.

	* Mikael: 28253: Doc/Zsh/mod_attr.yo: document -h argument to
	attribute commands.

2010-09-08  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Zle/replace-string-again: safety on
	regexp failures.

	* 28244 with typo noted by Mikael and Bart: NEWS: updated 4.3.11
	news.

	* 28241: Doc/Zsh/zle.yo, Src/Zle/zle_keymap.c: don't list .safe
	keymap with "bindkey -lL", you don't get there from here.

	* 28237: Doc/Zsh/params.yo, Doc/Zsh/zle.yo, Src/Zle/zle_main.c:
	set ZLE_LINE_ABORTED to line so far when ZLE aborts on an error.

2010-09-06  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/zle.yo: small typo.

2010-09-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28226, 28229: Doc/Zsh/zle.yo, Src/Zle/zle_keymap.c: "bindkey
	-lL" now lists aliased keymaps in a more useful way; can list
	individual keymaps.

	* 28227: Doc/Zsh/zle.yo: a few remarks on the question of
	keymaps.

2010-09-02  Peter Stephenson  <pws@csr.com>

	* users/15350: Doc/expn.yo: explain the strange rounding rules for
	size glob qualifier.

2010-09-01  Peter Stephenson  <pws@csr.com>

	* 28188: Doc/Zsh/mod_complist.yo, Doc/Zsh/zle.yo: better
	documentation for limitations in the overlay key maps.

2010-08-31  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28220: Src/exec.c (plus comments), Src/params.c,
	Test/A06assign.ztst: "HELLO=$HELLO shellfunc" failed because
	we removed HELLO from the parameter table to save it.  Copy it
	instead.

	* Mikael: 28202: Src/Zle/complist.c: need line unmetafied for
	reversemenucomplete().

2010-08-23  Peter Stephenson  <pws@csr.com>

	* Mikael: 28190: Doc/Zsh/options.yo: reference to wrong
	manual page.

	* unposted: Completion/Unix/Command/_perforce: update for 2010.1.

2010-08-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28179: Src/jobs.c, Src/signals.c: use WIFCONTINUED() and
	WCONTINUE by exporting child handler to a function.

	* users/15314: Doc/Zsh/expn.yo: redescribe process substitution.

	* users/15301 (bits applying to process substitution with
	redirection): Src/exec.c: make redirection process substitution
	attach to the appropriate process group.

	* users/15300: pass foreground signals on to process
	substitutions in current shell

2010-08-22  Barton E. Schaefer  <schaefer@zsh.org>

	* 28186: Completion/Base/Utility/_multi_parts: replace a single
	(...|...) pattern-match with a loop over the alternatives to
	avoid issues with pattern-quoting each alternative.

2010-08-21  Frank Terbeck  <ft@bewatermyfriend.org>

	* Mikael Magnusson: 28181: Doc/Zsh/mod_zprof.yo: Remove a
	stray `)' that caused a ".RE" string to be output

2010-08-19  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_todo.sh: more commands.

2010-08-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28172: Src/jobs.c: mark processes as not stopped if
	sent SIGCONT.

2010-08-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28167: Src/Zle/compresult.c: reset more variables when
	invalidating completion list.

2010-08-13  Peter Stephenson  <pws@csr.com>

	* 28160 modified as per 28164: Src/Zle/zle_refresh.c: when the
	display was reset we didn't properly mark the old display line
	as invalid.  This could mean the display didn't get redrawn
	properly.

2010-08-11  Peter Stephenson  <pws@csr.com>

	* 28139: based on Frank Terbeck: 28122: Src/Zle/zle_params.c,
	Doc/Zsh/zle.yo: add ZLE_STATE variable.

2010-08-10  Clint Adams  <clint@zsh.org>

	* unposted: Functions/Newuser/zsh-newuser-install: tweak
	newline placement.

2010-08-10  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_todo.sh: need care matching
	initial whitespace; strip priorities to get text to replace.

2010-08-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28137: Functions/MIME/zsh-mime-handler: $argv[0] should be
	$argv[1].

2010-08-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Simon Ruderich: 28136: README: typo.

2010-08-06  Peter Stephenson  <pws@csr.com>

	* 28131: MACHINES: latest status on Cygwin.

	* users/15232: Completion/Unix/Type/_path_files: somehow
	this didn't get completed.

2010-08-05  Peter Stephenson  <pws@csr.com>

	* users/15232: Completion/Unix/Type/_path_files: another
	go at fixing up for bizarre quoting rules, c.f. users/15031.

2010-08-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Holger Macht: 28130: Completion/Unix/Command/_osc: new
	completion.

2010-08-02  Frank Terbeck  <ft@bewatermyfriend.org>

	* Seth House: 28115: Misc/vcs_info-examples: Another git example
	hook.

	* Seth House: 28114:
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git: Fix revision
	lookup with packed repositories.

2010-08-02  Peter Stephenson  <pws@csr.com>

	* Daiki Ueno: 28112: Src/Zle/zle_refresh.c: missing parentheses
	caused incorrect size for character width.

2010-07-31  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/15219: Src/jobs.c: print exit status if PRINTEXITVALUE
	and terminated by signal.

	* 28111: Src/jobs.c: always print exit status if PRINTEXITVALUE
	is set.

	* users/15217: Src/Zle/zle_main.c: use top-level status
	when redrawing prompt.

2010-07-30  Frank Terbeck  <ft@bewatermyfriend.org>

	* Mikael Magnusson: 28110: Doc/Zsh/compsys.yo: Fix yodl warning.

	* unposted: Fix a date in ChangeLog.

2010-07-29  Peter Stephenson  <pws@csr.com>

	* <hamer@hamer.org.ua>: 28104: Src/Zle/compcore.c: crash
	in obscure completion case due to NULL pointer.

2010-07-28  Peter Stephenson  <pws@csr.com>

	* users/15204: Functions/Zftp/zfinit: check compctl is loaded
	before trying to use it (for ksh emulation).

	* as described in users/15202: Functions/Misc/run-help,
	Functions/Newuser/zsh-newuser-install,
	Functions/Prompts/promptinit, Functions/TCP/tcp_open,
	Functions/Zftp/zfinit, Functions/Zle/down-case-word-match,
	Functions/Zle/forward-word-match,
	Functions/Zle/history-pattern-search,
	Functions/Zle/insert-composed-char, Functions/Zle/kill-word-match,
	Functions/Zle/match-words-by-style,
	Functions/Zle/select-word-style,
	Functions/Zle/transpose-words-match,
	Functions/Zle/up-case-word-match, Functions/Zle/zed-set-file-name:
	Use "autoload -Uz" consistently throughout distributed functions.

2010-07-26  Peter Stephenson  <pws@csr.com>

	* 28102: Src/Zle/computil.c: use lstat() when checking
	ignore-parents.

2010-07-26  Frank Terbeck  <ft@bewatermyfriend.org>

	* 28101: Completion/Unix/Command/_tmux: Fix window completion
	for tmux version 1.3 and newer.

2010-07-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk: update to 4.3.10-dev-2.

2010-07-24  Wayne Davison  <wayned@users.sourceforge.net>

	* 28000: Completion/Unix/Command/_git: make the branch arg for
	"git log" optional.

2010-07-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28096: Functions/Chpwd/chpwd_recent_dirs: don't add
	$OLDPWD.

	* 28081: Doc/Zsh/contrib.yo,
	Functions/Chpwd/chpwd_recent_filehandler: document style
	stuff with cdr, future-proof file reading.

2010-07-19  Peter Stephenson  <pws@csr.com>

	* 28092: Completion/Unix/Command/_getconf: generate missing keys.

2010-07-19  Frank Terbeck  <ft@bewatermyfriend.org>

	* 28093, based on Michel Lespinasse: 28090:
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git: Fix a problem
	with `check-for-changes' and freshly initialised repositories.

	* Seth House: 28084, 28083: Misc/vcs_info-examples: cleanups
	and new examples.

	* 28095: Functions/VCS_Info/Backends/VCS_INFO_get_data_git: Fix
	two hard-coded invocations of the "git" command.

2010-07-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28073: Src/exec.c, Src/init.c, Src/utils.c: allow #!
	scripts to search path if interpreter not found.

2010-07-15  Doug Kearns  <dougkearns@gmail.com>

	* 28078: Completion/Unix/Command/_xmlsoft: update.

	* Michael Hwang: 28075: Completion/Unix/Command/_gpg: add gpg-zip
	completion and other general improvements.

2010-07-13  Peter Stephenson  <pws@csr.com>

	* Jörg Sommer: 28063: Completion/Unix/Command/_rubber: suppress
	warning messages when extracting output.

2010-07-12  Peter Stephenson  <pws@csr.com>

	* 28068: Doc/Zsh/contrib.yo: Texinfo declaration got wrapped
	causing mayhem.

2010-07-12  Frank Terbeck  <ft@bewatermyfriend.org>

	* users/15165: Doc/Zsh/contrib.yo: Fix a warning about a
	missing macro.

2010-07-09  Peter Stephenson  <pws@csr.com>

	* 28065: Doc/Zsh/contrib.yo, Functions/Chpwd/.distfiles,
	Functions/Chpwd/cdr, Functions/Chpwd/_cdr,
	Functions/Chpwd/chpwd_recent_add,
	Functions/Chpwd/chpwd_recent_dirs,
	Functions/Chpwd/chpwd_recent_filehandler, plus Src/zsh.mdd
	(not posted): add cdr function, tools, and documentation.

2010-06-30  Clint Adams  <clint@zsh.org>

	* 27998, 28061, 28062: Functions/Newuser/zsh-newuser-install:
	add recommended zshrc option.

	* 28060: Completion/Unix/Command/_xmlsoft: xmlsoft --nodtdattr
	completion thanks to Vincent Lefevre.

2010-06-23  Doug Kearns  <dougkearns@gmail.com>

	* 28056: Completion/Unix/Command/_lynx: add option descriptions.

2010-06-22  Doug Kearns  <dougkearns@gmail.com>

	* 28055: Completion/Unix/Command/_vim: add some missing options.

2010-06-22  Peter Stephenson  <pws@csr.com>

	* 28047: Src/hist.c: make fc -R/-W more consistently verbose
	and allow fc -R to work if file could be read but permissions
	didn't allow it to be locked (as distinct from failing to lock
	it because something else had locked it).

2010-06-22  Doug Kearns  <dougkearns@gmail.com>

	* 28052: Completion/Unix/Command/_cvs: remove duplicated completion of
	the version subcommand.

	* unposted: INSTALL, README: fix typos.

	* 28051: Completion/Unix/Command/_elinks: update for version 0.12pre5.

2010-06-17  Frank Terbeck  <ft@bewatermyfriend.org>

	* Holger Weiss: 28016, 28017, 28018, 28019:
	Completion/Unix/Command/_git: various fixes and enhancements.

	* Holger Weiss: 28020: Doc/Zsh/compsys.yo: Fix a typo.

	* unposted: Fix a date in ChangeLog.

2010-06-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28042: Doc/Zsh/contrib.yo, Functions/Zle/.distfiles,
	Functions/Zle/transpose-lines: new widget.

2010-06-14  Peter Stephenson  <pws@csr.com>

	* 28038: Index: Completion/Zsh/Command/_zstyle, Doc/Zsh/calsys.yo,
	Functions/Calendar/calendar, Functions/Calendar/calendar_add,
	Functions/Calendar/calendar_parse,
	Functions/Calendar/calendar_scandate: improved handling of
	recurring events in calendar system.

	* unposted: Doc/Zsh/params.yo: extra note on ZSH_EVAL_CONTEXT.

	* 28037: Src/exec.c, Src/math.c, Src/module.c,
	Test/V01zmodload.ztst: improved error messages for autoloading
	math functions and builtins (but not conditions).

	* 28010: configure.ac, Src/compat.c: use getcwd() as fallback
	if zgetcwd() fails.

2010-06-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael: 28027: Doc/Zsh/expn.yo: typo.

2010-06-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 28026: Completion/Zsh/Context/_dynamic_directory_name,
	Doc/Zsh/expn.yo: use "zsh_directory_name c" for completion
	of dynamic directory names.

	* 28025: Doc/Zsh/expn.yo, Src/subst.c, Src/utils.c: (D)
	parameter flag to abbreviate directories.

2010-06-09  Peter Stephenson  <pws@csr.com>

	* Haakon Riiser: 28009: Completion/Unix/Command/_ffmpeg: new.

2010-06-08  Peter Stephenson  <pws@csr.com>

	* 28006: Src/builtin.c, Src/compat.c, Src/init.c: Make zgetcwd()
	fall back to pwd in preference to returning "."; only use "." if
	we're trying to set pwd at that point.

2010-06-08  Doug Kearns  <dougkearns@gmail.com>

	* unposted: Completion/Mandriva/Command/_urpmi: fix typo in parameter
	name.

2010-06-07  Peter Stephenson  <pws@csr.com>

	* Alexey: 27999: Test/V01zmodload.ztst: fix error message.

2010-06-07  Doug Kearns  <dougkearns@gmail.com>

	* Simon Ruderich: 28002: Completion/Unix/Command/_feh: fix bad commit.

2010-06-06  Doug Kearns  <dougkearns@gmail.com>

	* unposted: Completion/BSD/Command/_csup,
	Completion/BSD/Command/_fetch, Completion/BSD/Command/_freebsd-update,
	Completion/BSD/Command/_fstat, Completion/BSD/Command/_pfctl,
	Completion/BSD/Command/_portaudit, Completion/BSD/Command/_portmaster,
	Completion/BSD/Command/_portsnap, Completion/BSD/Command/_powerd,
	Completion/BSD/Command/_procstat, Completion/Darwin/Command/_open,
	Completion/Darwin/Command/_softwareupdate,
	Completion/Debian/Command/_apt-file,
	Completion/Linux/Command/_analyseplugin,
	Completion/Linux/Command/_ethtool, Completion/Linux/Command/_ipset,
	Completion/Linux/Command/_mdadm, Completion/Linux/Command/_rpmbuild,
	Completion/Linux/Command/_strace,
	Completion/Mandriva/Command/_rebootin, Completion/Redhat/Command/_yum,
	Completion/Solaris/Command/_coreadm,
	Completion/Solaris/Command/_dhcpinfo,
	Completion/Solaris/Command/_dladm, Completion/Solaris/Command/_dumpadm,
	Completion/Solaris/Command/_gcore, Completion/Solaris/Command/_inetadm,
	Completion/Solaris/Command/_ptree,
	Completion/Solaris/Command/_savecore,
	Completion/Solaris/Command/_svcadm, Completion/Solaris/Command/_svccfg,
	Completion/Solaris/Command/_svcprop, Completion/Solaris/Command/_svcs,
	Completion/Solaris/Command/_zlogin, Completion/Unix/Command/_arp,
	Completion/Unix/Command/_arping, Completion/Unix/Command/_bzr,
	Completion/Unix/Command/_cdcd, Completion/Unix/Command/_ecasound,
	Completion/Unix/Command/_feh, Completion/Unix/Command/_git,
	Completion/Unix/Command/_gnupod, Completion/Unix/Command/_gnutls,
	Completion/Unix/Command/_locate, Completion/Unix/Command/_module,
	Completion/Unix/Command/_perforce, Completion/Unix/Command/_pkgadd,
	Completion/Unix/Command/_pkginfo, Completion/Unix/Command/_pkgrm,
	Completion/Unix/Command/_sisu, Completion/Unix/Command/_sqsh,
	Completion/Unix/Command/_surfraw, Completion/Unix/Command/_tcpdump,
	Completion/Unix/Command/_tmux, Completion/Unix/Command/_todo.sh,
	Completion/Unix/Command/_wget, Completion/Unix/Command/_yafc,
	Completion/Unix/Command/_zfs, Completion/Unix/Command/_zpool,
	Completion/Unix/Type/_printers, Completion/X/Command/_mplayer,
	Completion/X/Command/_setxkbmap, Completion/Zsh/Command/_cd: fix
	incorrectly capitalized completion descriptions as per the
	recommendations in Etc/completion-style-guide.

2010-06-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27983: Src/prompt.c: colours could be output twice.

2010-06-03  Peter Stephenson  <pws@csr.com>

	* 27994: Src/params.c: better error message when failing to
	autoload parameter.

2010-06-03  Frank Terbeck  <ft@bewatermyfriend.org>

	* Holger Weiss: 27977: Completion/Unix/Command/_git: shouldn't
	return 0 if there are no matches.

2010-06-02  Peter Stephenson  <pws@csr.com>

	* 27990: Src/Modules/termcap.c (not in original patch),
	Src/Modules/terminfo.c: ignore error return value from
	setupterm(), it's not useful in telling us whether the module
	booted OK.

2010-06-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Daniel Friesel: 27982: Completion/Unix/Command/_feh: update.

2010-05-31  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael: 27981: Completion/Zsh/Context/_subscript: complete
	(e).

2010-05-28  Peter Stephenson  <pws@csr.com>

	* Mikael: 27980: Completion/Zsh/Type/_globquals: typo.

2010-05-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27965 plus as per 27966: Src/builtin.c, Src/subst.c,
	Src/utils.c, Src/zsh.h: Use $'\n' quoting instead of literal
	newline for ${(q)...} to avoid lines getting split unexpectedly.
	Quote empty strings as ''.

	* 27976: Doc/Zsh/expn.yo: add yet more to the my-brain-hurts
	description of how parameter expansion is ordered.

2010-05-27  Frank Terbeck  <ft@bewatermyfriend.org>

	* Seth House: 27971: Functions/VCS_Info/Backends/VCS_INFO_get_data_hg:
	vcs_info: Fix a bug that caused the mercurial backend to always return
	`default' as the branch name.

2010-05-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/15078: Completion/Zsh/Function/.distfiles,
	Completion/Zsh/Function/_zsh-mime-handler, Doc/Zsh/contrib.yo,
	Functions/MIME/zsh-mime-handler: completion for a
	zsh-mime-handler should understand how the line will be handled.

2010-05-22  Clint Adams  <clint@zsh.org>

	* 27964: Doc/Zsh/contrib.yo: add back missing enditem().

2010-05-14  Frank Terbeck  <ft@bewatermyfriend.org>

	* Simon Ruderich: 27954: Doc/Zsh/contrib.yo, Misc/vcs_info-examples:
	vcs_info: more minor documentation fixes.

	* Simon Ruderich: 27953: Doc/Zsh/contrib.yo, Misc/vcs_info-examples,
	Functions/VCS_Info/VCS_INFO_formats: vcs_info: changed default formats
	and actionformats

2010-05-12  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/params.yo, Src/Modules/zutil.c: fix typo
	("zregesparse-guard").

	* 27951: Doc/Zsh/expn.yo, Doc/Zsh/params.yo, Src/builtin.c,
	Src/exec.c, Src/glob.c, Src/init.c, Src/params.c, Src/signals.c,
	Src/Builtins/sched.c, Src/Modules/zpty.c, Src/Modules/zutil.c:
	Add $ZSH_EVAL_CONTEXT and $zsh_eval_context to provide context
	stack.

2010-05-10  Peter Stephenson  <pws@csr.com>

	* c.f. 27950: Test/C03traps.ztst some bogus whitespace got added
	in patching 27947.

2010-05-10  Frank Terbeck  <ft@bewatermyfriend.org>

	* Seth House, Simon Ruderich and myself: 27948:
	Doc/Zsh/contrib.yo, Functions/VCS_Info/.distfiles, Misc/.distfiles,
	Misc/vcs_info-examples, Functions/VCS_Info/Backends/VCS_INFO_detect_hg,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_hg,
	Functions/VCS_Info/VCS_INFO_formats, Functions/VCS_Info/VCS_INFO_hook,
	Functions/VCS_Info/VCS_INFO_quilt, Functions/VCS_Info/vcs_info: various
	vcs_info changes: mercurial backend improvements, new hooks, quilt
	support, documentation improvements and bugfixes

2010-05-05  Peter Stephenson  <pws@csr.com>

	* users/15031: Completion/Unix/Type/_path_files: fix (still
	incomplete) for bizarre quoting rules for files in completion
	with path-completion off or accept-exact-dirs on.

	* 27947: Src/exec.c, Test/C03traps.ztst: fix some cases where we
	should (probably) execute an EXIT trap but don't.

2010-05-02  Frank Terbeck  <ft@bewatermyfriend.org>

	* Simon Ruderich: 27813: Completion/Unix/Command/_git: Complete
	some generic symbolic references as heads.

2010-04-28  Clint Adams  <clint@zsh.org>

	* Bernd Zeimetz: 27931: Completion/Debian/Command/_bts:
	completion for bts affects.

2010-04-28  Peter Stephenson  <pws@csr.com>

	* Mikael: 27929: Src/lex.c, Doc/Zsh/options.yo (added pws): global
	aliases with space shouldn't trigger HIST_IGNORE_SPACE.

2010-04-27  Peter Stephenson  <pws@csr.com>

	* 27926: Src/Zle/zle_hist.c: fix completion suffix when inserting
	last word.

	* 27911: Completion/Base/Core/_main_complete: ensure colouring is
	not used if not configured when showing old lists.

2010-04-26  Frank Terbeck  <ft@bewatermyfriend.org>

	* 27908: Functions/VCS_Info/vcs_info: Avoid locale related
	problems

2010-04-26  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: update to Perforce
	2009.2 features.

	* unposted: Completion/X/Command/_kfmclient: also kioclient;
	probe desktop bindings.

2010-04-25  Clint Adams  <clint@zsh.org>

	* 27912: Completion/Linux/Command/_lsusb: presume that
	usb.ids is uncompressed now.

	* 27914 (tweaked): Completion/Linux/Command/_lsusb: find
	usb.ids in /usr/share/misc.

2010-04-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/15028 (modified to do the unquoting a bit more
	logically): Completion/Unix/Type/_path_files: for
	path-completion false and accept-exact-dirs true we need to
	unquote the word from the command line.

2010-04-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27889: Src/subst.c, Test/D04parameter.ztst: Force more use of
	GLOB_SUBST in parameters if ~ is used.

2010-04-20  Peter Stephenson  <pws@csr.com>

	* "Akinori MUSHA: 27892: Completion/Redhat/Command/.distfiles,
	Completion/Redhat/Command/_service
	Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_init_d,
	Completion/Unix/Command/_service (moved from Redhat),
	Completion/Unix/Type/_services: updates for FreeBSD.

2010-04-15  Peter Stephenson  <pws@csr.com>

	* unposted: NEWS: update to include path-completion.

2010-04-15  Frank Terbeck  <ft@bewatermyfriend.org>

	* 27798: Alexey I. Froloff: Completion/Unix/Command/_git: support
	for the `--interactive' option of "git commit".

2010-04-14  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/compsys.yo: add kindex entry for
	path-completion.

	* unposted: Doc/Zsh/compsys.yo: slightly rephrase previous doc.

	* users/15011: Completion/Unix/Type/_path_files,
	Doc/Zsh/compsys.yo: add path-completion style to allow
	completion of preceding directories in files to be be turned
	off.

2010-04-13  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Calendar/calendar, Functions/Calendar/calendar_add,
	Functions/Calendar/calendar-edit, Functions/Calendar/calendar_show,
	Functions/Calendar/calendar_sort:  Fall back to link file locking if
	system file locking fails; don't need dcop for kdialog.

2010-04-12  Clint Adams  <clint@zsh.org>

	* 27876: Completion/Debian/Command/_axi-cache: completion for
	axi-cache (from apt-xapian-index).

2010-04-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Simon Ruderich: 27856 (tweaked): Doc/Zsh/metafaq.yo: Git
	availability.

2010-04-09  Peter Stephenson  <pws@csr.com>

	* 27865: Src/subst.c, Test/D04parameter.ztst: text in parameter
	substitution that came from the command line rather than the
	parameter was a candidate for GLOB_SUBST even if it was quoted
	if the overall expression was not quoted.

	* Ben: 27589: Completion/Zsh/Context/_redirect: attempt
	to use arguments better.

2010-03-30  Clint Adams  <clint@zsh.org>

	* 27847: Completion/Unix/Command/_uzbl: completion for uzbl.

2010-03-29  Peter Stephenson  <pws@csr.com>

	* 27843: Simon Ruderich: Doc/Zsh/options.yo: claimed format for
	extended history was incorrect.

2010-03-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27831: Doc/Zsh/expn.yo, Src/input.c, Src/subst.c, Src/utils.c:
	add ${(mm)...} to count displayed characters and rationalise use
	of wcwidth so that negative numbers are treated as zero.

2010-03-25  Peter Stephenson  <pws@csr.com>

	* unposted: Test/A02alias.ztst: change sort to cat to
	make test foolerproof.

	* 27827: Src/input.c, Test/A02alias.ztst: infinite loop
	if alias with recursive definition occurred at end
	of parsed string (normal shell input was OK).

2010-03-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27823: Src/hist.c: 27822 could access freed memory because
	hptr wasn't consistently set to NULL when chline was.

	* 27812: Doc/Zsh/zle.yo, Src/Zle/zle.h, Src/Zle/zle_refresh.c,
	Src/Zle/zle_utils.c: when wchar_t contains Unicode code points,
	use private area to put bytes that don't form characters for
	special display.

2010-03-22  Peter Stephenson  <pws@csr.com>

	* 27822: Src/hist.c, Src/lex.c, Src/zle_params.c,
	Src/zle_tricky.c: Fix ZLE access to current history line if pushed
	onto lexical stack.

2010-03-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Etc/FAQ.yo: update section on coloured prompts and
	some other minor bits.

2010-03-19  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Calendar/calendar: update previous
	change also to perform calendar_show in current shell since
	it interacts better with zle for use with sched.

	* 27808: Completion/Unix/Type/_files: Use // parameter
	substitution instead of :gs.  This form is consistent with the
	rest of the file and has handled quoting correctly for longer.

2010-03-18  Peter Stephenson  <pws@csr.com>

	* unposted: Test/A01grammar.ztst: missed -f option off zsh
	invocation in 27793++.

	* 27804: Src/Zle/zle_hist.c: don't hang on encountering invalid
	character in incremental search.

2010-03-17  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Calendar/calendar: fix embarrassing bug in
	calendar scheduling introduced by new file locking, 27756.

2010-03-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/calsys.yo: age now uses zstat.

	* unposted: NEWS: PATH_SCRIPT

2010-03-16  Peter Stephenson  <pws@csr.com>

	* 27793 plus 27794, 27795: Doc/Zsh/invoke.yo, Doc/Zsh/options.yo,
	Src/init.c, Src/options.c, Src/zsh.h, Test/A01grammar.ztst:
	add PATH_SCRIPT option to find script using path.

2010-03-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael: 27797: Completion/Base/Completer/_expand_alias:
	delimit arguments to avoid problems with hyphens.

	* Alexey: 27789: Completion/Unix/Command/_sudo: use _arguments.

2010-03-15  Peter Stephenson  <pws@csr.com>

	* 27780: Completion/Unix/Type/_files, Test/D04parameter.ztst:
	users/14905 changed the number of backslashes needed to
	quote backslashes in :s modifier.

2010-03-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/expn.yo: note that & needs quoting in :s in
	glob qualifier.

	* 27785: Src/init.c, Src/utils.c, Src/zsh.h: default IFS in sh
	and ksh mode doesn't have '\0'.

2010-03-11  Frank Terbeck  <ft@bewatermyfriend.org>

	* Simon Ruderich: 27779: Functions/VCS_Info/vcs_info_printsys,
	Doc/Zsh/contrib.yo:  Fix mistakes in vcs_info's documentation.

2010-03-09  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/calsys.yo, Functions/Calendar/calendar,
	Functions/Calendar/calendar_editfiles:  Fix bug that
	calendar wouldn't update repeating event times for events
	that were already in the past; allow calendar_editfiles to
	take argument to specify editor.

2010-03-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Michael Hwang: 27773: Src/linklist.c: document how linked
	lists are joined together.

2010-03-04  Frank Terbeck  <ft@bewatermyfriend.org>

	* 27770: Completion/Unix/Command/_git: support for user specific
	sub commands.

2010-03-04  Peter Stephenson  <pws@csr.com>

	* Frank: 27768: Functions/VCS_Info/VCS_INFO_realpath: shut up cd
	some more.

2010-02-28  Clint Adams  <clint@zsh.org>

	* 27762: Completion/Unix/Type/_hosts: omit ssh known_hosts
	entries with port numbers from host completion.

2010-02-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/14905 (modified, see users/14096): Doc/Zsh/expn.yo,
	Src/subst.c, Test/D04parameter.ztst: fix various problems
	with :s modifier in parameters.

2010-02-26  Peter Stephenson  <pws@csr.com>

	* users/14902: Src/Modules/datetime.c: another go.

	* users/14900: Src/Modules/datetime.c: ULONG_MAX may be valid
	return value from strtoul().

	* users/14897: Src/Modules/datetime.c: test needed on
	conversion of time_t to struct tm.  Found on 64-bit Linux.

	* 27756: Doc/Zsh/calsys.yo, Functions/Calendar/calendar,
	Functions/Calendar/calendar_add, Functions/Calendar/calendar_edit,
	Functions/Calendar/calendar_sort, Src/Modules/system.c:
	use new file locking in calendar where available and add
	errflag test to loop over fcntl().

	* users/14891: Doc/Zsh/cond.yo: say explicitly that condition
	arguments don't undergo file generation.

2010-02-25  Peter Stephenson  <pws@csr.com>

	* 27755: Doc/Zsh/mod_system.yo, Src/Modules/system.c:
	add "zsystem supports" to test what zsystem supports.

2010-02-24  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27754: NEWS (unposted), Doc/Zsh/mod_system.yo, Src/exec.c,
	Src/utils.c, Src/zsh.h, Src/Modules/system.c: add
	"zsystem flock" subcommand to zsh/system module.

2010-02-22  Peter Stephenson  <pws@csr.com>

	* unposted: Src/utils.c: Add a debug test for trapping bad uses of
	fdtable when closing fd's in zclose().

	* 27721: Src/compat.c [with unnecessary test removed], Src/exec.c,
	Src/system.h, Src/utils.c:  update zopenmax() not to examine huge
	numbers of file descriptors; only call it at initialisation;
	rationalise use of fdtable_size and expansion of fdtable.

2010-02-22  Clint Adams  <clint@zsh.org>

	* 27744: Completion/Debian/Command/_pbuilder: completion for
	pbuilder.

2010-02-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Frank: 27731: Functions/VCS_Info/vcs_info: turn off
	WARN_CREATE_GLOBAL.

2010-02-21  Clint Adams  <clint@zsh.org>

	* Michael Prokop: 27725: Completion/Debian/Command/_apt: apt
	--no-install-recommends.

2010-02-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jonathan Beckman: 27728: Completion/X/Command/_mplayer: quote
	colon after -ss.

2010-02-19  Peter Stephenson  <pws@csr.com>

	* 27722: Src/cond.c, Test/C02cond.zts, Test/V01zmodload.ztst: Error
	reporting for failed conditions was badly handled; one
	piece of code didn't test for a '-' prefix.

	* 27723: Src/builtin.c, Test/D02glob.ztst: eval shouldn't
	modify non-zero return statuses.

2010-02-17  Peter Stephenson  <pws@csr.com>

	* Frank: 27717: Functions/VCS_Info/vcs_info_lastmsg:
	add option terminators for builtins.

2010-12-17  Andrey Borzenkov  <bor@zsh.org>

	* unposted: Doc/Zsh/compsys.yo: typo fix

2010-12-16  Andrey Borzenkov  <bor@zsh.org>

	* 27715: Completion/Unix/Command/_stgit: fixes for new
	version (workaround removed commands); autogenerate list
	of stg subcommands.

2010-02-16  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/.distfiles: new files

	* Frank Terbeck, Seth House: 27712, 22713, 27714: Doc/Zsh/contrib.yo,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_bzr,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_hg,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_p4,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_svk,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_svn,
	Functions/VCS_Info/VCS_INFO_formats,
	Functions/VCS_Info/VCS_INFO_hook, Functions/VCS_Info/vcs_info:
	hooks and Mercurial improvements.

2010-02-15  Peter Stephenson  <pws@csr.com>

	* 27710: Etc/FAQ.yo: update sections on advanced character sets.

	* unposted: Etc/FAQ.yo: correct outrageously old dates in FAQ.

2010-02-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27708: Src/text.c: remove distracting initial semicolons
	in job output.

	* unposted: zero gf_pre_words from 27694.

	* Mikael: Completion/Zsh/Type/_globquals: extend argument
	handling.

	* Frank: 27705: Completion/Unix/Command/_git: notes

2010-02-12  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Zsh/Type/_globquals: add P to list.

2010-02-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/expn.yo: typo in formatting.

2010-02-09  Peter Stephenson  <pws@csr.com>

	* 27694: NEWS, Completion/Zsh/Type/_globquals, Doc/Zsh/expn.yo,
	Src/glob.c, Test/D02glob.ztst: add "P" glob qualifier for
	prepending words.

	* Frank: 27696: Completion/Unix/Command/_tmux: another update

	* Geoff: 27693: Src/exec.c, Src/init.c, Src/params.c, Src/init.c,
	Src/utils.c: rename underscore to avoid name clash.

2010-02-08  Peter Stephenson  <pws@csr.com>

	* unposted: Src/subst.c: comment about what colon in parameter
	substitution might be doing.

	* unposted: Completion/compinit,
	Functions/Calendar/calendar_scandate: add some "typeset -g"s
	to avoid WARN_CREATE_GLOBAL warnings.

	* 27665: Frank: Completion/Unix/Command/_tmux: update.

	* 27658: Completion/Unix/Command/_zip: work around globbing
	problems.

2010-02-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Frank: 27679:
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	better logic.

	* Michael Hwang: 27675: Src/builtin.c: fix crash from error in
	hash builtin.

2010-02-04  Peter Stephenson  <pws@csr.com>

	* 27661: Ben: Doc/Zsh/builtins.yo, Doc/Zsh/options.yo,
	Doc/Zsh/tcpsys.yo: typos in manual references.

2010-02-03  Peter Stephenson  <pws@csr.com>

	* 27648, 267650/1, unposted README change: README,
	Doc/Zsh/builtins.yo, Doc/Zsh/grammar.yo,
	Etc/zsh-development-guide, Src/builtin.c, Src/init.c,
	Src/mkbltnmlst.sh, Src/Builtins/rlimits.mdd: "repeat"
	is not available when starting in emulation mode,
	"ulimit" is; document that "sched", "limit", "unlimit"
	already aren't.

2010-02-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael: 27647: Completion/Unix/Command/_cp: update

2010-02-02  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/contrib.yo: minor doc upgrade for
	regexp-replace.

	* based on Andrei, 27644: Config/installfns.zsh: check for
	#! line without a fork.

2010-02-01  Peter Stephenson  <pws@csr.com>

	* unposted: Etc/FAQ.yo: update with notes on
	zsh-nt.sourceforge.net and application terminal mode horror.

2010-01-31  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael: 27642: Completion/Zsh/Type/_globquals: add some
	missing entries.

2010-01-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/14752: Functions/Misc/zed, Src/builtin.c: add #!
	line to zed; allow script run with -i to exit on "return".

	* Julien Jehannet: users/14751: Functions/Misc/zed: variable
	incorrect when autoloading function.

2010-01-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27638, based on Frank Terbeck, 27633: Doc/Zsh/options.yo,
	init.c, options.c, zsh.h: add SOURCE_TRACE option with output
	similar to XTRACE for tracing sourced files.

2010-01-23  Clint Adams  <clint@zsh.org>

	* 27617: Completion/Unix/Command/_graphicsmagick: graphicsmagick
	completion based on _imagemagick.

2010-01-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/14732: Src/Zle/computil.c: we need to test X:/ rather
	than X: for recent versions of Cygwin.

2010-01-21  Peter Stephenson  <pws@csr.com>

	* users/14723: Src/pattern.c: invalid character conversions
	should never match valid character conversions.

2010-01-20  Peter Stephenson  <pws@csr.com>

	* 27611: Src/math.c, Test/C01arith.ztst: cache parameter values so
	that subscripts aren't multiply evaluated when they shouldn't be.

	* 27608: Src/Modules/pcre.c, Src/Modules/regex.c,
	Test/C02cond.ztst:  test was broken and sizes of variables
	for arrays were wrong.

2010-01-19  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/contrib.yo, Functions/Misc/regexp-replace:
	return status 1 if no replacement.

	* unposted: Doc/Zsh/cond.yo: avoid Yodl error.

	* Frank: 27606: Completion/Unix/Command/_tmux: tmux -d.

2010-01-18  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/contrib.yo: minor clarification in 27604.

	* 27604: Doc/Zsh/contrib.yo, Functions/Misc/.distfiles,
	Functions/Misc/regexp-replace,
	Functions/Misc/replace-string-again: add facilities for
	substitution using regular expressions.

2010-01-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27600: Doc/Zsh/cond.yo, Src/Modules/pcre.c, Src/Modules/regex.c,
	Test/C02cond.ztst: extend =~ syntax to set MBEGIN and MEND
	with MATCH and mbegin and mend with match.

2010-01-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Frank: 27599: Doc/Zsh/contrib.yo: fix formatting documentation
	for VCS_Info.

2010-01-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael: 27597: Completion/Zsh/Command/_zstyle: accepting
	completion unnecessarily hard.

2010-01-13  Peter Stephenson  <pws@csr.com>

	* Joakim Rosqvist: 27591 as modified in 27594:
	FEATURES, Doc/Zsh/options.yo, Doc/Zsh/params.yo, Src/input.c,
	Src/options.c, Src/params.c: extend SUN_KEYBOARD_HACK option
	to KEYBOARD_HACK variable.

2010-01-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27553: Jesse Weinstein: Doc/Zsh/compsys.yo: improve phrasing.

2010-01-10  Clint Adams  <clint@zsh.org>

	* Frank Terbeck: 27586: Completion/Unix/Command/_tmux:
	more tmux completion support.

2010-01-08  Peter Stephenson  <pws@csr.com>

	* 27577: sergio: Functions/Misc/zcalc: vared -p obeys
	the PROMPTPERCENT option so it's not necessary to have an
	explicit (%) in the variable expansion.

2010-01-07  Clint Adams  <clint@zsh.org>

	* 27579: Completion/Unix/Command/_ssh: allow ssh -S argument to
	follow immediately the option letter.

	* 27578: Completion/Linux/Command/_ionice: allow ionice -c and -n
	arguments to immediately follow the option letters.

2010-01-05  Peter Stephenson  <pws@csr.com>

	* 27566: Src/Builtins/rlimits.c: add ulimit -c hard and immediate
	return on argument error

	* 27565: Src/Builtins/rlimits.c: ulimit didn't sanity check
	numeric arguments.

2010-01-04  Clint Adams  <clint@zsh.org>

	* 27559: Completion/Unix/Command/_espeak: espeak language
	codes and voice names.

	* Jesse Weinstein: 27558: Completion/Unix/Command/_espeak:
	completion for espeak.

2010-01-04  Peter Stephenson  <pws@csr.com>

	* 27556: Src/lex.c: lexsave() should sanitize more variables else
	inner loops can get confused by outer state.  Symptom was
	source within precmd.

2009-12-28  Clint Adams  <clint@zsh.org>

	* Chris Lamb: 27545: Completion/Unix/Command/_django:
	runserver_plus and files completion for django.

2009-12-18  Wayne Davison  <wayned@users.sourceforge.net>

	* users/14659: Src/hist.c: Add symlink-based hist-file locking.

2009-12-17  Peter Stephenson  <pws@csr.com>

	* Greg: 27529: Completion/Unix/Command/_subversion: make URL
	schemas (schemata?) configurable.

2009-12-16  Wayne Davison  <wayned@users.sourceforge.net>

	* 26735+unposted: Src/utils.c, Src/Modules/zftp.c, Src/Modules/zpty.c,
	Src/Zle/zle_main.c, Src/exec.c, Src/init.c, Src/input.c, Src/jobs.c,
	Src/parse.c:  Check the return value of all pipe(), read(), and
	write() calls.  Gets rid of all "ignoring return value" compiler
	warnings, and makes some read/write operations safer by ensuring
	that an EINTR is handled.

2009-12-16  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Misc/run-help-p4, Functions/Misc/.distfiles:
	new helper.

	* 27492 based on Jörg Sommer: 27473: Functions/Misc/run-help:
	fix alias problem.

2009-12-14  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27518: Completion/Unix/Command/_configure: suggest some
	more patterns for arguments.

2009-12-14  Andrey Borzenkov  <bor@zsh.org>

	* unposted: Completion/Unix/Command/_grep:
	add --exclude-dir option

2009-12-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Alexey I. Froloff: 27470: Completion/Unix/Command/_git:
	update.

2009-12-13  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync: Fixed the
	--human-readable options and arg-acceptance of -f.

2009-12-12  Clint Adams  <clint@zsh.org>

	* Michael Prokop: 27504: Completion/Debian/Command/_dput:
	fix typo with dput --delayed.

2009-12-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27503: Src/utils.c: fix crash when changing a hook
	function inside a hook function of the same type.

2009-12-10  Clint Adams  <clint@zsh.org>

	* 27494: Completion/Debian/Command/_bug: reportbug --paranoid,
	--no-paranoid, --body, and --body-file.

2009-12-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27479: Src/Zle/zle_tricky.c: prevent completions
	split across backlash-newline continuations from
	causing mayhem.

2009-12-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27466: Doc/Zsh/zle.yo: document 27453.

	* Mikael: 27453: Src/Zle/zle_refresh.c: highlighting
	of removable completions suffixes.

	* Frank: 27450: b/Completion/Unix/Command/_tmux: another
	update.

2009-12-05  Clint Adams  <clint@zsh.org>

	* Frank Terbeck: 27458: Completion/Unix/Command/_tmux:
	set-option -w completion.

	* Ingmar Vanhassel: 27457: Completion/Zsh/Command/_precommand:
	add hilite as a precommand.

	* Ingmar Vanhassel: 27456: Completion/Unix/Type/_tar_archive:
	complete .tar.lzma, .tbz, .txz.

2009-12-03  Clint Adams  <clint@zsh.org>

	* 27448: Completion/Unix/Command/_tar,
	Completion/Unix/Type/_tar_archive: mild understanding of
	xz-compressed tarballs.

2009-12-02  Peter Stephenson  <pws@csr.com>

	* 27447: Doc/Zsh/options.yo: document 27442.

	* Frank: 27446: Completion/Unix/Command/_tmux: update.

	* 27442 plus tweak: Src/exec.c, Src/init.c, Src/jobs.c,
	Src/signals.c: return status for last background job from
	wait even if it's already exited, but only if POSIX_JOBS
	is set.

2009-12-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Alexey: 27445: Completion/Unix/Command/_ruby: argument can be
	any file.

2009-11-30  Peter Stephenson  <pws@csr.com>

	* 27442: Src/exec.c, Src/init.c, Src/job.s,c Src/signals.c:
	add lastpid_status to record status of last background job
	even after it's exited.

	* 27441: Doc/Zsh/mod_complist.yo, Src/Zle/complist.c: add "sa"
	highlight code for suffix aliases.

	* Richard Hartmann: 27440: Src/Modules/cap.c, Src/Modules/zftp.c:
	typos in warnings.

2009-11-24  Peter Stephenson  <pws@csr.com>

	* Baptiste Daroussin: 27431: Completion/Unix/Command/_make: Fix
	for FreeBSD.

	* 27430: Completion/Unix/Command/_make: extend variable value
	completion to anything that looks like an assignment.

	* 27429:  Completion/Unix/Command/_make: restore variable value
	completion.  Also make indentation more standard (not posted).

	* Michael Hwang <michael.a.hwang@gmail.com>: 27428:
	Completion/Unix/Command/_make:  complete rewrite with
	variable completion.

2009-11-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Alexey. I Froloff: users/14588:
	Completion/Zsh/Command/.distfiles,
	Completion/Zsh/Command/_ztodo,
	Functions/Misc/.distfiles, Functions/Misc/ztodo: new ztodo
	function.

2009-11-20  Clint Adams  <clint@zsh.org>

	* 27417: Completion/Unix/Command/_gpg: fix completion after
	gpg --verify-files.

	* unposted: Functions/Prompts/prompt_clint_setup: change bracket
	colors default to yellow when in an ssh session.

2009-11-19  Peter Stephenson  <pws@csr.com>

	* Greg: 27416: Completion/Unix/Command/_subversion: repository
	path enhancement.

2009-11-17  Barton E. Schaefer  <schaefer@zsh.org>

	* 27415: Src/Zle/computil.c: comparguments "*::..." descriptions
	could step on sequentially earlier descriptions when completing
	for a word other than the last word on the command line.

2009-11-17  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: improve
	whole-path completion so that it doesn't take ages looking
	for clients after typing two slashes.

2009-11-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Greg Klanderman: 27409: Completion/Unix/Command/_subversion,
	Completion/Unix/Type/_urls: improve subversion remote paths
	and fix minor URL issues.

	* Frank Terbeck: 27407: Completion/Unix/Command/_tmux:
	switch-client subcommand.

	* Benjamin R. Haskell: users/14565, 27399:
	Completion/Unix/Command/_env: argument problem.

2009-11-11  Barton E. Schaefer  <schaefer@zsh.org>

	* Greg Klanderman: 27391: Completion/Unix/Command/_rm:
	 fix ignored (duplicate) file names

	* users/14548: Src/Modules/termcap.c: prevent libtermcap from
	exiting on an unknown terminal type

	* Alexey Froloff: 27367: Completion/Unix/Command/_ri: update
	for Ruby 1.9 and later

	* Frank Terbeck: 27364: Completion/Unix/Command/_tmux: fix
	cut'n'paste error in descriptions

2009-11-10  Barton E. Schaefer  <schaefer@zsh.org>

	* 27368, 27369: FEATURES: replace one incorrect example with two
	correct ones

2009-11-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael: 27362: Src/Modules/attr.c: some more fixes.

2009-11-07  Clint Adams  <clint@zsh.org>

	* Frank Terbeck: 27359: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_tmux: completion for tmux 1.1.

2009-11-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27358: Src/builtin.c: error if $0 was altered within
	a sourced file.

	* 27357: Src/Modules/attr.c: fix compiler warnings

2009-11-06  Peter Stephenson  <pws@csr.com>

	* Frank Terbeck: 27353: Functions/VCS_Info/VCS_INFO_bydir_detect,
	Functions/VCS_Info/vcs_info: More sanity checks for vcs_info

2009-11-05  Peter Stephenson  <pws@csr.com>

	* Jun T.: 27351: zdelattr missed first argument.

2009-11-04  Peter Stephenson  <pws@csr.com>

	* Mikael: 27347: Completion/Zsh/Command/_zattr,
	Doc/Zsh/mod_attr.yo, Src/Modules/attr.c: enhance the
	extended attribute support.

2009-11-03  Peter Stephenson  <pws@csr.com>

	* Mikael: 27337: Src/utils.c: fix bug with cd checking symlinks
	that could do arbitrarily nasty things when looking for a "/".

2009-10-29  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Calendar/calendar: brief display
	failed on single-line entries.

2009-10-24  Clint Adams  <clint@zsh.org>

	* 27314, 27315: Completion/Unix/Command/_mpc: update for
	mpc 0.17.

	* unposted: update config.guess and config.sub to
	2009-06-10 and 2009-06-11 versions respectively.

2009-10-22  Peter Stephenson  <pws@csr.com>

	* Functions/Zle/history-beginning-search-menu: unposted:
	make more variables local.

	* unposted, c.f. 27313: INSTALL, NEWS, README, Doc/Zsh/contrib.yo,
	Doc/Zsh/manual.yo, Doc/Zsh/metafaq.yo, Etc/CONTRIBUTORS,
	Etc/FAQ.yo, Etc/changelog2html.pl,
	Functions/Zle/history-beginning-search-menu,
	Functions/Zle/insert-composed-char: mailing lists moved
	to zsh.org and website to zsh.sourceforge.net.

2009-10-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael: 27312: Completion/Unix/Command/_valgrind: option
	changes.

	* Jesse Weinstein: 27311: Completion/Unix/Type/_diff_options:
	remove redundant line.

	* Holger Weiss: 27310: Doc/Zsh/compsys.yo: typo.

	* Frank Terbeck: 27309: Doc/Zsh/contrib.yo: improve context
	in VCS_Info docs.

2009-10-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27308, based on 27305 from Edgar Merino:
	Completion/Unix/Command/_init_d, Completion/Unix/Type/_services:
	search for init scripts in other locations.

	* Lionel Flandrin: 27307:
	Functions/VCS_Info/Backends/VCS_INFO_get_data_hg,
	Doc/Zsh/contrib.yo: enhanced VCS_INFO support for Mecurial.

2009-09-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* http://www.opensource.apple.com/source/zsh/zsh-53/patches/utils.c.patch:
	Src/utils.c: fix length of search when spell checking.

	* http://www.opensource.apple.com/source/zsh/zsh-53/patches/PR-6370391.patch:
	Src/jobs.c: fix error message.

2009-09-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T.: 27296: configure.ac: bad preprocessing of Mac OS
	Snow Leopard headers.

2009-09-29  Peter Stephenson  <pws@csr.com>

	* Jun T.: 27292: Src/Modules/socket.c: abuse of UNIX_PATH_MAX on
	Snow Leopard: use the correct maximum.

2009-09-22  Wayne Davison  <wayned@users.sourceforge.net>

	* 27286: Src/Modules/socket.c Src/Modules/tcp.c Src/utils.c:
	Made movefd() return the targetfd on success.  Added a little
	more error checking in the callers of movefd().

2009-09-22  Peter Stephenson  <pws@csr.com>

	* 27284: Src/exec.c, Src/parse.c, Src/utils.c,
	Src/Modules/socket.c, Src/Modules/tcp.c, Src/Modules/zpty.c:
	improve use of movefd() and restore closing of original fd
	on failure pending further work.

2009-09-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27283: Src/exec.c, Src/utils.c: failure to dup fd accessed
	uninitialised memory and closed the original fd regardless.

2009-09-21  Peter Stephenson  <pws@csr.com>

	* users/14411: Src/hashtable.c: only hash stat-able executable
	regular files in the command table.

2009-09-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Darel Henman: users/14412: Doc/Zsh/builtins.yo: fix confusions
	in explanation of getopts option arguments.

	* Holger Weiss: 27281: Doc/Zsh/expn.yo: example of global
	history substitution was wrong.

2009-09-18  Peter Stephenson  <pws@csr.com>

	* Mikael: 27279: Doc/Zsh/builtins.yo, Doc/Zsh/mod_zselect.yo:
	minor tweaks.

2009-09-16  Peter Stephenson  <pws@csr.com>

	* Baptiste Daroussin: 27277: Completion/BSD/Command/_csup: Improve
	csup completion.

2009-09-15  Peter Stephenson  <pws@csr.com>

	* users/14387 (tweaked): Doc/Zsh/grammar.yo: alternative syntax is
	not about to disappear, but does make shell scripts less portable
	and possibly readable.

2009-09-14  Peter Stephenson  <pws@csr.com>

	* Greg Klanderman: 27262: Completion/Unix/Type/_path_files:
	prefixes were incorrect with accept-exact-dirs style.

2009-09-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Baptiste Daroussin: 27271: Functions/Zftp/zfanon: remove awk
	dependence.

	* Baptiste Daroussin: 27270: Functions/Zftp/zfcd_match: remove
	awk dependence.

2009-09-11  Peter Stephenson  <pws@csr.com>

	* Baptiste Daroussin: 27268: Functions/MIME/pick-web-browser:
	remove Perl dependency.

	* Baptiste Daroussin: 27267 plus 27269 plus doc:
	Functions/Zftp/zfrtime, Doc/Zsh/zftpsys.yo: remove perl
	dependency.

2009-09-10  Peter Stephenson  <pws@csr.com>

	* Greg Klanderman: 27259 / 27260:
	Completion/Unix/Type/_path_files: make unset parameters in
	file prefix not be treated as empty.

2009-09-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Greg Klanderman: 27255: Doc/Zsh/builtins.yo,
	Doc/Zsh/compctl.yo, Doc/Zsh/compsys.yo, Doc/Zsh/contrib.yo:
	some consistency fixes.

2009-09-07  Peter Stephenson  <pws@csr.com>

	* 27236 (somewhat late): configure.ac: use $CPPFLAGS
	after all occurrences of $CPP and see what happens.

2009-09-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Holger Weiss <holger@CIS.FU-Berlin.DE>: 27248:
	Src/Zle/zle_hist.c: anchoring of vi search was wrong because
	of reversed prefix matching.

	* 27247: Functions/Misc/zmv: checking for "**/" was wrong.

2009-09-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Daniel Friesel <derf@tabularazor.org>: 27244:
	Completion/Unix/Command/_feh, Completion/Unix/Command/.distfils:
	new completion.

	* 27243: Src/params.c, Test/D04parameter.ztst: reverse
	indexing in array parameters with a beginning index out of range
	returned the wrong value.

2009-09-02  Peter Stephenson  <pws@csr.com>

	* 27240: Src/builtin.c: 27079 caused later use of tokstr and tok
	to be invalid.

2009-08-28  Peter Stephenson  <pws@csr.com>

	* 27233: Completion/Base/Utility/_values,
	Completion/Unix/Command/_mount: improve _values handling of
	optional arguments so that list separate removes the argument
	separator; use this to make "mount -o loop" complete better.

2009-08-21  Peter Stephenson  <pws@csr.com>

	* 27228: Functions/Newuser/zsh-newuser-install: add a clear
	function if the command doesn't exist.

2009-08-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27219: Completion/Unix/Type/_files: "_files -F <array>" wasnʼt
	correctly handled, which broke duplicate filtering in _rm.

	* 27218: Src/Zle/computil.c: don't unquote command line
	to generate "line" in _arguments since the caller can't
	tell what was there before.

2009-08-17  Peter Stephenson  <pws@csr.com>

	* 27217: Functions/Newuser/zsh-newuser-install: fix typo
	in assignment.

2009-08-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27216: Src/hist.c: set chwords to NULL when freed.

2009-08-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/14307: Src/Zle/zle_tricky.c: end of current command in
	completion wasn't properly found when using variant zsh loop
	or test syntax.

2009-08-07  Peter Stephenson  <pws@csr.com>

	* Andrew Psaltis: 27212: Completion/Linux/Command/_pkgtool:
	Slackware supports extra tar formats.

2009-08-05  Peter Stephenson  <pws@csr.com>

	* 27211: Src/Zle/computil.c: Extend exact completion within
	compfiles -p/-P to treat drives and device files specially under
	Cygwin.

2009-08-05  Clint Adams  <clint@zsh.org>

	* 27209: Completion/Unix/Type_path_files: fix breakage from
	27208.

	* Mikael Magnusson: 27204: Completion/Unix/Command/_patch:
	remove stray curly brace.

	* 27208: Completion/Unix/Type_path_files: try to do the
	right thing when applying file-sort to extant glob qualifiers.

2009-08-01  Clint Adams  <clint@zsh.org>

	* 27203: Completion/Debian/Command/_aptitude: treat
	aptitude build-depends just as aptitude build-dep.

	* 27202: Src/system.h: unbreak _GNU_SOURCE on Debian
	GNU/kFreeBSD.

2009-07-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/14267: Completion/Base/Core/_description: files added
	for the ignore-line style need to be quoted to be treated
	literally.

2009-07-24  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27188: Doc/Zsh/builtins.yo, Src/builtin.c, Test/B04read.ztst,
	Test/D07multibyte.ztst: Make read -q use the same code as read
	-k, hence enabling support for -t with terminals, -p and -u.

2009-07-21  Peter Stephenson  <pws@csr.com>

	* 27181: Doc/Zsh/options.yo, Src/builtin.c: extend POSIX_CD to
	handle target directory printing behaviour.

2009-07-20  Peter Stephenson  <pws@csr.com>

	* 27178, 27180: Etc/FAQ.yo: as pointed out by Mikael, quoting
	function names to stop alias expansion is always(ish) safe.

2009-07-19  Barton E. Schaefer  <schaefer@zsh.org>

	* 27169: Src/jobs.c, Src/signals.c: 23067 went too far in opening
	up the signal mask when waiting for jobs; an interrupt from the
	terminal should not terminate the shell until the foreground job
	has a chance to exit or to choose not to do so.

2009-07-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27167: Src/builtin.c, Src/options.c, Src/zsh.h,
	Doc/Zsh/builtins.yo, Doc/Zsh/options.yo: POSIX_CD option,
	currently only moves testing of "." to after testing of CDPATH.

2009-07-18  Clint Adams  <clint@zsh.org>

	* 27160: Completion/Debian/Command/_bug: tweaks to reportbug
	completion, thanks to Vincent Lefevre.

	* 27128: Completion/Unix/Type/_tex: complete tex files for
	latexmk.

2009-07-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/14240: Src/parse.c: assignment before a function
	definition should be an error, in common with other complex
	functions and as documented.

2009-07-14  Eric Blake  <ebb9@byu.net>

	* Eric Blake: 27151: Src/builtin.c: Fix // handling in cd for
	cygwin.

2009-07-14  Peter Stephenson  <pws@csr.com>

	* Andy Spencer: 27148: Completion/Linux/Command/_modutils:
	ignore build as well as source directories when searching
	recursively for modules.

2009-07-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27135: Doc/Zsh/options.yo, Src/exec.c, Src/jobs.c: expand
	POSIX_JOBS option to leave MONITOR on in subshell and not to
	report the parent shell's jobs.

	* 27134: Src/exec.c, Src/init.c: improve 27131 by setting
	FD_CLOEXEC for SHTTY or closing it by hand when executing.

2009-07-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27131: Src/exec.c, Src/jobs.c: tentative attempt to
	allow MONITOR option to be set in a subshell by not
	closing SHTTY.

	* 27129: Src/exec.c, Src/init.c, Src/zsh.h,
	Test/A01grammar.ztst, Test/C04funcdef.ztst,
	Test/D08cmdsubst.ztst: fix 27126 so as not to break the
	case where a status is tested at the start of a function,
	command substitution, or "." file.

2009-07-10  Clint Adams  <clint@zsh.org>

	* 27127: Vincent Bernat: Completion/Debian/Command/_bts: handle
	bts fixed and bts notfixed.

2009-07-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27126: Src/exec.c, Src/init.c, Test/A01grammar.ztst,
	Test/C04funcdef.ztst, Test/D08cmdsubst.ztst: a few more
	contexts where empty lists should give status zero.

	* 27125: Src/prompt.c: handle nested use of colour code buffer
	allocation.

2009-07-10  Peter Stephenson  <pws@csr.com>

	* 27122: Doc/Zsh/options.yo, Src/jobs.c, Src/options.c, Src/zsh.h:
	add POSIX_JOBS option to print only job text for bg and fg.

	* 27106: Src/exec.c, Src/signals.c, Src/zsh.h,
	Test/A01grammar.ztst: on a command line that had text that
	expanded to nothing reset the status (unless it should come
	from a command substitution).

	* 27119: Src/jobs.c: correct 27112: output is to stdout, not
	stderr, and there's no automated jobs notification if not
	INTERACTIVE.

2009-07-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27112: Src/jobs.c: allow output to stderr if MONITOR but
	not INTERACTIVE.

2009-07-09  Eric Blake  <ebb9@byu.net>

	* 27109: Touch up non-interactive MONITOR handling.
	Don't mess with tty when MONITOR but not interactive.

2009-07-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27110: Src/init.c: Only turn on MONITOR if INTERACTIVE is on
	or if set explicitly.

2009-07-08  Peter Stephenson  <pws@csr.com>

	* 27100: Allow MONITOR option in non-interactive shells.
	Not properly test it, but you only get if you ask for it,
	so worth committing to allow it to be further investigated.

2009-07-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27092: Src/parse.c, Test/A01grammar.ztst: "if" didn't check
	for missing clauses so a missing then-clause wasn't spotted
	as an error.

2009-07-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Brendan Cully: 27088: Completion/Unix/Command/_hg,
	Completion/Unix/Command/.distfiles: new Mercurial completion.

2009-07-02  Peter Stephenson  <pws@csr.com>

	* 27087: Doc/Zsh/builtins.yo, Src/builtin.c, Src/zsh.h,
	Test/A01grammar.ztst:  change return codes from 27083 to
	126, 127.

	* Nicolas Pouillard: 27028: Completion/Unix/Command/_darcs: New
	darcs completion; it's a lot shorter but apparently that's OK.

2009-07-01  Peter Stephenson  <pws@csr.com>

	* 27085: Doc/Zsh/mod_complist.yo, Src/Zle/complist.c:
	in scrollist keymap allow accept-search to exit but do nothing
	else.

	* 27083: Doc/Zsh/builtins.yo, Src/builtin.c, Src/init.c,
	Src/zsh.h, Src/Modules/newuser.c, Test/A01grammar.ztst:  "."
	returns status 128 on execution failure, 129 on failure to find
	file.

	* 27080: Doc/Zsh/mod_complist.yo, Src/Zle/complist.c: it
	wasn't possible to exit menu selection cleanly.

2009-07-01  Peter Stephenson  <pws@csr.com>

	* 27079: Src/builtin.c: test builtin uses parser and so should
	save and restore the lexical context to avoid pulling the
	rug out when called in some nested fashion.

2009-06-28  Andrey Borzenkov  <bor@zsh.org>

	* unposted: Completion/Unix/Command/_man:
	support lzma compression of man pages used in Mandriva

2009-06-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27061: Nicolas Lalevée: Completion/Unix/Command/_ant:
	importing files into ant.

2009-06-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Greg Klanderman: 27057: Src/utils.c: %e and %f time formats
	were swapped.

	* Frank Terbeck: users/14207:
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git: make
	variable local.

2009-06-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Frank Terbeck: 27049, 27050, 27051, 27052:
	Functions/VCS_Info/VCS_INFO_bydir_detect,
	Functions/VCS_Info/Backends/VCS_INFO_detect_hg,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_hg: VCS_INFO
	improvements.

2009-06-18  Clint Adams  <clint@zsh.org>

	* 27048: Functions/MIME/zsh-mime-setup: avoid multiline prints
	which break CSH_JUNKIE_QUOTES.

2009-06-05  Peter Stephenson  <pws@csr.com>

	* 27305: Functions/Misc/run-help: use POSIXLY_CORRECT with man
	to avoid GNU man grabbing options in the argument list.

	* 27304: Doc/Zsh/expn.yo, Src/subst.c, Src/utils.c, Src/zsh.h,
	Test/D04parameter.ztst:  add ${(q-)...} flag to do minimal
	quoting of arguments with no unnecessary single quotes.

2009-06-04  Peter Stephenson  <pws@csr.com>

	* Baptiste Daroussin: 27033: Completion/BSD/Command/_portaudit,
	Completion/Unix/Command/_mount: more FreeBSD changes.

	* Baptiste Daroussin: 27030: Completion/Unix/Type/_file_systems:
	update for FreeBSD.

	*  Baptiste Daroussin: 27029: Completion/BSD/Command/_pfctl: new
	completion.

2009-06-02  Clint Adams  <clint@zsh.org>

	* Colin Watson: 27027: Completion/Unix/Command/_bzr:
	completion for bzr switch.

2009-06-02  Peter Stephenson  <pws@csr.com>

	* Akinori MUSHA: private communication:
	Completion/Unix/Command/_subversion: fix typo.

	* Config/version.mk: update version recorded in archive
	to 4.3.10-dev-1 (not released).

2009-06-01  Wayne Davison  <wayned@users.sourceforge.net>

	* Util/mkdisttree.sh, Util/preconfig: Tweak find to prune a .git dir.
	This allows a .git/cvs dir to exist with a cvs checkout in it.

2009-06-01  Peter Stephenson  <pws@csr.com>

	* Config/version.mk: release 4.3.10.

2009-05-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jesse W: 27024: configure.ac, Doc/Makefile.in: allow
	overriding TEXI2HTML.

2009-05-30  Clint Adams  <clint@zsh.org>

	* 27025: Src/system.h: define _GNU_SOURCE on the Hurd.

2009-05-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 27021: Src/pattern.c: length of variable saving globflags
	was wrong causing restored value to be wrong in pattern matching
	on big-endian 64-bit systems.

2009-05-28  Peter Stephenson  <pws@csr.com>

	* Jun T.: 27010: Completion/Unix/Command/_date: Darwin.

2009-05-26  Peter Stephenson  <pws@csr.com>

	* 26998: configure.ac, Config/defs.mk.in: use --htmldir passed
	to configure:  restore zsh default if unchanged from current
	configure default of '${docdir}'.

2009-05-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Ingmar Vanhassel: 26990: Doc/Makefile.in: tidy up all html
	files created by updated naming scheme.

2009-05-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Michael Hwang: 26986: Doc/Zsh/compsys.yo: formatting.

2009-05-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26978: Julien Langer: Completion/Unix/Command/_stgit: complete
	patch names.

2009-05-22  Peter Stephenson  <pws@csr.com>

	* 26982: Julien Langer: Doc/Zsh/contrib.yo,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git: support stgit

	* 26970: Greg Klanderman: Completion/Unix/Command/_subversion: fix
	caching.

2009-05-22  Clint Adams  <clint@zsh.org>

	* 26939: Completion/Unix/Command/_xmms2: clean up xmms2 jump
	completion.

	* Patrick Schoenfeld: 26977: Completion/Unix/Command/_perl:
	complete .t files for perl.

2009-05-20  Peter Stephenson  <pws@csr.com>

	* 26975: Src/builtin.c: compilation issues in bin_print().

	* users/14143 plus extra fix in padding code: Doc/Zsh/params.yo,
	Src/subst.c, Src/utils.c: use default IFS if IFS is unset.

2009-05-19  Peter Stephenson  <pws@csr.com>

	* 26973: Doc/Zsh/contrib.yo, Functions/Misc/zmathfuncdef: make
	zmathfuncdef replace functions and list existing functions.

	* Config/version.mk: 4.3.9-dev-5 (4.3.9-dev-4 not recorded).

	* Greg Klanderman: 26972: Src/utils.c: fix problem ni 26964.

2009-05-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Greg Klanderman: 26964 (modified): Src/utils.c,
	Doc/zsh/options.yo, Doc/Zsh/params.yo:  make prompt
	end-of-line configurable with PROMPT_EOL_MARK.

	* Greg Klanderman: 26963: fix suffix handling for svn completion

2009-05-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Paul Ackersviller: 26962: configure.ac, aczsh.m4,
	Src/module.c, MACHINES, INSTALL: updated HP-UX dynamic linking.

2009-05-13  Peter Stephenson  <pws@csr.com>

	* users/14118: Functions/Prompts/prompt_special_chars: fix test
	and assignment.

	* Paul Ackersviller: 26959: Test/Makefile.in: need a delay before
	removing modules after testing on HP-UX.

2009-05-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26958: Src/prompt.c: Reallocation of prompt line didn't
	fix the pointer to the start of the current line.

2009-05-12  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Prompts/prompt_bart_setup: fix a warning
	with WARN_CREATE_GLOBAL.

	* Src/builtin.c: fix some memory usage issues.

2009-05-11  Peter Stephenson  <pws@csr.com>

	* 26956: Etc/zsh-development-guide, Src/Zle/zle_refresh:
	clear up region highlight variables properly and note that the
	variables should be zeroed even if the module is being unloaded
	(problem on HP-UX).

2009-05-09  Andrey Borzenkov  <bor@zsh.org>

	* unposted: Completion/Unix/Command/_getfacl:
	fix options definition; add file names completion for variant=unix

2009-05-08  Peter Stephenson  <pws@csr.com>

	* 26953: Test/D07multibyte.ztst: print warning but don't fail test
	if system apparently can't do simple character set conversion.

	* 26950: Src/params.c: warn on failed attempt to change real or
	effective group or user ID.

	* 26949: Completion/Unix/Command/_sudo: new options and sudoedit.

	* 26948: Src/Zle/zle_refresh.c: ensure recorded window sizes
	are reset when video data is freed.

2009-05-07  Peter Stephenson  <pws@csr.com>

	* 26945: Src/builtin.c, Test/D07multibyte.ztst: read should
	pass through invalid multibyte characters.

2009-05-06  Clint Adams  <clint@zsh.org>

	* 26937: Completion/Unix/Command/_git: have `git log` complete
	files after branch/range.

2009-05-05  Peter Stephenson  <pws@csr.com>

	* martin f. krafft: 26922: Completion/Unix/Command/_xmms2: extend
	xmms2 completion.

2009-04-30  Barton E. Schaefer  <schaefer@zsh.org>

	* users/14076 (tweaked per 26906): Completion/Unix/Command/_ssh:
	Add -q or -r: options to some compadd argument lists to properly
	handle suffix removal when completing ssh option names or remote
	host references in file names.

2009-04-30  Peter Stephenson  <pws@csr.com>

	* c.f. 26895: Test/D07/multibyte.ztst: restrict the sorting test
	to western European characters.

2009-04-29  Peter Stephenson  <pws@csr.com>

	* 26900: Benjamin R. Haskell: Completion/Unix/Command/_ssh: ssh -Y,
	-x and -X are mutually exclusive.

	* 26899: Ingmar Vanhassel: Completion/Unix/Command/_ssh: -Y option

	* 26898: Ingmar Vanhassel: configure.ac: don't link
	libbind unless really needed.

2009-04-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Paul Ackersviller: 26883: Test/D07multibyte.ztst: naming of
	UTF8 locales is different in HPUX.

2009-04-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted, see 26880: Functions/Misc/run-help: back off 26862.

2009-04-24  Peter Stephenson  <pws@csr.com>

	* unposted: Config/version.mk: update to 4.3.9-dev-3.

	* uposted: update some .distfiles

	* 26876 (documentation slightly modified): NEWS, Doc/Zsh/compwid.yo,
	Doc/Zsh/params.yo, Src/Zle/compresult.c, Src/Zle/zle.h,
	Src/Zle/zle_misc.c: add ZLE_REMOVE_SUFFIX_CHARS and
	ZLE_SPACE_SUFFIX_CHARS to make actions for suffix removals when
	not controlled by completion system more configurable.

2009-04-23  Clint Adams  <clint@zsh.org>

	* 26877, 26879: Completion/Debian/Command/_apt: handle apt-get
	purge.

2009-04-22  Peter Stephenson  <pws@csr.com>

	* see 26867: Functions/VCS_Info/Backends/VCS_INFO_get_data_svk:
	remove odd "${".

2009-04-21  Peter Stephenson  <pws@csr.com>

	* Greg Klanderman: 26862: Functions/Misc/run-help: remove
	unecessary "print".

	* Greg Klanderman (26861) + 26863:
	Completion/Base/Widget/_read_comp: don't warn over unset
	parameters but typeset -g _read_comp anyway.

	* 26858: Test/A01grammar.ztst: use zsh -fc instead of /bin/sh -c
	for testing exec -l to avoid sensitivity to /etc/profile.

	* 26853 + typo fix: NEWS, README, Etc/CONTRIBUTORS, Etc/FAQ.yo,
	Etc/relnote_4.3.10.txt: package documentation updates.

2009-04-20  Peter Stephenson  <pws@csr.com>

	* Src/Modules/terminfo.mdd: make test agree with the one
	in terminfo.c.

2009-04-20  Clint Adams  <clint@zsh.org>

	* Kalle Olavi Niemitalo: 26850: Completion/Unix/Command/_git:
	fix breakage in git write-tree and git send-pack.

2009-04-18  Andrey Borzenkov  <bor@zsh.org>

	* users/14033 as modified by users/14037 and added doc:
	Completion/Base/Utility/_describe, Doc/Zsh/compsys.yo: allow
	quoting of ":" with backslashes in possible matches in _describe

2009-04-17  Peter Stephenson  <pws@csr.com>

	* users/14041: Doc/Zsh/zle.yo, Src/Zle/zle_bindings.c: bind ":"
	by default to execute-named-cmd in vicmd mode.

	* unposted: Config/version.mk: change version to 4.3.9.dev-2.

	* Jesse W: 26840: Doc/Zsh/manual.yo: texi2html instructions.

2009-04-16  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_mdmadm -> _mdadm

	* 26389: Doc/.cvsignore, Doc/.distfiles, Doc/Makefile.in: add
	--node-files option to texi2html.

	* Alexey I. Froloff: 26830: Completion/Unix/Command/_man: fix
	stripping of manual page suffixes.

	* Evgenii Terechkov: 26831: Completion/Unix/Command/_screen:
	filter out redundant output.

	* Alexey I. Froloff: 26829: Completion/Unix/Command/_rsync:
	miscounting fields in output.

	* Tomasz Pala: users/14031: Completion/Linux/Command/_ipset:
	updates.

	* Tomasz Pala: users/14032: Completion/Linux/Command/_mdmadm,
	Completion/Linux/Command/_rpmbuild: new completions.

	* Tomasz Pala: users/14030: Completion/Linux/Command/_ethtool:
	update.

2009-04-07  Peter Stephenson  <pws@csr.com>

	* Bart: 26822: Completion/Zsh/Context/_subscript: ">" should
	be "-gt"---caused infinite loop looking for nonexistent subscript.

2009-04-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	*  Frank Terbeck <ft@bewatermyfriend.org>:  Functions/VCS_Info/*:
	26816: vcs_info: add revision and "misc" argument to
	VCS_INFO_formats(); 26817: updates for get-revision, %i and %m;
	26818:  Add git's sha1 hash as revision information; 26819: Add
	information about hg's local revision number and the  commit's
	hash; 26820:  Make the hg backend work with new versions of
	mercurial.

2009-04-06  Peter Stephenson  <pws@csr.com>

	* 26806 (doc tweaked): Add CORRECT_IGNORE variable for pattern to
	be ignored by correction from internal hash tables.

2009-04-04  Clint Adams  <clint@zsh.org>

	* Simon Ruderich: 26800: Completion/Unix/Command/_git: fixes for "git add"
	completion.

2009-04-01  Peter Stephenson  <pws@csr.com>

	* 26801: Completion/Base/Core/_main_complete,
	Completion/Unix/Command/_calendar,
	Completion/Zsh/Command/_command,
	Completion/Zsh/Command/_precommand: add completion for calendar
	function; add tracking for precommand modifiers that are
	in effect.

2009-03-26  Peter Stephenson  <pws@csr.com>

	* 26797: Doc/Zsh/options.yo: further minor changes.

	* 26795: Doc/Zsh/options.yo: further warning in POSIX_ALIASES.

2009-03-25  Peter Stephenson  <pws@csr.com>

	* 26783: Doc/Zsh/compsys.yo, Completion/Base/Completer/.distfiles,
	Completion/Base/Completer/_user_expand: new _user_expand completer.

	* Jon Strait: 26778, 26781: Doc/Zsh/mod_pcre.yo,
	Src/Modules/pcre.c:  a couple of extra options for PCRE matching.

	* Michael Hwang: 26776: Src/builtin.c: improved column alignment
	with print -c -P.

2009-03-24  Peter Stephenson  <pws@csr.com>

	* 26774: Src/utils.c: cd to $HOME on failure in preference to /.

	* 26772: Src/glob.c, Src/utils.c, Src/zsh.h, Src/Modules/files.c:
	more failed cd handling: fix possible runaway series of chdirs;
	better error handling.

2009-03-23  Peter Stephenson  <pws@csr.com>

	* 26769: Src/utils.c: 26767 created an even worse problem.

	* 26748: Doc/Zsh/expn.yo, Src/hist.c, Src/subst.c: c modifier
	to add command path.

	* 26767: Src/utils.c: 26763 created file descriptor leak.

2009-03-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26763: Src/utils.c: fix problem restoring directory
	when attempting to cd to relative path and failing.

	* users/13593: Src/utils.c: tidy up from 26625.

2009-03-20  Peter Stephenson  <pws@csr.com>

	* Bart: 26761: Src/hist.c: typo in 26754.

2009-03-19  Peter Stephenson  <pws@csr.com>

	* Mikael: 26759: Src/Modules/curses.mdd: missing here-document
	terminator.

	* 26756: Completion/Zsh/Type/_history_modifiers: handling
	following :s was wrong.

	* 26754: configure.ac, Doc/Zsh/expn.yo, Src/compat.c, Src/hist.c:
	tweak zgetdir() (but don't use it) and test for realpath().

2009-03-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26752: Src/hist.c: fix ../ removal in :a and metafication
	in :a and :A modifiers.

2009-03-18  Peter Stephenson  <pws@csr.com>

	* Frank Terbeck: 26751: Functions/VCS_Info/vcs_info_setsys:
	suppress warning with WARN_CREATE_GLOBAL.

2009-03-17  Peter Stephenson  <pws@csr.com>

	* 26746: Completion/Zsh/Context/_normal,
	Completion/Zsh/Type/_history_modifiers: complete new history
	modifiers a and A and allow completion of history modifiers
	at the start of double quotes.

2009-03-16  Peter Stephenson  <pws@csr.com>

	* 26744: Completion/Zsh/Context/_normal: handle completion
	of history modifiers for normal command line arguments.

2009-03-15  Barton E. Schaefer  <schaefer@zsh.org>

	* users/13937, users/13939: configure.ac, Src/jobs.c: check for
	and if available use setproctitle() for "jobs -Z".

2009-03-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26736: Doc/Zsh/expn.yo: document 26731.

	* Michael Hwang: 26731 (with cosmetic changes): Src/hist.c,
	Src/subst.c: add `a' and `A' modifiers.

2009-03-14  Wayne Davison  <wayned@users.sourceforge.net>

	* 26735: Src/Modules/files.c, Src/Modules/mapfile.c,
	Src/Modules/zftp.c, Src/builtin.c, Src/exec.c,
	Src/hist.c, Src/utils.c: improved return-value checking.

2009-03-14  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/13910: Src/jobs.c: spawnjob() should output job
	information to the tty like printjob() does.

	* 26699: Makefile.in: dependencies for config.modules.

2009-03-14  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Adding .gitignore for the mirrored git repo.

2009-03-13  Peter Stephenson  <pws@csr.com>

	* users/13902: Doc/Zsh/zle.yo, Src/Zle/zle_hist.yo,
	Src/Zle/zle_params.yo: improve return value from isearch functions
	and add LASTABORTEDSEARCH variable.

	* 26723: Completion/Unix/Type/.distfiles,
	Completion/Unix/Type/_have_glob_qual,
	Completion/Unix/Type_path_files: centralise test for whether
	file has glob qualifiers and how to match them.

	* users/13903: Src/Zle/zle_hist.c: repeated vi searching was
	broken and "_" prompt was missing.

2009-03-13  Barton E. Schaefer  <schaefer@zsh.org>

	* 26713: Completion/Zsh/Type/_globflags: add #autoload

2009-03-13  Geoff Wing  <gcw@zsh.org>

	* unposted: LICENCE: update year to 2009

2009-03-10  Peter Stephenson  <pws@csr.com>

	* 26708: Src/hist.c: print message if we give up trying to
	create a lock file with hard links.

	* 26705: Src/subst.c, Test/D07multibyte.ztst: still problems
	with multibyte characters with Meta in prompt expansion within
	parameter expansion.

2009-03-09  Peter Stephenson  <pws@csr.com>

	* 26702: Src/init.c: lexsave()/lexrestore() needed around
	use of history in loop() when not at top level; shows up
	when calling things from zle, for example.

	* derf@sievert.tabularazor.org: 22701:
	Completion/Unix/Command/_devtodo: new completion

2009-03-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26697: configure.ac, Src/Modules/attr.c, Src/Modules/attr.mdd:
	test for Linux- and Mac- style xattr functions and don't use
	if neither appropriate.

2009-03-06  Peter Stephenson  <pws@csr.com>

	* unposted: fix definition of _perforce_whole_path in 26690.

2009-03-04  Peter Stephenson  <pws@csr.com>

	* 26690: Completion/Unix/Command/_perforce: the
	whole-path style allows you to complete certain types of
	file (e.g. opened) as a complete path rather than in directory
	segments; the special value absolute only does that if you
	type the leading slash.

	* unposted: Etc/FAQ.yo: add POSIX_ALIASES and POSIX_IDENTIFIERS
	to the list of compatibility options with ksh.

2009-03-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26686: Src/exec.c, Src/utils.c: storing long $_ on the
	stack can be problematic, so use zalloc() rather than VARARR().

	* 26683: Doc/Zsh/params.yo, Doc/Zsh/roadmap.yo: add some notes
	on LC_CTYPE etc.

	* unposted: Src/Modules/cap.c: that's what happens when you
	make patches for things that aren't supported on your system.

2009-03-03  Peter Stephenson  <pws@csr.com>

	* 26680: Src/Modules/cap.c: missed some stuff that needed metafied
	arguments.

	* 26677: Src/Module/caps.c: need some unmetafy() calls as noticed
	by Mikael.

	* 26676: Doc/Zsh/options.yo: redirect to main description
	of reserved words instead.

	* 26675: Doc/Zsh/options.yo, Src/lex.c, Src/options.c, Src/zsh.h,
	Test/A02alias.ztst: add POSIX_ALIASES option.

	* 26671: Completion/Zsh/Command/_zattr, Doc/Zsh/.distfiles,
	Src/Modules/attr.c: various minor tidy-ups (tidies up?) for
	26670.

	* Mikael Magnusson: 26670: configure.ac,
	Completion/Command/Zsh/.distfiles, Completion/Zsh/Command/_zattr,
	Doc/Makefile.in, Doc/Zsh/.distfiles, Doc/Zsh/mod_attr.yo,
	Src/Modules/.distfiles, Src/Modules/attr.c, Src/Modules/attr.mdd:
	add module to handle Linux extended file attributes.

	* Jun T.: 26667: Doc/Zsh/prompt.yo: separate out parentheses.

2009-03-02  Barton E. Schaefer  <schaefer@zsh.org>

	* 26665: Src/utils.c: fix one incorrect test in 26614.

2009-03-02  Peter Stephenson  <pws@csr.com>

	* Lionel Flandrin: 26625: Src/utils.c: inopportune interrupt
	could wreck terminal set up.

	* 26614 plus 26615: Doc/Zsh/builtins.yo, Doc/Zsh/calsys.yo,
	Doc/Zsh/prompt.yo, Src/builtin.c, Src/utils.c: support
	-t <fmt> in history and as a side effect support GNU
	"-" extension for date and time elements with no padding
	for those handled internally.

2009-03-01  Clint Adams  <clint@zsh.org>

	* Frank Blendinger: 26656: Completion/Unix/Command/_gnupod:
	improved gnupod completion.

	* Chris Lamb: 26655: Completion/Unix/Command/_django: complete
	custom Django management commands.

2009-02-28  Clint Adams  <clint@zsh.org>

	* Daniel Friesel: 26636: Completion/X/Command/_mplayer: complete
	.flac files for mplayer.

2009-02-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 26609: Completion/Unix/Type/_path_files: further / different fix
	for doubled -s in path completion, which only might be correct in
	all cases but is more correct for the original failed example.

	* unposted: Completion/Base/Utility/_pick_variant: be consistent
	about explicitly returning 0 or 1, just because.

2009-02-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26622: Src/lex.c, Test/A01grammar.ztst: improve 26617 and add
	test.

2009-02-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26617, c.f. Tomáš Smetana, 26610: Src/lex.c: comments
	weren't handled in $(...).

2009-02-26  Peter Stephenson  <pws@csr.com>

	* Frank Terbeck: 26612: Doc/Zsh/contrib.yo: VCS info documentation
	fix

2009-02-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26606: Completion/Unix/Type/_path_files: fix doubled -s
	in path completion in certain cases.

2009-02-25  Peter Stephenson  <pws@csr.com>

	* Src/hist.c: 26602: history substitution buffer could overflow
	with no test.

2009-02-25  Clint Adams  <clint@zsh.org>

	* Mikael Magnusson: 26596: Completion/Unix/Command/_git: new git
	options.

	* Jörg Sommer: 26593: Completion/Debian/Command/_lintian: complete
	multiple files for lintian.

2009-02-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26588: Src/Zle/zle_tricky.c: don't expand aliases in run-help
	since the run-help function can do that.

2009-02-20  Peter Stephenson  <pws@csr.com>

	* c.f. 26586: Src/builtin.c, Src/lex.c, Src/parse.c: rename yylex
	to zshlex and yytext to zshlextext to avoid possible clashes
	in linked libraries.

	* 26584: configure.ac, Src/Modules/tcp.h: use bind/netdb.h where
	appropriate.

2009-02-19  Peter Stephenson  <pws@csr.com>

	* 26583: Src/init.c, Src/zsh.h: use HOOK_SUFFIX more widely
	for "*_functions" arrays.

2009-02-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jörg Sommer: 26582: Completion/Unix/Command/_date: --rfc-3339
	option.

2009-02-18  Peter Stephenson  <pws@csr.com>

	* 26580: Mikael: Doc/Zsh/func.yo: typo.

	* 26579: Doc/Zsh/func.yo: fix hook function documentation.

	* unposted: Src/.cvsignore: ignore patchlevel.h.

	* Arkadiusz Miskiewicz <arekm@maven.pl>: 26573:
	Functions/Completion/compdump: force compdump to overwrite
	dump file if mv is a bit dubious.

2009-02-14  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Danek Duvall: 26571: Src/Zle/complete.mdd,
	Completion/Solaris/Command/_dladm,
	Completion/Solaris/Command/_ptree,
	Completion/Solaris/Command/_svccfg,
	Completion/Solaris/Command/_svcs, Completion/Unix/Command/_zfs,
	Completion/Unix/Command/_zpool: additions for Solaris
	support.

	* Richard Hartmann: 26558: Doc/Zsh/options.yo: modification
	of 2650.

2009-02-12  Clint Adams  <clint@zsh.org>

	* 26565: Completion/Unix/Command/_patch: fix breakage in 26482.

2009-02-12  Peter Stephenson  <pws@csr.com>

	* 26560: Doc/Zsh/builtins.yo: document autoload -z/-k (finally).

2009-02-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26556: Doc/Zsh/builtins.yo: documentation for 26546.

	* 26546: Src/builtin.c, Src/exec.c, Src/hashtable.c, Src/init.c,
	Src/mkbltnmlst.sh, Src/options.c, Src/params.c, Src/parse.c,
	Src/signals.c, Src/subst.c, Src/zsh.h, Src/Modules/newuser.c,
	Src/Modules/parameter.c, Test/B07emulate.ztst: sticky emulation
	for functions defined within emualate ... -c ... environments.

2009-02-11  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Calendar/age: accidentally committed a
	currently undocumented change that allows an age spec beginning
	with a colon to be followed by a file name whose modification time
	will be used as the date/time.  Probably needs improving but
	not actually harmful since the syntax wasn't valid before.

	* Richard Hartmann: 26550: Doc/Zsh/options.yo: make
	it clear that various options can't be changed within the shell.

	* Frank Terbeck: 26549: Doc/Zsh/contrib.yo,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_bzr,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_cdv,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_cvs,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_darcs,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_hg,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_mtn,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_p4,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_svk,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_svn,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_tla,
	Functions/VCS_Info/VCS_INFO_formats: improvements to VCS_Info:
	check for changes in git.

	* Richard Hartmann: 26547: Doc/Zsh/options.yo: further extension
	to option indexing:  NOoptions without underscore.

2009-02-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26545: Test/B07emulate.ztst: new test.

2009-02-10  Clint Adams  <clint@zsh.org>

	* 26544: Completion/Unix/Command/_lp: complete pdf files
	as well as ps.

2009-02-09  Peter Stephenson  <pws@csr.com>

	* Greg Klanderman: 26538: Completion/Base/Widget/_read_comp:
	needs "nounset" option.

	* Richard Hartmann: 26536: Doc/Zsh/options.yo: add index entries
	for options that appear with "NO" in front.

	* Richard Hartmann: 26535: Doc/Zsh/options.yo: remove typo.

2009-02-08  Andrey Borzenkov  <bor@zsh.org>

	* 26530: Doc/Zsh/builtins.yo: clarify that "emulate -c"
	restores all options on return, not only those related
	to emulation

2009-02-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Allan Caffee <allan.caffee@gmail.com>: 26532: index option
	names without underscore, too.

2009-02-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/zle.yo: use of highlighting was out of
	date.

2009-02-06  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/builtins.yo: typo in previous patch
	spotted by Mikael.

	* 26517: Doc/Zsh/builtins.yo, Doc/Zsh/compsys.yo,
	Doc/Zsh/contrib.yo, Doc/Zsh/expn.yo, Doc/Zsh/options.yo,
	Doc/Zsh/params.yo: prompt expansion section in Unix manual
	is actually named EXPANSION OF PROMPT SEQUENCES.

2009-02-05  Peter Stephenson  <pws@csr.com>

	* unposted: fix number in foregoing.

	* 26513: README: note that addition of ".." in completion
	was broken.

2009-02-01  Andrey Borzenkov  <bor@zsh.org>

	* 26504: Doc/Zsh/options.yo: document that LOCAL_OPTIONS
	does not restore PRIVILEGED and RESTRICTED

2009-01-30  Clint Adams  <clint@zsh.org>

	* 26494: Completion/Unix/Command/_pydoc: completion for pydoc.

2009-01-29  Peter Stephenson  <pws@csr.com>

	* 26485: Completion/Unix/Type/_path_files: accept-exact-dirs could
	rearrange directories into the wrong order.

2009-01-29  Clint Adams  <clint@zsh.org>

	* 26482: Completion/Unix/Command/_patch: complete patch -U,
	--unified-reject-files, --global-reject-file.
	* unposted: move _getfacl and _setfacl from Completion/Cygwin/Command
	to Completion/Unix/Command.
	* 26483: Completion/Unix/Command/_getfacl,
	Completion/Unix/Command/_setfacl: handle SGI's acl programs as well
	as Cygwin's.
	* Jörg Sommer: 26451: Completion/Linux/Command/_modutils: use
	globbing to find available modules, now that modprobe -l is
	deprecated.
	* Jörg Sommer: 26452: Completion/Linux/Command/_modutils: drop
	completion of modinfo -f.
	* Jörg Sommer: 26453: Completion/Linux/Command/_modutils: complete
	modinfo -k.
	* Ingmar Vanhassel: 26467: Completion/Unix/Command/_git: add "git
	remote rename" completion.
	* Ingmar Vanhassel: 26468: Completion/Unix/Command/_git: "git
	stage" is now a synonym for "git add". git diff: --staged is a
	synonym for --cached.
	* Ingmar Vanhassel: 26469: Completion/Unix/Command/_git: complete
	"git clone --verbose".
	* Ingmar Vanhassel: 26470: Completion/Unix/Command/_git: update
	"git svn" completion.
	* Ingmar Vanhassel: 26471: Completion/Unix/Command/_git: update
	"git rebase" completion.
	* Ingmar Vanhassel: 26472: Completion/Unix/Command/_git: complete
	"git add --intent-to-add".
	* Ingmar Vanhassel: 26473: Completion/Unix/Command/_git: complete
	"git commit --cleanup=" and "git commit --allow-empty".
	* Ingmar Vanhassel: 26474: Completion/Unix/Command/_git: add
	"git describe --tags" completion and fix typos.

2009-01-29  Peter Stephenson  <pws@csr.com>

	* 26466: Src/Zle/compmatch.c: with suffix, bld_line() got
	the arithmetic over patterns wrong.

2009-01-28  Peter Stephenson  <pws@csr.com>

	* Greg Klanderman: 26465: Doc/Zsh/zle.yo, Src/Zle/zle_keymap.c:
	add command keymap for command execution.

	* Greg Klanderman: 26464: Completion/Unix/Type/_pids: style
	insert-ids=single was problematic with menu completion.

	* Greg Klanderman: 26463: Doc/Zsh/zle.yo, Src/Zle/zle_main.c: add
	zle-line-finish widget.

2009-01-27  Peter Stephenson  <pws@csr.com>

	* 26448: Doc/Zsh/expn.yo, Src/glob.c: glob sort operators
	oe and o+ allow arbitrary code to pick name for sorting.

2009-01-26  Peter Stephenson  <pws@csr.com>

	* Greg Klanderman: 26439: Doc/Zsh/mod_system.yo: convert sections
	to subsections.

2009-01-25  Andrey Borzenkov  <bor@zsh.org>

	* 26425: Doc/Zsh/builtins.yo Src/builtin.c:
	"emulate csh -c command" will evaluate `command' after temporary
	enable csh emulation. Note that `-c' is not actually an option,
	but positional parameter.

2009-01-24  Doug Kearns  <dougkearns@gmail.com>

	* 26413: Completion/Unix/Command/_ant: update for version 1.7.1.

	* 26411: Completion/Cygwin/Command/.distfiles,
	Completion/Cygwin/Command/_cygcheck,
	Completion/Cygwin/Command/_cygpath,
	Completion/Cygwin/Command/_cygrunsrv,
	Completion/Cygwin/Command/_cygserver,
	Completion/Cygwin/Command/_cygstart,
	Completion/Cygwin/Command/_dumper,
	Completion/Cygwin/Command/_getclip,
	Completion/Cygwin/Command/_getfacl,
	Completion/Cygwin/Command/_mkshortcut,
	Completion/Cygwin/Command/_mkzsh,
	Completion/Cygwin/Command/_putclip,
	Completion/Cygwin/Command/_readshortcut,
	Completion/Cygwin/Command/_setfacl: update Cygwin completion
	functions and add new completion for setfacl and readshortcut.

2009-01-22  Clint Adams  <clint@zsh.org>

	* 26407: Completion/Debian/Command/_aptitude: patch to handle
	aptitude build-dep, from Sven Joachim.

	* 26405: Completion/Unix/Command/_xmms2: completion for
	xmms2, from Louis-David Mitterand.

2009-01-22  Doug Kearns  <dougkearns@gmail.com>

	* unposted: Etc/zsh-development-guide: fix some typos.

2009-01-20  Peter Stephenson  <pws@csr.com>

	* 26373: Src/Zle/complist.c: initialise variable in menu
	completion in attempt to prevent crash when starting
	a new completion.

2009-01-20  Doug Kearns  <dougkearns@gmail.com>

	* 26372: Completion/Unix/Command/_antiword: update for version
	0.37.

2009-01-19  Peter Stephenson  <pws@csr.com>

	* 26366: Doc/Zsh/zle.yo, Src/Zle/iwidgets.list,
	Src/Zle/zle_hist.c, Src/Zle/zle_keymap.c: add "isearch"
	keymap and "accept-search" function.

	* Doug Kearns: 26365: Completion/Unix/Command/_python: new 3.0
	options.

2009-01-19  Wayne Davison  <wayned@users.sourceforge.net>

	* 26362: Src/Modules/regex.c: avoid calling regfree() when the
	regex_t "re" was not initialized.

2009-01-19  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Modules/regex.c: fixed a few compiler warnings
	in zcond_regex_match(), including a (useless) warning about
	matchessz potentially being used uninitialized and some
	signed/unsigned warnings about re.re_nsub.  Also split a
	couple compound lines.

2009-01-19  Doug Kearns  <dougkearns@gmail.com>

	* 26361: Completion/Unix/Command/_rake: update for version 0.8.3.

	* 26360: Completion/Unix/Command/_git: add --work-tree option.

2009-01-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26315: Src/params.c: define ZSH_PATCHLEVEL to "unknown" if
	revision not found.

2009-01-15  Peter Stephenson  <pws@csr.com>

	* 26313: INSTALL, configure.ac, Src/params.c: add
	--enable-custom-patchlevel for tweaked shells.

	* Functions/TCP/tcp_log: unposted: suppress WARN_CREATE_GLOBAL
	message.

	* 26312: Phil Pennock: Doc/Zsh/cond.yo, Doc/Zsh/mod_pcre.yo,
	Doc/Zsh/mod_regex.yo: Document no variables altered on failed
	match.

2009-01-13  Peter Stephenson  <pws@csr.com>

	* 26304: Mikael Magnusson: configure.ac: logical correction
	in link warning.

	* 26393: Src/Zle/zle_refresh.c: turn off text attributes when
	deleting text, to avoid them being used for inserted blanks.

	* unposted: Completion/Base/Utility/_values, Doc/Zsh/compwid.yo,
	Src/Zle/compcore.c, Src/Zle/complete.c, Src/Zle/compresult.c:
	Back off 26270 and follow up; was causing memory corruption.

	* Doc/Zsh/mod_zpty.yo, Src/Modules/zpty.c, Test/comptest:
	make "zpty -r" exit more cleanly on read failures and add and
	use option to ensure a pattern has been matched.

	* 26300: Src/zsh.mdd: don't use "echo -n" for $ZSH_PATCHLEVEL.

2009-01-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/compwid.yo: tweak doc for 26270.

	* unposted: Src/zsh.mdd: fix the inevitable confusion with
	using dollar Revision dollar.

	* 26272: Doc/Zsh/params.yo, Src/params.c, Src/zsh.mdd: extract
	Revision from ChangeLog for use in $ZSH_PATCHLEVEL.

	* unposted: add RCS Revision tag for use in patchlevel
	recording.

2009-01-09  Andrey Borzenkov  <bor@zsh.org>

	* 26270: Completion/Base/Utility/_values, Doc/Zsh/compwid.yo,
	Src/Zle/compcore.c, Src/Zle/complete.c, Src/Zle/compresult.c:
	allow accept-and-menu-complete to work also with _values.
	Add compstate[list_in_word] flag to control, whether suffix
	is replaced by space; when set, next match is added in the same
	word.

	* unposted: Completion/Mandriva/Command/.distfiles,
	Completion/Mandriva/Command/_rebootin: add _rebootin completion
	from Mandriva RPM (modified to allow spaces in GRUB menu titles)

2009-01-09  Peter Stephenson  <pws@csr.com>

	* Benjamin R. Haskell: 26265: Functions/Zle/define-composed-chars:
	fix some accented characters.

2009-01-08  Peter Stephenson  <pws@csr.com>

	* 26260: Src/params.c: fix crash when failing to assign
	scalar to special hash.

2009-01-06  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/mod_stat.yo: fix yodl problem with 26229.

2009-01-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26249: Src/utils.c: remove arbitrary string length limit in
	unmeta().

2009-01-05  Peter Stephenson  <pws@csr.com>

	* Richard Hartmann: 26170 (parts 1 and 2):
	Completion/Unix/Type/_ps, Completion/Unix/Type/_pdf:
	files compressed with .bz2.

2009-01-05  Andrey Borzenkov  <bor@zsh.org>

	* 26247: configure.ac, Src/Zle/zle_tricky.c: fix compilation
	with -Werror=format-security GCC option.

2009-01-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Richard Hartmann: 26229: Doc/Zsh/mod_stat.yo: note that zstat
	follows links by default.

	* Frank Terbeck: 26215: Doc/Zsh/contrib.yo,
	Functions/VCS_Info/vcs_info: disable-patterns style.

	* Greg Klanderman: 26159: Src/Zle/zle_utils.c: CUT_RAW should be
	CUT_REPLACE for multiple kills to append.

2008-12-30  Clint Adams  <clint@zsh.org>

	* 26202: Functions/Misc/run-help: show zshmodules(1) for echotc,
	echoti, sched, zprof, zpty, zsocket, zstyle, and ztcp builtins
	as well.

2008-12-29  Geoff Wing  <gcw@zsh.org>

	* unposted: Test/C04funcdef.ztst, Test/C05debug.ztst,
	Test/V06parameter.ztst: clean up temporary files

2008-12-29  Clint Adams  <clint@zsh.org>

	* 26185: Doc/Zsh/mod_newuser.yo: fix two places where path to
	global zshenv was specified statically.

	* Richard Hartmann: 26175: Completion/Unix/Command/_vim: updates
	for vim completion.

2008-12-18  Peter Stephenson  <pws@csr.com>

	* Richard Hartmann: 26155: Doc/Zsh/builtins.yo,
	Doc/Zsh/mod_parameter.yo, Doc/Zsh/options.yo: quote use of `.'
	as a command in text.

2008-12-16  Clint Adams  <clint@zsh.org>

	* 26141: Functions/Zle/edit-command-line: word-split
	EDITOR/VISUAL so users can have multi-argument
	commands in those variables.

2008-12-11  Peter Stephenson  <pws@csr.com>

	* Frank Terbeck: 26125: Doc/Zsh/contrib.yo,
	Functions/VCS_Info/.distfiles,
	Functions/VCS_Info/VCS_INFO_check_com,
	Functions/VCS_Info/VCS_INFO_get_cmd, Functions/VCS_Info/vcs_info,
	Functions/VCS_Info/Backends/VCS_INFO_detect_cdv,
	Functions/VCS_Info/Backends/VCS_INFO_detect_cvs,
	Functions/VCS_Info/Backends/VCS_INFO_detect_darcs,
	Functions/VCS_Info/Backends/VCS_INFO_detect_git,
	Functions/VCS_Info/Backends/VCS_INFO_detect_hg,
	Functions/VCS_Info/Backends/VCS_INFO_detect_mtn,
	Functions/VCS_Info/Backends/VCS_INFO_detect_p4,
	Functions/VCS_Info/Backends/VCS_INFO_detect_svk,
	Functions/VCS_Info/Backends/VCS_INFO_detect_svn,
	Functions/VCS_Info/Backends/VCS_INFO_detect_tla,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_bzr,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_mtn,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_p4,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_svn,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_tla: add
	"command" style for VCS command to use.

2008-12-10  Peter Stephenson  <pws@csr.com>

	* 26121: Doc/Zsh/calsys.yo, Functions/Calendar/calendar: add
	-B <lines> option to calendar.

	* users/13566: Etc/FAQ.yo: note problem with unsetting elements
	of regular arrays.

2008-12-09  Peter Stephenson  <pws@csr.com>

	* 26119: Doc/Zsh/zle.yo, Src/Zle/zle_main.c: option to allow vared
	to open to an alternative terminal.

2008-12-09  Clint Adams  <clint@zsh.org>

	* Richard Hartmann: 26114: Completion/Unix/Command/_git: add color
	options.

2008-12-08  Peter Stephenson  <pws@csr.com>

	* Benjamin R. Haskell: users/13544:
	Functions/Zle/define-composed-chars: accents for i were wrong.

	* 26116: Src/Zle/deltochar.c: wasn't updated properly for
	combining characters.

2008-12-02  Peter Stephenson  <pws@csr.com>

	* Richard Hartmann: 26105: Completion/Unix/Type/_pdf: add okular.

	* Frank Terbeck: 26194: Functions/Prompts/promptinit: eliminated
	WARN_CREATE_GLOBAL warnings.

2008-12-01  Peter Stephenson  <pws@csr.com>

	* (with some help from Peter A. Castro): 26103: configure.ac:
	FIFOs seem to be more reliable than per-process FD files for
	process substitution on current Cygwin.

2008-11-27  Peter Stephenson  <pws@csr.com>

	* 26095: Src/utils.c: failed to compile if TIOCGWINSZ wasn't
	defined.

2008-11-26  Peter Stephenson  <pws@csr.com>

	* 26090: Test/C02cond.ztst: [[ -r ... ]] on Cygwin succeeds
	more often than expected, so don't test.

2008-11-25  Clint Adams  <clint@zsh.org>

	* Brendan Cully: 26057: Completion/Unix/Command/_mercurial:
	mercurial completion updates.

2008-11-25  Peter Stephenson  <pws@csr.com>

	* 26091: Src/hist.c: crash at end of history line if history
	not in use.

2008-11-24  Peter Stephenson  <pws@csr.com>

	* Frank Terbeck: users/13482: Doc/Zsh/contrib.yo: fix some prompt
	docs for vcs info.

2008-11-23  Barton E. Schaefer  <schaefer@zsh.org>

	* users/13477: Completion/Unix/Command/_rm: call _files instead
	of _path_files to correctly handle cycling through choices.

2008-11-20  Peter Stephenson  <pws@csr.com>

	* 26075: Functions/Calendar/calendar_parse: update repeated events
	until they're in the future.

	* users/13464: Functions/MIME/zsh-mime-handler,
	Functions/MIME/zsh-mime-setup: allow suffixes specified as
	lower case to match upper case variants.

2008-11-18  Peter Stephenson  <pws@csr.com>

	* 26065: Config/version.mk: update to 4.3.9-dev-1 because of
	internal code changes.

	* 26060: François Revol: configure.ac, Src/Module/zpty.c,
	Src/Zle/zle_refresh.c: fixes for BeOS.

	* 26062: Src/Zle/compmatch.c: missed change needed with 26047.

	* 26061: Src/lex.c, Src/parse.c, Src/subst.c, Src/zsh.h,
	Test/D02glob.ztst: fix clashes between numeric glob and
	process substitution such as "<->(N)".

2008-11-17  Peter Stephenson  <pws@csr.com>

	* 26056: Doc/Zsh/expn.yo, Src/exec.c:  < <(...)more_stuff is
	an error and similarly for > >(...)yet_more_stuff.

	* 26055: README, Doc/Zsh/expn.yo, Src/subst.c: ensure process
	substitution is handled completely before parameter and
	command substitution.

	* 26053: Completion/Base/Utility/_arguments: handle
	"<cmd> --help" output that includes optional parts of options
	in square brackets.

2008-11-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26047: Src/pattern.c, Src/Zle/comp.h, Src/Zle/compmatch.c,
	Src/Zle/complete.c, Src/Zle/compmatch.c, Src/Zle/computil.c,
	Src/Zle/zle_utils.c:  convert lower levels of completion
	matching to user multibyte strings / wide characters.

	* Phil (unposted): README: another typo.

2008-11-15  Clint Adams  <clint@zsh.org>

	* 26046: Functions/TCP/tcp_send: return an error if session's fd is
	unusable.

2008-11-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26042 with some fixes from 26043 (Mikael): README,
	Doc/Zsh/expn.yo, Src/exec.c, Src/lex.c, Src/subst.c,
	Test/D03procsubst.zst: allow <(...) and >(...) to occur
	in the middle of command arguments and =(...) to have
	other strings following.

2008-11-12  Oliver Kiddle  <opk@zsh.org>

	* 26030: Src/Zle/zle_main.c: fix memory leak in vared

	* 26028: Src/builtin.c: close temporary file when aborting fc

2008-11-12  Peter Stephenson  <pws@csr.com>

	* 26029: Test/A04redirect.ztst: add test for redirection operators
	with no preceding whitespace.

2008-11-11  Oliver Kiddle  <opk@zsh.org>

	* 26024: Src/Zle/zle_keymap.c: don't leave reference count
	incremented when aborting bindkey with an error

2008-11-11  Clint Adams  <clint@zsh.org>

	* 26027: Src/Zle/compctl.c: free pprogc before it goes out of
	scope in makecomplistflags.

2008-11-11  Peter Stephenson  <pws@csr.com>

	* 26025: Src/Zle/zle_main.c: prefer handling user input to
	file installed with zle -F.

2008-11-11  Clint Adams  <clint@zsh.org>

	* 26023: Completion/Unix/Command/_topgit: skeletal completion for
	tg (topgit).

2008-11-08  Oliver Kiddle  <opk@zsh.org>

	* 26022: Completion/Zsh/Type/_file_descriptors: fix on Solaris
	where /proc/$$/fd exists but doesn't contain symlinks

	* 26017: Completion/Unix/Type/_path_files,
	Completion/Zsh/Type/_globflags, Completion/Zsh/Type/_globquals:
	add completion of globbing flags

2008-11-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26021: Completion/Unix/Type/_path_files: complete glob
	qualifiers where they don't mess up the rest of the word,
	don't complete a bare glob qualifier if there's nothing
	before it.

2008-11-08  Clint Adams  <clint@zsh.org>

	* unposted: Src/glob.c: revert 26014.

2008-11-07  Clint Adams  <clint@zsh.org>

	* 26016: Completion/Unix/Command/_bzr: treat "bzr co" as an alias
	of "bzr checkout"; patch from Ryo IGARASHI.

2008-11-06  Clint Adams  <clint@zsh.org>

	* 26014: Src/glob.c: don't allocate and leak a patprog if it's not
	going to be used.

	* 26013: Src/Modules/tcp.c: don't ztrdup the other buffer returned
	by inet_ntoa.  cf. 25987.

2008-11-05  Peter Stephenson  <pws@csr.com>

	* 26008, Src/builtin.c, Test/B02typeset.ztst: "typeset -g
	<var...>" should be silent even if TYPESET_SILENT is not set.

2008-11-04  Peter Stephenson  <pws@csr.com>

	* 26006: Test/C05debug.ztst: remove dependence on system
	error message.

2008-11-03  Peter Stephenson  <pws@csr.com>

	* unposted: Config/version.mk: update version to 4.3.9-dev-0.

	* unposted: Etc/.distfiles: missing entry; 4.3.9 finally
	released, perhaps.

2008-11-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25989: Src/Zle/computil.c: Slight improvement for multibyte
	characters in matching to prevent crash.

2008-11-02  Clint Adams  <clint@zsh.org>

	* 25988: Completion/Darwin/Command/_fink,
	Completion/Darwin/Type/_retrieve_mac_apps,
	Completion/Debian/Command/_apt,
	Completion/Debian/Type/_deb_packages,
	Completion/Redhat/Command/_rpm, Completion/Redhat/Command/_yum,
	Completion/Unix/Command/_bogofilter,
	Completion/Unix/Type/_path_commands,
	Completion/Unix/Type/_perl_modules, Doc/Zsh/compsys.yo: declare
	temporary cache array as local, thanks to problem noticed by
	Kazuhiro NISHIYAMA.

2008-11-01  Clint Adams  <clint@zsh.org>

	* 25987: Src/Modules/tcp.c: don't ztrdup the buffer returned by
	inet_ntoa.

	* 25985: Src/hashtable.c: don't try to disable signal traps if
	getsignum returns -1.

2008-10-31  Oliver Kiddle  <opk@zsh.org>

	* 25983: Fix bug in hash builtin with empty hash entry name

2008-10-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25975: Src/compmatch.c: bad tests for pattern match
	when building up a line.

	* 25972: Src/Zle/complete.c, Src/Zle/compmatch.c: leaked
	and uninitialised memory found by valgrind.

	* 25971: Src/builtin.c, Src/zsh.h: fix 25937 which broke some
	builtins that handle options themselves.

2008-10-30  Peter Stephenson  <pws@csr.com>

	* 25969: Src/subst.c, Src/utils.c, Test/D07multibyte.ztst:
	bugs in metafication with prompt expansion called from parameter
	expansion and with zsh_directory_name when called from finddir().

	* 25963: Src/utils.c: Interrupt at spell check prompt output
	garbage.

	* 25961: configure.ac: some sh's don't handle opening parentheses
	in case.

	* unposted: NEWS, README, Config/version.mk, Etc/FAQ.yo,
	Etc/relnote_4.3.7.txt, Etc/relnote_4.3.8.txt,
	Etc/relnote_4.3.9.txt: try again with 4.3.9 (N.B. not yet
	released, CVS tag not finalised).

	* 25958: INSTALL: Doc/Makefile.in, Doc/Zsh/filelist.yo,
	Doc/Zsh/files.yo, Doc/Zsh/options.yo: make it possible to
	get correctly named global startup files by remaking docs.

	* Oliver (unposted): configure.ac: 25950 should use xyes, too.

	* unposted: Completion/Zsh/Command/_tcpsys: added this since
	it's already in .distfiles.  It's very limited in what it
	does but it's better than nothing, I suppose.

	* 25950: configure.ac: need "x$dynamic" trick in two
	more places.

	* users/13418: Src/Modules/termcap.c: protect against
	HAVE_STRCODES lying.

2008-10-30  Clint Adams  <clint@zsh.org>

	* 25949: Src/Zle/zle_hist.c: remove dead code in getvisrchstr.

2008-10-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25945: Completion/Unix/Type/_path_files: need some extra
	matcher options to compadd for completing abbreviated
	directory hierarchies when -U is not present (i.e. not
	correcting).

2008-10-29  Peter Stephenson  <pws@csr.com>

	* Mikael: users/13412: Etc/relnote_4.3.7.txt: typo.

	* c.f. users/13411: Config/version.mk: update archived release
	number to 4.3.8-dev-0.

	* unposted: Etc/relnote_4.3.8.txt: tiny typo.

	* unposted: Completion/Zsh/Command/.distfiles, Etc/.distfiles,
	Functions/VCS_Info/.distfiles,
	Functions/VCS_Info/Backends/.distfiles:  belatedly sort out some
	.distfiles

	* unposted: NEWS, README, Config/version.mk, Etc/FAQ.yo,
	Etc/relnote_4.3.7.txt, Etc/relnote_4.3.8.txt: update version
	to 4.3.8.

	* unposted: Functions/Zle/replace-string: use "typeset -g"
	to avoid warnings with WARN_CREATE_GLOBAL.

2008-10-29  Clint Adams  <clint@zsh.org>

	* 25940: Src/Zle/computil.c: delay !multi memory allocation until
	after possibility to error out and return without freeing.

2008-10-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25938 (Mikael) + probably 25939, too:
	Completion/Unix/Type/_path_files: IPREFIX missing $.

	* 25937: README, Src/builtin.c: builtins that don't have
	options now ignore an initial "--" argument.

2008-10-28  Peter Stephenson  <pws@csr.com>

	* unposted: Config/Version.mk, Etc/relnote_4.3.7.txt: Release
	4.3.7

2008-10-26  Clint Adams  <clint@zsh.org>

	* 25934: Completion/Debian/Command/_bts: handle bts subscribe,
	unsubscribe, and fix owner.  Patches from Ansgar Burchardt.

2008-10-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: NEWS: region_highlight is an array and so
	not capitalised.

	* unposted: README: update claimed version to 4.3.7.

	* Mikael: 25933: Doc/Zsh/contrib.yo, Doc/Zsh/expn.yo,
	Doc/Zsh/options.yo, NEWS: typos.

2008-10-24  Peter Stephenson  <pws@csr.com>

	* users/13400: Doc/Zsh/options.yo, Etc/FAQ.yo: clarify some
	aspects of ksh-like editing.

	* 25931: Test/D01prompt.zsh: test fix in 25930.

	* 25930: Src/prompt.c, Src/utils.c: dynamic directory names
	may need recursive prompt expansion; memory leak with reverse
	expansion of dynamic directory names.

2008-10-23  Peter Stephenson  <pws@csr.com>

	* users/13375: Src/Zle/zle_refresh.c: rewrite ternary expression
	which caused problems with the Sun Studio 11 compiler.

2008-10-22  Barton E. Schaefer  <schaefer@zsh.org>

	* 25927: Completion/Unix/Type/_path_files: include the ignored
	prefix/suffix in the hidden prefix/suffix only for compadd -U.

2008-10-23  Clint Adams  <clint@zsh.org>

	* 25926: Src/params.c: free val only after it may be passed to
	strlen (as in 25656).

2008-10-20  Peter Stephenson  <pws@csr.com>

	* unposted: Config/version.mk: 4.3.6-dev-2.

2008-10-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25912: Doc/Zsh/compwid.yo, Src/Zle/computil.c: fix yet another
	Meta bug in completion with matchers in compfiles; remove 25893
	because that wasn't it at all.

	* 25911: Test/D07multibyte.ztst: see if we can work around file
	system idiosyncracies.

2008-10-18  Clint Adams  <clint@zsh.org>

	* 25910: Src/builtin.c: avoid dangling file handle in bin_print.

2008-10-17  Peter Stephenson  <pws@csr.com>

	* Rocky: 25907: Test/Makefile.in: makefile needs .exe
	extension to run zsh on Cygwin.

2008-10-16  Peter Stephenson  <pws@csr.com>

	* 25905: Src/math.c, Test/C01arith.ztst: fix and test doubled-hash
	radix output syntax.

2008-10-14  Barton E. Schaefer  <schaefer@zsh.org>

	* 25887: Completion/Unix/Type/_path_files: pass -U to compadd only
	when _comp_correct is true; otherwise, completing subpatterns
	inside braces tends to behave oddly.

	* Jörg Sommer: 25883: Completion/Base/Utility/_multi_parts: quote
	strings in the temporary variable tmp1 before joining them with
	"|" to create an alternatives pattern.

	* Phil Pennock: 25854: Completion/Unix/Command/_perl,
	Completion/Unix/Type/_perl_modules: fix module completion for
	"perl -d:" (Devel modules).

2008-10-14  Clint Adams  <clint@zsh.org>

	* 25898: Src/module.c: avoid dereference of p after it is freed
	in getmathfunc.

	* 25897: Src/Zle/computil.c: remove small bit of dead code in
	cfp_opt_pats.

	* 25896: Src/builtin.c: remove small bit of dead code in
	execbuiltin.

	* Jörg Sommer: 25882: Completion/Unix/Command/_ssh: run ssh with
	-oBatchMode=yes.

2008-10-14  Peter Stephenson  <pws@csr.com>

	* 25893: Doc/Zsh/compwid.yo: matcher "m:{a-z}={A-Z}" still
	works better than "m:{[:lower:]}={[:upper:]}" in that the
	latter can glitch on some multibyte characters with Meta in
	(and doesn't yet work on non-ASCII characters anyway).

2008-10-12  Clint Adams  <clint@zsh.org>

	* 25860: Src/Zle/compmatch.c: avoid possible NULL dereferencing in
	bld_parts.

2008-10-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted, c.f. 25848: Test/comptest: attempt to sanitize
	the environment.

2008-10-12  Clint Adams  <clint@zsh.org>

	* 25859: Src/Zle/zle_tricky.c: avoid possible NULL dereferencing if
	RC_QUOTES is set.

	* Mikael Magnusson: 25856: Etc/completion-style-guide: typo fixes.

	* Mikael Magnusson: 25855: Etc/zsh-development-guide: typo fixes.

2008-10-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25845: Src/pattern.c, Test/D07multibyte.ztst: combination of
	backslashed characters and metafied characters confused pattern
	test for pure string.

2008-10-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25816: Marc Chantreux: Completion/Unix/Command/_ip:
	add promiscuous link option.

2008-10-11  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Modules/curses.c: fixed a signed/unsigned
	compiler warning.

2008-10-10  Peter Stephenson  <pws@csr.com>

	* users/13323: Test/E02xtrace.ztst: new test wasn't robust
	about ignoring /etc/zshenv.

	* users/13321: configure.ac: allow --disable-gdbm.

	* unposted: Doc/Zsh/expn.yo: protect () from macro expansion.

	* unposted: Etc/CONTRIBUTORS: update.

	* 25837: NEWS: add descriptions of new debugging features.

	* unposted: Functions/Zftp/zffcache,
	Functions/Zftp/zftp_progress: silence some warnings when
	WARN_CREATE_GLOBAL is set.

	* unposted: Config/version.mk: 4.3.6-dev-1.

	* unposted: Test/B06fc.ztst: use -f flag to zsh to prevent
	initialization scripts running.

2008-10-10  Barton E. Schaefer  <schaefer@zsh.org>

	* 25814: Functions/Misc/run-help: quote arguments to "eval".

	* unposted (?): Functions/Prompts/promptinit: quote expansion of
	prompt_opts in prompt() because zsh emulation is by necessity not
	enforced there.

	* 25140: Src/exec.c: improve error handling/reporting for
	here-document temp files.

	* 25029 (plus unposted doc): Completion/Unix/Command/_sudo,
	Doc/Zsh/compsys.yo: "environ" style to allow a different search
	path when completing as a different user.

2008-10-09  Clint Adams  <clint@zsh.org>

	* 25833: Completion/Unix/Command/_git: remove zparseopts line
	obsoleted by 25824.

	* Jörg Sommer: 25824: Completion/Unix/Command/_git: make it
	possible to use abbreviated paths for tree files.

2008-10-09  Peter Stephenson  <pws@csr.com>

	* 25831: Doc/Zsh/expn.yo, Doc/Zsh/options.yo, Src/params.c,
	Src/zsh.h, Test/D04parameter.ztst: ensure failed subscript matches
	of a type that are documented as strings rather than arrays
	return an empty string rather than an empty array to avoid
	strange RC_EXPAND_PARAM behaviour.

2008-10-08  Peter Stephenson  <pws@csr.com>

	* Nikolai Weibull: 25828: Completion/Unix/Command/_rm,
	Completion/Unix/Command/.distfiles: new completion.

	* unposted: NEWS: note some new features.

2008-10-07  Clint Adams  <clint@zsh.org>

	* 25823: Functions/Misc/run-help: bring up zshcontrib man page if
	run-help is run on run-help and run-help is a function.

	* Jörg Sommer: 25819: Completion/Linux/Command/_modutils: improve
	module parameter completion.

	* Jörg Sommer: 25822: Completion/Linux/Command/_modutils: declare
	val_args as local array.

	* Jörg Sommer: 25821: Completion/Linux/Command/_modutils: return 0
	if a modules parameter was completed.

	* Jörg Sommer: 25820: Completion/Linux/Command/_modutils: add the
	option --field of modinfo.

2008-10-06  Clint Adams  <clint@zsh.org>

	* 25818: Completion/compinstall: compinstall data loss typo fix
	from Morita Sho.

2008-10-06  Peter Stephenson  <pws@csr.com>

	* 25817: Src/builtin.c: "fc -l" is now more careful to
	list all history just added, however it got there.  Use
	of fc for executing previous commands unchanged.

2008-10-04  Clint Adams  <clint@zsh.org>

	* 25808: Completion/Debian/Command/_bts: handle bts claim and
	unclaim subcommands.

2008-10-02  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Zsh/Context/_subscript: off-by-one
	error in testing for dynamic directory name prefix.

2008-10-01  Peter Stephenson  <pws@csr.com>

	* 25791: Src/exec.c, Test/C05debug.ztst: force return from
	eval-style DEBUG trap lost status.

2008-09-30  Peter Stephenson  <pws@csr.com>

	* Frank Terbeck: 25778: Functions/VCS_Info/VCS_INFO_realpath: use
	builtin cd.

	* unposted: Completion/Zsh/Context/_subscript: recognise ~[...]
	after = and :, too.

	* 25777: Src/Modules/db_gdbm.c: argument to gdbmsetfn.

2008-09-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25775: Src/exec.c, Src/prompt.c, Src/signals.c, Src/zsh.h:
	line numbering in functions inside eval-style traps on the
	function stack was screwy.  Simplest fix is to restore normal
	line numbering within the functions so that only the immediate
	eval-style trap environment is special.

	* 25774: Src/params.c: fix in 25772 was applied too widely.

2008-09-29  Peter Stephenson  <pws@csr.com>

	* 25733: Completion/Zsh/Context/.distfiles,
	Completion/Zsh/Context/_dynamic_directory_name,
	Completion/Zsh/Context/_subscript: stub function for dynamic
	directory name completion.

	* 25772: Src/params.c: searching an associative array with
	a bad pattern could cause a crash, seen in _expand following
	"echo ~[]".

	* 25771: Src/utils.c, Src/zsh.h: shell function context
	for substitution functions.

	* users/13295 (with tweak always to keep old line numbers at
	exit from parse_string()): Src/builtin.c, Src/exec.c, Src/glob.c,
	Src/parse.c, Src/Modules/parameter.c, Src/Modules/zpty.c,
	Src/Modules/zutil.c: don't reset $LINENO when parsing strings
	unless the surrounding environment provides support (funcstack
	etc.) for it.

2008-09-28  Clint Adams  <clint@zsh.org>

	* 25764: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_django: completion for Django, from Chris
	Lamb.

2008-09-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael Magnusson: Src/utils.c: newline in getquery() is
	treated as n but should also behave like a newline. duh.

2008-09-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25760: Doc/Zsh/expn.yo, Src/subst.c, Test/D04parameter.ztst:
	(~) tokenizes arguments to further parameter flags, but not
	the rest of the parameter expansion.

	* Jörg Sommer: 25755, with tweak from 25756:
	Completion/Linux/Command/_modutils (args): improved handling
	of module arguments.

	* 25759: Doc/Zsh/expn.yo, Src/builtin.c, Src/subst.c: fix crash
	after failed dynamic named directory expansion; clarify the
	fact that static named directories can contain only
	alphanumerics, `_', `-' or `.'.

2008-09-26  Clint Adams  <clint@zsh.org>

	* Mikael Magnusson: 25617: Completion/Unix/Command/_vim:
	complete -t <tags>.

2008-09-26  Peter Stephenson  <pws@csr.com>

	* 25744: Doc/Zsh/expn.yo, Src/exec.c, Src/math.c, Src/signals.c,
	Src/subst.c, Src/utils.c, Src/Modules/zftp.c, Src/Zle/compcore.c,
	Src/Zle/compctl.c, Src/Zle/zle_main.c, Src/Zle/zle_misc.c,
	Test/D01prompt.ztst: Add dynamic named directories using
	~[<stuff>] which calls zsh_directory_name n <stuff> and
	reverse call to look up names.  Also further simplify doshfunc()
	interface to use flags directly from the Shfunc structure.

2008-09-25  Peter Stephenson  <pws@csr.com>

	* 25684: Src/prompt.c: make %x and %I consistent with
	eval line numbering.

2008-09-24  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/13288: Src/parse.c: don't report parse errors if the
	line was aborted by spell checking etc.

2008-09-24  Peter Stephenson  <pws@csr.com>

	* 25739: configure.ac: warn about GPL in binary if libgdm
	is linked.

	* Rocky Bernstein: 25734: Test/B06fc.ztst: typo.

2008-09-23  Clint Adams  <clint@zsh.org>

	* 25737: Src/Zle/computil.c: remove dead code in ca_parse_line.

	* 25736: Src/Zle/complete.c: one more zsfree missing from
	25667.

2008-09-23  Peter Stephenson  <pws@csr.com>

	* 25733: Functions/VCS_Info/Backends/VCS_INFO_get_data_p4,
	Doc/Zsh/contrib.yo: add revision number (latest synced change)
	to Perforce backend and list abbreviations with backends.

	* 25732: Functions/VCS_Info/Backends/VCS_INFO_detect_p4,
	Doc/Zsh/contrib.yo: make vcs_info detect Perforce from server
	if style use-server is set.

	* Rocky Bernstein: 25727: Src/hist.c, Test/B06fc.ztst: remove
	restriction on interactive use of fc and test another problem.

2008-09-23  Clint Adams  <clint@zsh.org>

	* 25728: Completion/Linux/Command/_ionice: spelling fix.

	* Jörg Sommer: 25717: Completion/Linux/Command/_ionice: fixups for
	25702.

2008-09-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25723: Src/Zle/zle_main.c: align combining character when
	retrieved from input stack.

2008-09-22  Clint Adams  <clint@zsh.org>

	* 25721: Src/exec.c: revert another mistake of 25701.

	* Jörg Sommer: 25718: Completion/Unix/Command/_git: add completion
	of option --reverse.

	* 25720: Doc/Zsh/contrib.yo: remove misleading vcs_info bit about
	PROMPT_SUBST.

2008-09-22  Peter Stephenson  <pws@csr.com>

	* 25715: Frank Terbeck: Doc/Zsh/contrib.yo: vcs_info
	now works straight away.

	* 25710: Functions/VCS_Info/vcs_info,
	Functions/VCS_Info/vcs_info_lastmsg,
	Functions/VCS_Info/vcs_info_printsys,
	Functions/VCS_Info/vcs_info_setsys: use native zsh emulation;
	make vcs_comm local in other functions; vcs_info_printsys
	runs vcs_info_setsys if necessary.

2008-09-22  Clint Adams  <clint@zsh.org>

	* 25713: Functions/VCS_Info/vcs_info: ensure that vcs_info
	functions immediately after autoloading.

2008-09-22  Peter Stephenson  <pws@csr.com>

	* Rocky Bernstein: 25696: Src/hist.c: fix crash on empty history.

2008-09-21  Clint Adams  <clint@zsh.org>

	* unposted: Completion/Linux/Command/.distfiles: update .distfiles.

	* Jörg Sommer: 25702: Completion/Linux/Command/_chrt,
	Completion/Linux/Command/_ionice: completions for chrt and ionice
	commands.

	* 25701 (tweaked): Src/exec.c: fix memory leak in loadautofn.

	* 25697: Functions/Prompts/prompt_clint_setup: drop git code and
	switch to vcs_info.

2008-09-19  Peter Stephenson  <pws@csr.com>

	* 25693: Frank Terbeck: Doc/Zsh/contrib.yo: and another.

	* users/13262: Frank Terbeck: Doc/Zsh/contrib.yo: another
	formatting fix.

	* users/13252 and others: Frank Terbeck (plus doc tweaks):
	Functions/VCS_Info/**/*, Doc/Zsh/contrib.yo, Src/zsh.mdd:
	add VCS_Info function system.

	* Unposted, but see users/13251: Doc/Zsh/mod_mapfile.yo: update
	users/13239.

2008-09-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25690: Src/Zle/zle_hist.c: fix insertlastword not to
	screw up characters in the history that needed metafication.

2008-09-18  Peter Stephenson  <pws@csr.com>

	* 25684: Src/prompt.c: respect trap line number rules in
	%x, %I prompt escapes.

	* users/13239: Doc/Zsh/mod_mapfile.yo: more useful comments.

	* 25682: Src/hist.c: terminate history line string before passing
	down to zshaddhistory hook.

2008-09-16  Peter Stephenson  <pws@csr.com>

	* 25677: Doc/Zsh/prompt.yo, Src/exec.c, Src/init.c, Src/math.c,
	Src/prompt.c, Src/signals.c, Src/utils.c, Src/Modules/zftp.c,
	Src/Zle/compcore.c, Src/Zle/compctl.c, Src/Zle/zle_main.c,
	Src/Zle/zle_misc.c, Test/E02xtrace.ztst: add %x and %I prompt
	escapes for source file debuging; improve interface to
	doshfunc().

2008-09-15  Peter Stephenson  <pws@csr.com>

	* 25672: prompt.c: Resolve string containing only a Nularg
	to empty string to avoid interpretation as glitch space.

	* 25671: Src/builtin.c, Test/B02typeset.ztst: non-existent
	variable in typeset -p should cause status 1.

2008-09-14  Clint Adams  <clint@zsh.org>

	* 25667: Src/Zle/complete.c: free mstr before returning from
	errors.

	* 25666: Src/Zle/computil.c: free memory allocated for an
	xor if the argument number is invalid.

2008-09-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25662: Src/builtin.c, Test/B02typeset.ztst: declare -p
	should never create variables.

2008-09-13  Clint Adams  <clint@zsh.org>

	* 25656: Src/params.c: free val only after it may be passed to
	strlen().

	* 25655: Completion/Unix/Command/_rsync: remove completion for
	--remove-sent-files option.

2008-09-12  Clint Adams  <clint@zsh.org>

	* 25654: Completion/Debian/Command/_lintian: fix return bug and add
	--color.

2008-09-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25632: xRaich[o]²x: Src/mem.c: munmap() argument was wrong.

2008-09-11  Peter Stephenson  <pws@csr.com>

	* 25651: Src/builtin.c, Src/exec.c, Src/hashtable.c, Src/init.c,
	Src/text.c, Src/Modules/parameter.c: make indentation for code
	output by getpermtext() more logical.

	* 25643: Doc/Zsh/builtins.yo, Src/exec.c: keep DEBUG and ZERR
	traps in subshells.

	* 25641: add option (NO_)MULTI_FUNC_DEF to turn off "foo1
	foo2...()" function definitions.

2008-09-10  Clint Adams  <clint@zsh.org>

	* Frank Terbeck: 25640: Completion/Unix/Command/_git: another alias
	handling fix.

	* 25639: Src/hist.c: free ptr2 if hsubl is NULL.

	* 25638: Src/Zle/compmatch.c: remove unnecessary ternary expression
	in match_str.

	* 25637: Src/exec.c: dereference prog after the NULL check.

2008-09-08  Clint Adams  <clint@zsh.org>

	* 25636: Src/Zle/zle_tricky.c: free s before returning with an
	error condition.

	* 25634: Src/Zle/zle_main.c: free t before returning if both t and
	errflag are set.

2008-09-07  Clint Adams  <clint@zsh.org>

	* Frank Terbeck: 25624: Completion/Unix/Command/_git: clean up git
	alias parsing.

2008-09-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25627: Doc/Zsh/params.yo, Src/exec.c, Src/params.c,
	Test/D04parameter.ztst: add $ZSH_SUBSHELL.

2008-09-05  Peter Stephenson  <pws@csr.com>

	* 25615: Doc/Zsh/builtins.yo, Doc/Zsh/func.yo, Src/exec.c,
	Src/text.c, Test/C05debug.ztst: add $ZSH_DEBUG_CMD for
	DEBUG traps.

2008-09-04  Peter Stephenson  <pws@csr.com>

	* 25608: Completion/compinit: unset CSH_JUNKIE_QUOTES during
	completion.

2008-09-04  Clint Adams  <clint@zsh.org>

	* 25611, 25613: Src/Modules/curses.c: protect against two possible
	NULL dereferences.

	* 25612: Src/Zle/compmatch.c: remove dead code.

	* 25610: Src/hist.c: remove dead code.

	* 25609: Src/Modules/zftp.c: initialize sz variable.

2008-09-03  Peter Stephenson  <pws@csr.com>

	* Jun T: 25603: Doc/Zsh/compsys.yo: format error.

	* Jörg Sommer <joerg@alea.gnuu.de>: 25598/25599: should
	auto-remove automatically added "=" suffix on alias completion,
	else you can end up assigning an empty alias.

	* 25595: Doc/Zsh/mod_parameter.yo, Src/builtin.c, Src/exec.c,
	Src/init.c, Src/zsh.h, Src/Modules/parameter.c,
	Test/V06parameter.ztst: fix line numbers with EVAL_LINENO;
	try to fix up oddities with funcstack for source files;
	simplify use of caller element of funcstack.

2008-09-02  Barton E. Schaefer  <schaefer@zsh.org>

	* 25600: Functions/Prompts/prompt_bart_setup: fix pattern
	introduced in 25059 that broke PS1 parsing.

2008-09-02  Clint Adams  <clint@zsh.org>

	* Mikael Magnusson: 25594: Completion/Unix/Command/_git:
	"git clean" cleanup.

2008-09-01  Clint Adams  <clint@zsh.org>

	* Mikael Magnusson: 25591: Completion/Unix/Command/_git:
	"git remote rm" completion.

	* Mikael Magnusson: 25590: Completion/Unix/Command/_git:
	update "git add" completion.

	* Frank Terbeck: 25588: Completion/Unix/Command/_git: add
	--no-pager option to git completion.

2008-09-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25587: Src/exec.c, Src/parse.c, Src/subst.c: foo==(stuff)
	was mishandled owing to parse errors; mishandling it caused
	a crash because of lack of care on failure of process
	substitution; assignments that went through execcmd() failed
	to set the status.

2008-09-01  Clint Adams  <clint@zsh.org>

	* 25585: Completion/Unix/Command/_git: fix git command completion
	when there are arguments after the cursor position.

	* Frank Terbeck: 25583: Completion/Unix/Command/_git: more git
	alias fixes.

2008-09-01  Peter Stephenson  <pws@csr.com>

	* 25582: Completion/Unix/Type/_path_files: use suggestion
	by Bart to get automatically appearing file system entries
	added by completion to respect patterns.

	* Jörg Sommer: 25572: Completion/Linux/Command/_modutils:
	complete module parameters.

2008-08-31  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25571: Src/lex.c, Src/parse.c, Test/.distfiles,
	Test/C03traps.ztst, Test/C05debug.ztst: make line numbers when
	parsing reflect the start of a parsed token rather than the end;
	add a test and move debug trap tests to a separate file.

2008-08-31  Clint Adams  <clint@zsh.org>

	* Frank Terbeck: 25561: Completion/Unix/Command/_git: fix quoting
	with aliases.

	* Mikael Magnusson: 25564: Completion/Unix/Command/_git:
	suppress error output in __git_is_treeish.

2008-08-31  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25570: Src/exec.c, Src/zsh.h, Test/C03traps.ztst: line numbers
	of complex sublists were wrong, plus test; another place to make
	lineno more consistent.

2008-08-31  Andrey Borzenkov  <bor@zsh.org>

	* users/13169: Src/exec.c: really restore emulation mode when
	exiting shell function if 'emulate -L' has been used (actually
	if LOCAL_OPTIONS has been set). Fixed problem noticed in RedHat
	bug https://bugzilla.redhat.com/show_bug.cgi?id=430665#c19.

2008-08-31  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25569: David Le Bourgeois & pws: _ant completion was broken
	by sed pattern change.

	* 25568: Frank Terbeck & pws: Src/builtin.c, Test/.distfiles,
	Test/A07control.ztst: break and continue arguments less than
	1 are invalid (and hard errors); add some tests for control
	commands.

	* users/13162: Completion/Unix/Command/_module: strip
	"~" suffix from modules.

2008-08-30  Clint Adams  <clint@zsh.org>

	* 25553: Completion/Zsh/Command/_precommand:
	add aoss to compdef line.

	* Frank Terbeck: 25551: Completion/Unix/Command/_git: remove
	a stray period from a description.

2008-08-29  Clint Adams  <clint@zsh.org>

	* Mikael Magnusson: 25539: Completion/Unix/Command/_git: more
	'git clone' fixes.

	* Frank Terbeck: 25538: Completion/Unix/Command/_git: add missing
	backslash.

	* Frank Terbeck: 25537: Completion/Unix/Command/_git: add --abort
	to options for 'git am'.

2008-08-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25532, Src/exec.c, Test/C03traps.ztst: skipping next command
	didn't work if it was an assignment or other form tagged as
	"simple".

2008-08-24  Clint Adams  <clint@zsh.org>

	* 25521: Completion/Unix/Command/_git: get merge strategies from
	git merge in case the administrator has added custom strategies.

2008-08-22  Peter Stephenson  <pws@csr.com>

	* 25508: Src/exec.c: set file name if function came from
	dump file.

2008-08-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Doc/Zsh/compsys.yo: doc for foregoing.

	* Alexey I. Froloff: 25459: Completion/Unix/Type/_files: add
	list-dirs-first style.

2008-08-21  Clint Adams  <clint@zsh.org>

	* Mikael Magnusson: 25499: Completion/Unix/Command/_git: add
	function to validate tree-ishs.

	* 25495: Completion/Unix/Command/_git: always complete cached files
	after git checkout --.

	* 25493: Completion/Unix/Command/_git: allow -q to be used in all
	git checkout contexts.

	* 25491: Completion/Unix/Command/_git: patch to improve
	"git checkout" completion, from Mikael Magnusson.

2008-08-19  Clint Adams  <clint@zsh.org>

	* 25490: Src/zsh.h, Src/Modules/db_gdbm.c: make zties dynamic so
	there can be more than one gdbm handle in use at a time.

	* 25489: Completion/Unix/Command/_git: remove cruft for "git
	octopus/octupus".

	* 25488: Completion/Unix/Command/_git: patch to complete things
	after "git bisect start", Mikael Magnusson.

	* 25487: Completion/Unix/Command/_git: whitespace changes from
	Mikael Magnusson.

	* 25486: Completion/Unix/Command/_git: patch to allow --shared to
	be completed without --local with git clone.

	* 25485: Completion/Unix/Command/_git: patch to allow --abbrev to
	be completed before -v with git branch, from Mikael Magnusson.

2008-08-18  Clint Adams  <clint@zsh.org>

	* 25480: Completion/Unix/Command/_git: add more quotes to the
	three _call_program invocations with git for-each-ref.

	* Mikael Magnusson: 25473: Completion/Unix/Command/_git: add
	missing parenthesis.

	* unposted: Completion/Unix/Command/_git: additional git branch
	options.

	* 25475: Completion/Unix/Command/_git: determine heads, tags,
	and branches through git for-each-ref instead of git tag and
	git branch.

2008-08-17  Clint Adams  <clint@zsh.org>

	* 25469: Completion/Unix/Command/_git: assorted changes
	cherry-picked from Mikael Magnusson.

2008-08-16  Clint Adams  <clint@zsh.org>

	* 25465: Completion/Unix/Command/_git: patch from Mikael Magnusson
	to add more git-add and git-checkout options.

	* unposted: Completion/Unix/Command/_git: another typo fix.

	* 25464: Completion/Unix/Command/_git: patch from Mikael Magnusson
	to add --graph.

	* 25463: Completion/Unix/Command/_git: patch to add git
	completion for --base/-1, --ours/-2 and --theirs/-3, from
	Mikael Magnusson.

	* 25462: Completion/Unix/Command/_git: patch to add some -s -w
	to _arguments and new options for revert, from Mikael Magnusson.

	* 25461: Completion/Unix/Command/_git: patch to add HEAD as
	a completion for heads, from Mikael Magnusson.

	* 25460: Completion/Unix/Command/_git: patch to add the
	--branches/tags/remotes for rev-list to _git from Mikael
	Magnusson.

	* 25457: Completion/Unix/Command/_git: improvements for git diff
	and git log from Mikael Magnusson.

	* Mikael Magnusson: 25456: Completion/Unix/Command/_git: fix typo
	of "before".

	* Frank Terbeck: 25455: Completion/Unix/Command/_git: handle git
	stashes.

2008-08-14  Clint Adams  <clint@zsh.org>

	* 25452: Completion/Unix/Command/_look: redirect stderr from look
	to /dev/null.

2008-08-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Test/V01zmodload.ztst: change consequent on having
	a new parameter in zsh/parameter.

	* 25448: Doc/Zsh/mod_parameter.yo, Src/exec.c, Src/init.c,
	Src/Modules/parameter.c, Src/zsh.h, Src/Modules/parameter.c
	Src/Modules/parameter.mdd: add $funcfiletrace to show
	absolute line number for caller.

2008-08-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25443 (tweaked): Doc/Zsh/mod_parameter.yo,
	Src/Modules/parameter.c, Test/V06parameter.ztst: allow
	$functrace to show sourced files.

2008-08-12  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Solaris/Command/.distfiles,
	Completion/Solaris/Type/.distfiles: missed .distfiles entry.

	* 25435: Baptiste Daroussin <baptiste.daroussin@gmail.com>:
	Completion/BSD/{_fetch,_freebsd-update,_portaudit,_portsnap,
	_csup,_portlint,_powerd}: new and improved FreeBSD completions.

2008-08-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Test/V06parameter.ztst: fix load directory for
	module from script.

	* 25247 with further modifications: Doc/Zsh/mod_parameter.yo,
	Src/exec.c, Src/hashtable.c, Src/init.c, Src/parse.c,
	Src/signals.c, Src/utils.c, Src/zsh.h, Src/Modules/parameter.c,
	Src/Modules/parameter.mdd, Test/.distfiles,
	Test/V01zmodload.ztst, Test/V06parameter.ztst: add
	$funcsourcetrace parameter to zsh/parameter.

2008-08-11  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/builtins.yo, Doc/Zsh/func.yo: prevent various
	entries looking like Yodl macros.

	* 25429: Rocky Bernstein: Test/E01options.ztst,
	Test/E02xtrace.ztst: don't assume PS4 is set to the default.

2008-08-08  Clint Adams  <clint@zsh.org>

	* 25424: Chris Lamb: Completion/Debian/Command/_lintian:
	completion for lintian-info.

2008-08-07  Clint Adams  <clint@zsh.org>

	* 25423: Chris Lamb: Completion/Debian/Command/.distfiles,
	Completion/Debian/Command/_grep-excuses: completion for
	grep-excuses.

	* 25422: Chris Lamb: Completion/Debian/Command/_apt-show-versions:
	apt-show-versions completion fix.

2008-08-07  Peter Stephenson  <pws@csr.com>

	* 25418: Doc/Zsh/options.yo, Src/options.c: set PROMPT_SUBST
	for all Bourne-style shells.

	* 25415: README, Doc/Zsh/builtins.yo, Doc/Zsh/func.yo,
	Doc/Zsh/options.yo, Src/builtin.c, Src/exec.c, Src/init.c,
	Src/options.c, Src/signals.c, Src/zsh.h, Test/A05execution.ztst,
	Test/C03traps.ztst:  Make DEBUG_BEFORE_CMD the default;
	make ERR_EXIT ineffective in DEBUG traps but allow it to
	be set to skip the next command (actually sublist); tidy
	up code associated with trapreturn.

2008-08-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25409: Doc/Zsh/builtins.yo, Src/builtin.c, Test/.distfiles,
	Test/B05eval.ztst: eval shouldn't reset the status at the
	start but should if the command was empty.

2008-08-06  Peter Stephenson  <pws@csr.com>

	* 25405: Src/exec.c: return value was not set from anonymous
	functions.

	* 25400: Test/C03traps.ztst: Rocky's test for 25385

2008-08-05  Peter Stephenson  <pws@csr.com>

	* 25392: Test/C03traps.ztst: test for 25367

2008-08-05  Barton E. Schaefer  <schaefer@zsh.org>

	* 25389: Doc/Zsh/mod_complist.yo, Src/Zle/complist.c: once again
	rearrange precedence of ZLS_COLORS alternatives to make complex
	coloring of file names possible.

2008-08-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Src/init.c: 25385: extend 25367 to fix another bug
	with trapreturn trampling on status.

2008-08-04  Peter Stephenson  <pws@csr.com>

	* users/13095: configure.ac: we don't want that
	_XOPEN_SOURCE_EXTENDED stuff on AIX, apparently.

	* 25384: Src/init.c: fix problem with autoload of zsh/zle
	for warning message at boot.

	* users/13093: Src/module.c: HashNode changes didn't
	get propagated to AIX-specific code.

2008-08-02  Barton E. Schaefer  <schaefer@zsh.org>

	* 25373: Src/Builtins/sched.c: fix missed ZLE entry point (see
	25347).

2008-08-01  Peter Stephenson  <pws@csr.com>

	* 25367: Src/exec.c, Src/init.c, Src/signals.c: bug with
	trapreturn in a sourced file caused early return of parent;
	add protection for nested traps; document trapreturn.

	* unposted: Functions/Misc/add-zsh-hook: testing for existence
	of hook function when hook was already defined was broken.

	* unposted: Functions/TCP/tcp_open, Functions/TCP/tcp_sess:
	improve some variable handling and standardise some indentation.

2008-07-31  Peter Stephenson  <pws@csr.com>

	* 25364: Doc/Zsh/params.yo, Src/params.c, Test/D06subscript.ztst:
	(k) hash subscript didn't work due to sense of test.

	* 25345, 25347: Src/builtin.c, Src/exec.c, Src/hist.c, Src/init.c,
	Src/input.c, Src/jobs.c, Src/loop.c, Src/options.c, Src/signals.c,
	Src/utils.c, Src/zsh.h, Src/Zle/zle_main.c: Neaten interface
	from main shell to zle to zleentry() in main shell using
	single zle_entry_pointer.

2008-07-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/func.yo: refer to DEBUG_BEFORE_CMD option.

2008-07-30  Peter Stephenson  <pws@csr.com>

	* Max Mikhanosha: users/13077: Completion/Unix/Type/_path_files:
	fix toggling with `follow' option.

2008-07-29  Peter Stephenson  <pws@csr.com>

	* 25346: Completion/compdump: fix some variables.

	* Max Mikhanosha: users/13072: Completion/Unix/Type/_path_files:
	add `follow' option to file-sort style.

2008-07-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* following discussion: Src/builtin.c: change error message in
	25338.

2008-07-25  Peter Stephenson  <pws@csr.com>

	* 25338: Src/builtin.c: disallow fc editing of the current
	history line which has bad effects on stack usage and temporary
	files.

2008-07-23  Clint Adams  <clint@zsh.org>

	* 25330: Doc/Zsh/mod_curses.yo: fix description of
	zcurses "position" (was documented as "location").

	* 25329: Src/Modules/curses.mdd: build the curses module if
	we've got any usable curses header, not just curses.h.

	* 25328: Completion/Unix/Command/_gpg: fix --recv-keys and
	--send-keys to complete key IDs instead of uid email addresses.

2008-07-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25326: Src/Zle/zle_refresh.c: don't recalculate prompt
	if not redisplaying.

2008-07-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Src/Modules/.distfiles: add missing files.

	* Danek Duvall: 25324: Completion/Solaris/Command/_coreadm,
	Completion/Solaris/Command/_dhcpinfo,
	Completion/Solaris/Command/_dumpadm,
	Completion/Solaris/Command/_gcore,
	Completion/Solaris/Command/_inetadm,
	Completion/Solaris/Command/_pfexec,
	Completion/Solaris/Command/_ptree,
	Completion/Solaris/Command/_savecore,
	Completion/Solaris/Command/_svcadm,
	Completion/Solaris/Command/_svccfg,
	Completion/Solaris/Command/_svcprop,
	Completion/Solaris/Command/_svcs,
	Completion/Solaris/Command/_zlogin,
	Completion/Solaris/Type/_svcs_fmri,
	Completion/Unix/Command/_pkg_instance,
	Completion/Unix/Command/_pkgadd,
	Completion/Unix/Command/_pkginfo,
	Completion/Unix/Command/_pkgrm, Completion/Unix/Command/_zfs,
	Completion/Unix/Command/_zpool,
	Completion/Unix/Type/_zfs_dataset,
	Completion/Unix/Type/_zfs_pool: new completions.

2008-07-21  Clint Adams  <clint@zsh.org>

	* 25322: Src/Modules/db_gdbm.c: fix printing of keys.

	* 25321: Src/Modules/db_gdbm.c: delete gdbm node when
	corresponding hash entry is unset.

	* 25320: Src/Modules/db_gdbm.c: fix read and write of elements
	by key.

	* 25319: Src/Modules/db_gdbm.c: fix zuntie, add -f option
	to ztie.

2008-07-20  Clint Adams  <clint@zsh.org>

	* 25318: Src/Modules/db_gdbm.c, Src/Modules/db_gdbm.mdd,
	configure.ac: allow parameter to be tied to a gdbm database.

2008-07-18  Peter Stephenson  <pws@csr.com>

	* 25304: Richard Hartmann: Functions/Newuser/zsh-newuser-install:
	don't go beyond 80 columns.

2008-07-17  Peter Stephenson  <pws@csr.com>

	* 25279: Doc/Zsh/func.yo, Functions/Misc/add-zsh-hook,
	Src/builtin.c, Src/exec.c, Src/hist.c, Src/init.c, Src/utils.c,
	Src/Zle/zle_main.c: add zshaddhistory hook to allow manipulations
	when history line is saved.

2008-07-15  Peter Stephenson  <pws@csr.com>

	* users/13036: Src/utils.c: "." is a valid character in
	a user name.

2008-07-14  Peter Stephenson  <pws@csr.com>

	* 25278: Doc/Zsh/compctl.yo, Doc/Zsh/compsys.yo,
	Doc/Zsh/compwid.yo, Doc/Zsh/manual.yo: rename sections in the
	completion widget manual to avoid confusion with sections
	elsewhere.

2008-07-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Phil Pennock: 25275: Completion/Base/Utility/_store_cache,
	StartupFiles/zshrc: restrict permissions on cache directories
	and use zstat in example zshrc.

	* Phil Pennock: 25276:
	Completion/Darwin/Type/_retrieve_mac_apps,
	Completion/Unix/Command/_baz, Completion/Unix/Command/_darcs,
	Completion/Unix/Command/_tar, Completion/Unix/Command/_tla,
	Completion/Zsh/Command/_zftp, Functions/Misc/sticky-note,
	Functions/Misc/tetris, Functions/Misc/xtermctl,
	Functions/Misc/zed, Functions/Prompts/prompt_bigfade_setup,
	Functions/Prompts/prompt_elite2_setup,
	Functions/Prompts/prompt_elite_setup,
	Functions/Prompts/prompt_fade_setup,
	Functions/Prompts/prompt_fire_setup,
	Functions/Prompts/promptinit, Functions/Zle/edit-command-line,
	Functions/Zle/history-beginning-search-menu,
	Functions/Zle/incarg, Functions/Zle/modify-current-argument,
	Functions/Zle/narrow-to-region-invisible,
	Functions/Zle/predict-on, Functions/Zle/quote-and-complete-word,
	Functions/Zle/transpose-words-match,
	Functions/Zle/url-quote-magic, StartupFiles/zshrc:
	use autoload -z to load zsh functions.

2008-07-07  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Zle/copy-earlier-word: avoid
	warnings from WARN_CREATE_GLOBAL.

	* 25269: Frank Terbeck: Src/Zle/compcore.c

2008-07-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25267: Src/Zle/compcore.c: Fix problem that menu completion
	wasn't automatically started on a pattern match if matching
	was done by the calling function.

2008-07-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25266: Doc/Zsh/mod_complist.yo, Src/Zle/complist.c: always use
	EXTENDED_GLOB for patterns in ZLS_COLORS.

2008-07-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25262: Src/parse.c: suspicious attempt to test errors
	when parsing command within braceless function.

2008-07-01  Peter Stephenson  <pws@csr.com>

	* 25259: Src/utils.c: make getquery() handle unhandled characters
	better.

2008-06-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25258: Completion/Unix/Type/_path_files: don't
	use -M option with -U.

2008-06-30  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Calendar/calendar_scandate: unlocalised
	variable spotted with warncreateglobal.

	* 25255: Doc/Zsh/func.yo, Src/exec.c, Test/C04funcdef.ztst:
	anonymous functions using "() { ... }" and "function { ... }".

2008-06-24  Clint Adams  <clint@zsh.org>

	* 25243: Completion/X/Command/_xrandr: patch from Chris Lamb to add
	--same-as for xrandr.

2008-06-24  Peter Stephenson  <pws@csr.com>

	* 25244: Doc/Zsh/contrib.yo, Functions/Zle/match-words-by-style,
	Functions/Zle/modify-current-argument,
	Functions/Zle/split-shell-arguments: enhance users/12987 with
	style for subword start and fix a few bits of documentation.

	* users/12985, users/12986, users/12988: Tomasz Pala:
	Completion/Linux/Command/_ethtool,
	Completion/Linux/Command/_ipset, Completion/Unix/Command/_arp:
	new and updated completions.

	* users/12987: Doc/Zsh/contrib.yo,
	Functions/Zle/match-words-by-style,
	Functions/Zle/select-word-style: add subword matching to
	word-style capabilities.

	* 25242: Mikael: Doc/Zsh/prompt.yo, Src/prompt.c: add V prompt
	test for contents of psvar.

2008-06-23  Peter Stephenson  <pws@csr.com>

	* 25237: Doc/Zsh/tcpsys.yo, Functions/TCP/tcp_open: make
	tcp_on_open return status significant.

	* 25236: Doc/Zsh/contrib.yo, Functions/MIME/zsh-mime-setup:
	zsh-mime-setup -l can take suffix arguments.

2008-06-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25231: Completion/Unix/Type/_path_files: fix approximation
	of absolute paths in root directory (/uzr -> /usr, etc.).

2008-06-19  Peter Stephenson  <pws@csr.com>

	* 25214, tweaked: add warning about exponentitation precedence.

2008-06-16  Clint Adams  <clint@zsh.org>

	* 25167: Src/system.h: patch from Petr Salinger to define
	_GNU_SOURCE (for /dev/ptmx) when glibc is being used on
	non-linux platforms.

2008-06-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Bart: 25164: Doc/Zsh/expn.yo: typo.

	* 25159: Doc/Zsh/compwid.yo: expand documentation for
	correspondence classes with [:...:].

2008-06-13  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Zsh/Context/_zcalc_line,
	Functions/Misc/zcalc: handle completion idiosyncracies when
	completing in the same word as ":!".

	* 25152: Completion/Zsh/Context/{.distfiles,_zcalc_line}
	(moved from Type because this is where it should be),
	Doc/Zsh/contrib.yo, Functions/Misc/zcalc: improved zcalc
	escape commands with ":" including ":!" and ":raw"; more complete
	zcalc completion with special context.

	* unposted: Completion/{Unix,Linux}/Command/{strace,.distfiles}: move

	* users/12911: Tomasz Pala <gotar@polanet.pl>:
	Completion/Unix/Command/_strace,
	Completion/Unix/Command/.distfiles: new completion

2008-06-12  Peter Stephenson  <pws@csr.com>

	* 25149: Doc/Zsh/arith.yo, Doc/Zsh/options.yo, Src/math.c,
	Src/options.c, Src/zsh.h, Test/C01arith.ztst:  add
	C_PRECEDENCES option to make arithmetic operators have
	C (or, where necessary, Perl) precedences.

2008-06-11  Peter Stephenson  <pws@csr.com>

	* 25145: Src/exec.c, Test/E02xtrace.ztst: make sure XTRACE output
	follows stderr redirections.

	* 25143: Mikael: Doc/Zsh/mod_zprof.yo: missing descendants.

2008-06-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael: 25146: Src/Zle/compmatch.c:
	pattern_match_equivalence() needs to be exported.

2008-06-10  Peter Stephenson  <pws@csr.com>

	* 25144: Src/builtin.c, Src/math.c, Src/utils.c plus unposted
	C01arith.ztst: report the supported bases on a base error.

	* 25143: Mikael: Doc/Zsh/builtins.yo, Doc/Zsh/calsys.yo,
	Doc/Zsh/compsys.yo, Doc/Zsh/func.yo, Doc/Zsh/grammar.yo,
	Doc/Zsh/mod_pref.yo, Doc/Zsh/options.yo, Doc/Zsh/zle.yo:
	spelling corrections.

2008-06-09  Peter Stephenson  <pws@csr.com>

	* unposted: Src/Zle/compmatch.c: silence compiler (has no
	other effect).

2008-06-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25139: Completion/compinstall, Doc/Zsh/compwid.yo,
	Src/pattern.c, Src/zsh.h, Src/Zle/comp.h, Src/Zle/complete.c,
	Src/Zle/compmatch.c, Src/Zle/computil.c: enhance completion
	matching to make it possible to use wide characters (not yet
	done); also allows named character ranges, so that
	{[:lower:]}={[:upper:]} works (for now, just for single-byte
	character sets).

2008-06-05  Doug Kearns  <dougkearns@gmail.com>

	* unposted: Completion/Redhat/Command/_rpm: fix typo

2008-06-04  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/.distfiles: missing files.

	* unposted: Completion/Unix/Type/_path_files: another typo.

	* 25130 slightly tweaked for typos:
	Completion/Unix/Type/_path_files: changes to use -U flag
	to compadd so that spelling corrections in non-final
	path segments are accepted.

2008-06-03  Peter Stephenson  <pws@csr.com>

	* 25132: Completion/Zsh/Command/_zstyle: numerous still
	highly incomplete updates.

	* 25131: Completion/Unix/Command/_chmod,
	Completion/Unix/Command/_chown, Completion/Unix/Command/_cvs,
	Completion/Unix/Type/_list_files,
	Completion/Zsh/Type/_file_descriptors: need b:zstat to
	get zstat with zmodload -F zsh/stat.

2008-06-02  Peter Stephenson  <pws@csr.com>

	* users/12858: Doc/Zsh/compsys.yo: this bit didn't
	get committed.

2008-06-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25127: README: note the changes in 25122, 25124 and 25126 as
	an incompatibility.

2008-06-01  Clint Adams  <clint@zsh.org>

	* 25124, 25126: INSTALL, MACHINES, configure.ac, Src/zsh.h: work
	with --(disable|enable)-largefile instead of --(disable|enable)-lfs,
	since the latter is no longer functional.

2008-05-31  Clint Adams  <clint@zsh.org>

	* 25122: aczsh.m4, configure.ac: use AC_SYS_LARGEFILE for better
	LFS detection.

2008-05-29  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/tcpsys.yo, Functions/TCP/tcp_fd_handler:
	add tcp_on_awol.

	* Tomasz Pala <gotar@polanet.pl>: users/12884:
	Completion/Unix/Command/{iftop,tcpdump}: new completions

2008-05-27  Peter Stephenson  <pws@csr.com>

	* users/12870: Doc/Zsh/expn.yo: modifiers in glob qualifiers
	activate global globbing behaviour.

	* unposted: NEWS: note prompt colour, accept-exact-dirs.

2008-05-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 25104; 25111 (Jun T): Completion/Unix/Command/_locate: better
	handling of multiple versions of locate.

2008-05-20  Clint Adams  <clint@zsh.org>

	* 25077: Completion/Unix/Command/_gnupod: consolidation of GNUpod
	script completion from Omari Norman in 25075.

2008-05-20  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Prompts/.distfiles: add prompt_pws_setup.

2008-05-19  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/compinit: typo in 25068.

2008-05-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/12858: Doc/Zsh/compsys.yo,
	Completion/Unix/Type/_path_files: add accept-exact-dirs style.

	* unposted: Completion/compinit: fix unwanted output from
	typeset.

	* 25068: Completion/compinit: fix some warnings with
	WARN_CREATE_GLOBAL.

	* 25063: Functions/Prompts/prompt_bart_setup: minor
	tweaks.

	* Mikael: 25054: Doc/Zsh/prompt.yo: typo.

2008-05-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Src/utils.c: unused variable in 25057.

	* 25059: Functions/Misc/add-zsh-hook and virtually every
	function under Functions/Prompts, also new
	Functions/Prompts/pws, also unposted addition to
	Doc/Zsh/contrib.yo: thorough modernization of the prompt
	theme system to use current shell facilities better.

	* 25057: Src/mem.c, Src/utils.c: better debug info for memory
	errors.

	* 25055: Src/pattern.c: remove unnecessary debug test.

2008-05-16  Peter Stephenson  <pws@csr.com>

	* 25052: Doc/Zsh/compctl.yo, Doc/Zsh/compsys.yo,
	Doc/Zsh/mod_complist.yo, Doc/Zsh/prompt.yo: update some
	documentation for use of colour highlighting.

	* unposted: Etc/CONTRIBUTORS: update main shell list; still
	need to update list for functions.

	* 25051: Src/prompt.c, Src/complist.c, Src/zle_tricky.c:
	add %F, %K, %f, %k handling to formatting strings for completion.

2008-05-15  Peter Stephenson  <pws@csr.com>

	* 25040: Src/builtin.c, Src/utils.c, Src/Modules/zpty.c:
	zpty should display context information more like eval.

2008-05-14  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: also p4 sizes,
	p4 license.

	* unposted: Completion/Unix/Command/_perforce: handle
	p4 protects.

	* 25025: Doc/Zsh/builtins.yo, Src/builtin.c, Src/math.c,
	Src/utils.c: more checks to ensure radix for arithmetic
	constants is between 2 and 36 inclusive.

2008-05-13  Peter Stephenson  <pws@csr.com>

	* 25018: Omari Norman: Completion/Unix/Command/{_awk,_cut,_join}:
	new completions.

	* unposted: Doc/Zsh/builtins.yo, Doc/Zsh/grammar.yo: comment
	on aliases.

2008-05-12  Peter Stephenson  <pws@csr.com>

	* 25006, 25009: Src/Zle/complist.c: do "or" symlink orphan
	highlighting; make stat-ed file types take precedence over
	extensions and patterns.

	* 25002: Src/builtin.c, Src/init.c, Src/input.c, Src/loop.c,
	Src/prompt.c, Src/subst.c, Src/utils.c, Src/zsh.h,
	Src/Zle/zle_main.c, Src/Zle/zle_refresh.c: only update
	display attributes from prompts within zle.

2008-05-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24996: Src/cond.c, Src/exec.c, Src/glob.c, Src/loop.c,
	Src/zsh.h: improve xtrace output for patterns.

	* users/12848: Test/A01grammar.ztst, Src/loops.c: return, break
	and continue are allowed in "always" block and will override
	try block if set.

	* 24994: Src/Zle/zle_hist.c: Fix problem with
	up/down-line-or-search comparison, perhaps.

	* 24990: Stephane Chazelas: Functions/Misc/zmv: fix
	various little quirks in zmv.

2008-05-09  Peter Stephenson  <pws@csr.com>

	* 24986: Doc/Zsh/prompt.yo, Doc/Zsh/zle.yo, Src/init.c,
	Src/prompt.c, Src/watch.c, Src/zsh.h, Src/Zle/zle_refresh.c:
	prompt escapes for colouring.

	* users/12846: Etc/FAQ.yo: not so many Windows ports, these days.

2008-05-08  Peter Stephenson  <pws@csr.com>

	* unposted: Src/modules.c: bad arguments to error message.

	* 24980: Doc/Zsh/builtins.yo, Src/builtin.c, Src/module.c,
	Src/zsh.h: add zmodload -mF to manipulate features by pattern.

	* 24972: Phil Pennock: Doc/Zsh/mod_files.yo, Src/Modules/files.c,
	Src/Modules/files.mdd:  Add zf_* commands for zsh/files modules
	plus a few extra options.

2008-05-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24962: Oliver: Functions/Prompts/prompt_oliver_setup:
	update to use zle_highlight default highlighting.

2008-05-07  Peter Stephenson  <pws@csr.com>

	* 24959: Src/Zle/compresult.c: ^D's in compctl could cause a
	crash.

2008-05-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24957: Doc/Zsh/zle.yo, Src/Zle/zle_refresh.c: better sanity
	checking of colour ranges, always use termcap for numeric
	colours where available.

	* 24911 (tweaked): Doc/Zsh/zle.yo: missed this bit, somehow.

2008-05-06  Peter Stephenson  <pws@csr.com>

	* 24953: Doc/Zsh/zle.yo, Src/Zle/zle_refresh.c:
	"default" zle_highlight context, also fix allocation bug with
	24899.

2008-05-06  Clint Adams  <clint@zsh.org>

	* 24947: Completion/X/Command/_mozilla: complete -safe-mode for
	firefox.

2008-05-06  Peter Stephenson  <pws@csr.com>

	* 24951: Doc/Zsh/mod_complist, Src/Zle/comp.h, Src/Zle/compcore.c,
	Src/Zle/complist.c: implement ZLS_COLORS ln=target.

	* 24937, 24938: Dag-Erling Smørgrav <des@des.no>: configure.ac:
	improved version of 24927.

	* 24932: Src/zsh.h, Src/Zle/zle_refresh.c: try to regularize
	code that fixes up after right prompt.

	* 24927: Phil Pennock: configure.ac: Free BSD only doesn't need
	_XOPEN_SOURCE_EXTENDED on Free BSD 6.

2008-05-04  Wayne Davison  <wayned@users.sourceforge.net>

	* 24831 plus changes: Src/hist.c: simplified fcntl() locking.

	* unposted: Src/Zle/zle_hist.c, Src/Zle/zle_misc.c: fixed
	signed/unsigned warnings, including an always true "if".

2008-05-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mikael Magnusson: 24911 (tweaked): Doc/Zsh/zle.yo,
	Src/Zle/zle_params.c: REGION_ACTIVE zle parameter.

	* Phil Pennock: 24904 + 24916: configure.ac, Src/system.h: don't
	define _XOPEN_SOURCE_EXTENDED on freebsd, either, not even
	if the standard says we need it for wcwidth().

	* 24915: Src/Zle/zle_hist.c, Src/Zle/zle_misc.c,
	Src/Zle/zle_move.c, Src/Zle/zle_vi.c: some more fix-ups for
	combining characters.

2008-05-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/12815: Src/jobs.c, Src/signals.c, Src/zsh.h:
	fix bug that a previously defunct process could be taken as a
	recently terminated process that needed marking as done, hence
	causing the shell to wait for ever for the newly exited process.

2008-05-01  Peter Stephenson  <pws@csr.com>

	* 24900: Doc/Zsh/zle.yo, Src/Zle/zle_hist.c: add
	backward-kill-word to delete previous character immediately
	in isearch and document the isearch commands better.

	* 24899: Doc/Zsh/zle.yo, Src/Zle/zle_main.c,
	Src/Zle/zle_refresh.c: make colour escape sequences configurable
	and allow ANSI colour names.

2008-04-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24895: Matt Wozniski: Doc/Zsh/zle.yo: typo.

	* unposted: Src/glob.c: oops.

2008-04-29  Peter Stephenson  <pws@csr.com>

	* 24894: Doc/Zsh/zle.yo, Src/init.c, Src/zsh.h,
	Src/Zle/zle_refresh.c: enable colouring of highlighted text
	in editor.

	* 24893: Src/Zle/zle_refresh.c: duplicate statusline to avoid
	crashes when it's passed from a constant string.

2008-04-28  Peter Stephenson  <pws@csr.com>

	* unposted: Src/Zle/zle_hist.c: when anchoring a pattern
	isearch to the start of the line the search line wasn't
	reset on new input so when the first match of the new pattern
	was earlier than that of the old pattern we skipped it.

	* unposted: Src/Zle/zle_hist.c: more tweaks for failures with
	isearch pattern matching.

	* 24890: Matt Wozniski: Src/Zle/zle_hist.c: skip_pos was
	staying set causing random failures on backtracking in isearch.

	* 24887: Geoff: Src/glob.c: typo.

2008-04-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24886: Src/Zle/zle_hist.c: using unupdated pos to set end_pos
	in string isearch could cause endless loop.

2008-04-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: NEWS: note that COMBINING_CHARS is not on by
	default.

	* 24882: Doc/Zsh/zle.yo, Src/Zle/zle_hist.c, Src/Zle/zle_refresh.c:
	highlighting of incremental search match.

	* unposted because everyone's seen enough of my mistakes:
	Src/pattern.c, Src/Zle/zle_hist.c: with pattern matching the
	end position of the match wasn't calculated; we used the
	length of the uncompiled pattern which often had nothing
	to do with it.  This made the position on forward pattern
	searching wrong.

	* 24881: Src/Zle/zle_hist.c: we kept feeping on an invalid
	pattern; once is quite enough.

	* 24880: Src/Zle/zle_hist.c: feeping on a failed match could
	be mistimed.

	* 24879: Src/Zle/zle_hist.c: nastiness with pattern search
	and duplicate line detection.

	* 24878: NEWS, Doc/Zsh/zle.yo, Src/glob.c, Src/pattern.c,
	Src/zsh.h, Src/Zle/iwidgets.list, Src/Zle/zle_hist.c:
	add history-incremental-pattern-search-backward and
	history-incremental-pattern-search-forward, also optimize
	history searches a bit more.

	* 24876: don't install manual pages if empty.

	* 24872: Jun T.: Fix capitalization with combining characters.

	* 24869: Marc Chantreux: configure.ac, Src/init.c: make default
	readnullcmd configurable.

2008-04-24  Peter Stephenson  <pws@csr.com>

	* unposted: Jun T.: Src/Zle/zle_utils.c: backkill() in raw
	mode didn't correctly calculate the number of characters to
	kill.

2008-04-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Src/Zle/zle_misc.c: overwrite mode without
	MULTIBYTE_SUPPORT should be as before.

2008-04-23  Peter Stephenson  <pws@csr.com>

	* 24867: Src/system.h: looks like we need _XOPEN_SOURCE_EXTENDED
	instead of just _XOPEN_SOURCE.

	* 24865: Src/zle_vi.c: bad character adjustment in
	vireplacechars().

	* 24864: Jun T.: configure.ac, Src/zsh.h: typos in 24861.

2008-04-22  Peter Stephenson  <pws@csr.com>

	* 24862: Src/system.h: #define _XOPEN_SOURCE if needed to
	get wcwidth().

	* 24861: configure.ac, Src/builtin.c, Src/compat.c, Src/prompt.c,
	Src/utils.c, Src/zsh.h, Src/zle/complist.c, Src/Zle/zle_misc.c
	(slightly rewritten), Src/zle/zle_refresh.c, Src/Zle/zle_tricky.c:
	use alternative wcwidth() if configure suggests the library
	version is returning non-zero when it shouldn't; also improve the
	overwriting test for combining characters.

2008-04-21  Peter Stephenson  <pws@csr.com>

	* 24860: Src/Zle/zle_misc.c, Src/Zle/zle_utils.c: better
	overwrite mode.

	* 24859: Src/Zle/zle_misc.c, Src/Zle/zle_vi.c, Src/Zle/zle_word.c:
	overwriting combining characters and replacing them and appending
	after them in vi mode.

	* 24856: Src/utils.c, Src/zsh.h, Src/Zle/zle_move.c,
	Src/Zle/zle_refresh.c: use IS_COMBINING() and IS_BASECHAR()
	tests for combining characters.  Widen definitions of characters
	to least restrictive we think are likely to work.

	* 24855: Src/Zle/zle_utils.c: tests for combining char aligments
	should only be on metafied command line.

	* unposted: Src/Zle/zle_move.c: missing assignment in new
	backwardmetafiedchar().

2008-04-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24853: Src/utils.c, Src/zsh.h, Src/Zle/complist.c,
	Src/Zle/zle.h, Src/Zle/zle_hist.c, Src/Zle/zle_main.c,
	Src/Zle/zle_misc.c, Src/Zle/zle_move.c, Src/Zle/zle_refresh.c,
	Src/Zle/zle_thingy.c, Src/Zle/zle_utils.c, Src/Zle/zle_vi.c,
	Src/Zle/zle_word.c:  use metafied strings for inner loops
	involving history, with consequent changes for similar code
	such as execute-name-command, plus some utility functions.

	* 24852: Src/zle_main.c (Jun T.), Src/Zle/zle_vi.c: more
	combining chars fallout.

	* users/12798: Etc/zsh-development-guide: passing NULL flags
	to builtin definition.

	* users/12793: William Scott: Completion/BSD/Command/_chflags:
	hidden/nohidden flags.

2008-04-20  Andrey Borzenkov  <bor@zsh.org>

	* 24851: Doc/Zsh/mod_complist.yo, Src/Zle/complist.c: support
	colour codes for from current GNU ls

2008-04-18  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Zle/zle_refresh.c: fixed compiler warnings
	about signed/unsigned issues.

2008-04-18  Peter Stephenson  <pws@csr.com>

	* 24839: Src/Zle/zle_word.c: misuse of variable in 24825.

2008-04-17  Peter Stephenson  <pws@csr.com>

	* 24829: Jun T.: Src/Zle/zle_vi.c: vi-replace-chars got broken
	in the crossfire.

	* 24825: Src/utils.c, Src/Zle/zle_word.c: fix internal
	word-boundary widgets and make zero-width punctuation
	characters always part of a word.

	* unposted: NEWS: list new features so far since 4.3.6.

	* Vincent Lefevre: 24818: Doc/Zsh/options.yo (modified),
	Src/hist.c (with #ifdef HAVE_FTRUNCATE), Src/options.c, Src/zsh.h:
	history file locking using fcntl().

2008-04-16  Clint Adams  <clint@zsh.org>

	* 24823: Completion/Unix/Command/_git: some fixes and updates for
	git 1.5.5.

2008-04-16  Peter Stephenson  <pws@csr.com>

	* 24821: Etc/FAQ.yo, Src/Zle/zle_main.c: updated notes plus
	fix cursor position with combining characters after exit
	from a user-defined widget.

2008-04-15  Peter Stephenson  <pws@csr.com>

	* 24819: Src/Zle/zle.h, Src/Zle/zle_misc.c, Src/Zle/zle_move.c,
	Src/Zle/zle_utils.c: need to fix up combining character aligment
	in case of sneaky combination generation; fix transposing
	characters.

2008-04-14  Peter Stephenson  <pws@csr.com>

	* 24816: Src/Zle/zle_hist.c, Src/Zle/zle_misc.c,
	Src/Zle/zle_tricky.c: a few places where we need to alight
	with combining characters.

	* 24814: Src/hist.c: suspicious handling of temporary history
	buffer.

	* 24811: Doc/Zsh/roadmap.yo, Etc/FAQ.yo: update introductory
	documentation on multibyte support.

	* 24810 (slightly edited to move added text later):
	Src/Zle/zle_tricky.c: after unmetafying the command line ensure
	we're not on a combining character.

2008-04-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24808: Doc/Zsh/options.yo, Src/options.c, Src/utils.c, Src/zsh.h,
	Src/Zle/compcore.c, Src/Zle/complist.c, Src/Zle/compresult.c,
	Src/Zle/deltochar.c, Src/Zle/zle.h, Src/Zle/zle_hist.c,
	Src/Zle/zle_misc.c, Src/Zle/zle_move.c, Src/Zle/zle_refresh.c,
	Src/Zle/zle_tricky.c, Src/Zle/zle_utils.c, Src/Zle/zle_vi.c,
	Src/Zle/zle_word.c: add COMBINING_CHARS option and basic
	zle support.

	* Miek Gieben: users/12781: Functions/Misc/zmv: too many
	backslashes in Usage message.

2008-04-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Frank Terbeck: 24807: Completion/compint: Completion system
	needs no_ignore_braces option.

2008-04-11  Peter Stephenson  <pws@csr.com>

	* unposted: Src/zle_hist.c, Src/zle_utils.c: move zlecmp() and
	zlefind() unaltered into zle_hist.c as statics in preparation
	for surgery on the zle_text interface.  (You should see the
	waiting list for surgery, though.)

2008-04-09  Peter Stephenson  <pws@csr.com>

	* 24806: Doc/Zsh/params.yo, Completion/Zsh/Context/_subscript: fix
	typos, completing of * and @.

	* 24804: Completion/Zsh/Context/_subscript: quoting of
	associative array keys for subscripts was wrong.

2008-04-07  Clint Adams  <clint@zsh.org>

	* Markus Waldeck: 24799: Completion/Unix/Command/_vorbis:
	complete .spx files for ogg123.

2008-04-07  Peter Stephenson  <pws@csr.com>

	* 24797: Doc/Zsh/zle.yo, Functions/Zle/read-from-minibuffer:
	document POSTDISPLAY highlighting; restore read-from-minibuffer
	save/restore mechanism using variables to avoid problems with
	not restoring special ZLE variables when they go out of scope.

2008-04-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* İsmail Dönmez <ismail@namtrac.org>: 24793: Doc/Zsh/zle.yo:
	typo.

2008-04-04  Peter Stephenson  <pws@csr.com>

	* 24792: Src/Zle/zle_refresh.c: try to be safer about turning
	off attributes when outputting at a new position.

	* c.f Mikael, 24790: Doc/Zsh/zle.yo: item()s need closing
	parentheses on next line.

2008-04-04  Clint Adams  <clint@zsh.org>

	* 24789: Completion/Unix/Command/_stgit: completion for
	stg subcommands.

2008-04-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24788: Doc/Zsh/expn.yo, Src/subst.c: ${(m)#...} returns
	string print width.

2008-04-03  Peter Stephenson  <pws@csr.com>

	* 24787: Src/Zle/zle_main.c, Src/Zle/zle_refresh.c: reset
	region_highlight when finished editing command line.

	* 24786: Src/builtin.c, Src/init.c, Src/zle/zle_keymap.c,
	Src/Zle/zle_main.c, Src/Zle/zle_misc.c, Src/Zle/zle_vi.c:
	handle read -t properly in zle by passing down timeout
	to getbyte().

	* 24782, plus a couple of fixes: Doc/Zsh/zle.yo,
	Functions/Zle/read-from-minibuffer,
	Functions/Zle/replace-string-again, Src/zsh.h, Src/Zle/zle.h,
	Src/Zle/zle_main.c, Src/Zle/zle_move.c, Src/Zle/zle_params.c,
	Src/Zle/zle_refresh.c: initial go at highlighting of command
	lines in zle using $zle_highlight and $region_highlight.

	* unposted, see users/12758: actually, [(w)...] does work with
	(r) and (R).

2008-04-02  Peter Stephenson  <pws@csr.com>

	* users/12754: Doc/Zsh/params.yo: [(w)...] doesn't work with (i),
	(I), (r), (R).

	* unposted: update version to 4.3.6-dev-0 to avoid clash with
	released version.

	* 24781: Doc/Zsh/contrib.yo, Functions/Zle/match-word-context:
	make word-context style more useful by using previous or next word
	depending on widget name.

	* unposted: README: minor tweaks.

	* unposted: NEWS, Config/version.mk: Release 4.3.6.

2008-04-01  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/compsys.yo, Doc/Zsh/contrib.yo: need tt(--) ->
	tt(-)tt(-).   Plus other minor typos.

	* unposted: (spotted by Ismail): Doc/Zsh/compsys.yo: typo.

2008-03-31  Peter Stephenson  <pws@csr.com>

	* unposted: README, Config/version.mk, Etc/.distfiles, Etc/FAQ.yo,
	Etc/relnote{,s}_4.3.6.txt:  4.3.5-dev-4 and renumber for
	4.3.6.

	* unposted: Functions/Calendar/calendar_show: if in KDE,
	use kdialog rather than xmessage.

2008-03-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24708: Misc/globtests, Src/pattern.c, Test/D02glob.ztst:
	(#c) extended globbing flag didn't backtrack properly on
	failure of the remaining pattern after the repeated pattern.

2008-03-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24777: Src/Zle/complist.c: bug clearing a list when
	exiting from menu selection in some circumstances (see
	24756 for test case).

2008-03-28  Peter Stephenson  <pws@csr.com>

	* 24776: Completion/compinit: clarify the message printed
	when compaudit finds problems.

	* 24775: Completion/Zsh/Command/_cd, Doc/Zsh/compsys.yo: improve
	option handling.

	* users/12739: configure.ac: multiple arguments to --with-term-lib
	weren't handled properly.

	* 24768: Completion/Unix/Type/_canonical_paths,
	Doc/Zsh/builtins.yo, Etc/relnotes_4.3.6.txt, Src/builtin.c:
	add -q option to cd, chdir, pushd, popd; use in _canonical_paths;
	document in release note.

2008-03-27  Peter Stephenson  <pws@csr.com>

	* 24759: Completion/Unix/Type/_canonical_paths: unfunction
	is noisy if function wasn't set.  Also sanitize use of
	helper functions.

	* 24757: Completion/Unix/Type/_canonical_paths: use
	CHASE_LINKS and pwd to canonicalize the directory path.

	* unposted: fix alias test in 24736 properly by replacing
	"foo" everywhere.

2008-03-26  Peter Stephenson  <pws@csr.com>

	* unposted: Config/version.mk: 4.3.5-dev-3.

	* 25753 (after various previous attempts):
	Completion/Unix/Type/_canonical_paths: use zstat to find
	canonical name for symbolic links.

	* c.f. 24741: Doc/Zsh/mod_stat.yo: loading zstat builtin was
	misdocumented.

	* 24736: Test/A02alias.ztst, Test/D07multibyte.ztst:
	tests failing with "foo" in the path and with inscrutable
	numeric sorting with NUMERIC_GLOB_SORT unset.

	* unposted: Config/version.mk: 4.3.5-dev-2.

2008-03-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24733: Src/jobs.c: wait shouldn't return immediately on
	a signal unless it's trapped (bug in 22281).

	* 24732: Src/Builtins/sched.c: not enough space for ztrftime
	string with multibyte characters.

	* 24731: Doc/Zsh/params.yo, Src/params.c, Src/pattern.c,
	Test/D04parameter.ztst: use [(e)...] parameter flag to quote
	pattern characters, also fix bug that optimization of matches
	with no pattern characters didnʼt work for multibyte matching.

2008-03-23  Clint Adams  <clint@zsh.org>

	* 24730: Completion/Unix/Command/_git: use --no-color when
	calling git commands that might output color codes.

2008-03-22  Clint Adams  <clint@zsh.org>

	* 24728: Completion/Debian/Command/_aptitude: complete for
	aptitude why and why-not.

2008-03-22  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Doc/Zsh/params.yo: further documentation tweak for the
	(R) and (I) subscript flags.

2008-03-18  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Doc/Zsh/params.yo: tweak documentation for the (i) and
	(I) subscript flags.

	* 24717, 24718, 24719: Completion/compinstall, Src/params.c,
	Test/D06subscript.ztst: a 0 subscript is neither valid nor
	equivalent to 1 any longer, so the (i) subscript flag on an empty
	array needs to yield 1 as it probably always should have.

2008-03-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Completion/Unix/Command/.distfiles,
	Completion/Zsh/Type/.distfiles, Etc/.distfiles, Src/.cvsignore:
	fix distribution files.

	* unposted: Config/version.mk: zsh-4.3.5-dev-1.

2008-03-14  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (see 24709): Functions/Misc/zkbd: add -h to local
	declaration in is-this-a-function test.  Use $DISPLAY when we
	have one instead of only $VENDOR-$OSTYPE as file name suffix.
	Add some knowledge of the MULTIBYTE option and its effects.

2008-03-14  Peter Stephenson  <pws@csr.com>

	* 24712: Src/utils.c: handling of backticks when being requoted
	for use inside double quotes had off-by-one error.

	* 24711: Src/parse.c, Src/text.c, Src/zsh.h,
	Test/A04redirect.ztst:  fix re-presentation of here-documents
	munged internally to here-strings.

2008-03-13  Peter Stephenson  <pws@csr.com>

	* 24705: configure.ac, Config/defs.mk.in, Src/zsh.mdd,
	Src/Modules/curses.c, Src/Modules/termcap.c,
	Src/Modules/terminfo.c: rationalise curses and term headers
	some more and add intermediate generated <build>/Src/zshcurses.h
	and <build>/Src/zshterm.h to include the right ones.

2008-03-12  Clint Adams  <clint@zsh.org>

	* 24704: Completion/Unix/Command/_calendar: completion for BSD
	calendar.

2008-03-11  Barton E. Schaefer  <schaefer@zsh.org>

	* 24703: Src/Zle/zle_main.c: clear trashedzle when first starting
	the editor in zleread(), so that reexpandprompt() from the first
	zrefresh() won't expand the prompt an extra time.

2008-03-11  Peter Stephenson  <pws@csr.com>

	* unposted: Src/hist.c: make test in 24699 for the extra
	space safer.

2008-03-09  Clint Adams  <clint@zsh.org>

	* 24701, 24702: Completion/Unix/Command/_git: use $service instead of
	$words[1] so completion will work if git is an alias to a wrapper.

2008-03-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24699: Src/hist.c, Src/input.c, Src/lex.c,
	Test/D04parameter.ztst: fix two bugs in the hacked up parsing
	of strings for parameter substitution: ${(Q)...} lost an initial
	">" and ${(z)...} on a string with an opening parenthesis but
	no closing parenthesis appended an extra space.

2008-03-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/12699: Src/Zle/computil.c: don't complete normal
	arguments where we're completing the required argument
	to an option in the word following the option.

2008-03-07  Peter Stephenson  <pws@csr.com>

	* Richard Hartmann: 24631: Completion/Unix/Command/_gpg: update.

	* 24696: Doc/Zsh/options.yo, Src/options.c: turn off MULTIBYTE
	by default in sh emulation.

2008-03-06  Wayne Davison  <wayned@users.sourceforge.net>

	* 24693: Src/utils.c: provide better errors when skipping
	history-file saving due to ownership.  Allow root to do the
	save anyway if zsh can chown a file descriptor.  Fixed the
	propagation of the errno from a failed open() of the history
	file (zsh used to complain about an invalid file descriptor).

	* unposted: Src/Zle/zle_utils.c:  fixed 2 compiler warnings
	about comparing signed and unsigned.

2008-03-04  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: ignore range
	limiters >, >=, =, <, <= after @ in labels and dates, too.

2008-03-03  Peter Stephenson  <pws@csr.com>

	* 24673: Test/D07multibyte.ztst: another attempt to sort
	characters the same way on multiple UTF-8 implementations.

	* 24662: River Tarnell <river@wikimedia.org>: configure.ac,
	Src/compat.c: strtoul() when not in system library.

2008-03-02  Barton E. Schaefer  <schaefer@zsh.org>

	* 24653, 24659: Completion/Unix/Type/_path_commands: use a
	helper function to call "whatis" portably, and use compadd -O
	to pre-filter matches before reading $_command_descriptions.

2008-03-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24656: Src/builtin.c: fix cd overeagerness to find integers
	after "-" and "+".

2008-03-01  Clint Adams  <clint@zsh.org>

	* 24650: Completion/Unix/Type/_path_commands: use zstyle -t instead
	of -T since extra-verbose isn't meant to default to yes.

2008-02-29  Clint Adams  <clint@zsh.org>

	* 24632: Completion/Unix/Command/_rsync: fix remote ssh filename
	quoting.

2008-02-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24627: Src/Zsh/complist.c: fix(?) crash when resizing window
	during menu-select.

2008-02-28  Clint Adams  <clint@zsh.org>

	* 24626: Completion/Unix/Type/_path_commands, Doc/Zsh/compsys.yo:
	only process command descriptions if extra-verbose style is set.

	* 24622: Completion/Unix/Command/_git: add completion for
	'git bisect skip' and 'git bisect run'.

2008-02-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24618: Test/D07multibyte.ztst: use "sort" to avoid making
	assumptions about sorting of UTF-8 files.

2008-02-27  Clint Adams  <clint@zsh.org>

	* 24617: Doc/Makefile.in: add '.' to the yodl include path
	for when files are passed as ../../Doc/*.yo.

2008-02-27  Peter Stephenson  <pws@csr.com>

	* 24611: Src/subst.c, Test/D04parameter.ztst: 23562
	broke the case of ${+array[...]} for an empty range match.

2008-02-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24602: Test/C02cond.ztst: failing to run a test didn't
	set prerequisites for later test.

	* 24600: astonishingly, there was a fourth bug in few
	lines of 24596.

2008-02-26  Geoff Wing  <gcw@zsh.org>

	* unposted: Src/utils.c: fix typos in 24596

2008-02-26  Peter Stephenson  <pws@csr.com>

	* 24596: Src/utils.c: if nl_langinfo(CODESET) returns ""
	or "646" use "US-ASCII".

	* 24592: Src/utils.c: make errors about charset conversion
	more explicit.

2008-02-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24590: Src/exec.c, Src/lex.c: tame overzealous error
	report when unquoting.

	* 24588: Completion/Zsh/Type/_globquals,
	Completion/Zsh/Type/_history_modifiers: tweaks

	* 24585: Completion/Base/Utility/_alternative,
	Completion/Unix/Type/_path_files,
	Completion/Zsh/Type/_delimiters,
	Completion/Zsh/Type/_globqual_delims,
	Completion/Zsh/Type/_globquals,
	Completion/Zsh/Type/_history_modifiers, Doc/Zsh/compsys.yo:
	completion for glob qualifiers plus bug fix for message-only
	completion in _alternative.

2008-02-22  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: new option
	p4 change -u.

2008-02-22  Clint Adams  <clint@zsh.org>

	* 24578: Completion/Debian/Command/_dpkg: stop completing
	--print-gnu-build-architecture, which was dropped in 2005.

	* 24576: Functions/Calendar/calendar_add,
	Functions/Misc/sticky-note: replace shebang lines.

2008-02-21  Peter Stephenson  <pws@csr.com>

	* users/12632: Src/exec.c: bug unexporting special parameter
	after "SPECIAL=stuff funccall".

2008-02-19  Peter Stephenson  <pws@csr.com>

	* 24572: Doc/Zsh/calsys.yo, Functions/Calendar/calendar_add:
	add style reformat-date.

2008-02-19  Barton E. Schaefer  <schaefer@zsh.org>

	* 24570: Completion/Unix/Type/_path_commands: don't attempt to
	pre-filter $commands on $PREFIX, just let compadd deal with it.
	Fixes a bad interaction with the _approximate completer.

2008-02-17  Barton E. Schaefer  <schaefer@zsh.org>

	* users/12600: Src/builtin.c: reorder handling of -s/-d/-t options
	so that terminal input modes are set before attempting a
	read-poll.  Also display any prompt before read-polling.

	* unposted: Functions/Misc/xtermctl: update uses of "read" to
	take advantage of users/12600.

2008-02-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24566: Doc/Zsh/prompt.yo, Src/prompt.c: fallout:
	fix truncation with glitch spaces; more careful
	documentation; allow %N{...}; make unsupported
	characters default to width 1.

2008-02-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24556: Doc/Zsh/prompt.yo, Src/prompt.c: %G inside %{...%}
	can be used to count width of "glitch" characters.

	* 24554: Src/Zle/complist.c: push an extra heap for
	complistmatches() to stop accumulating it; always treat
	mcolors as a global instead of just sometimes.

2008-02-14  Peter Stephenson  <pws@csr.com>

	* 24551: Src/Zle/compresult.c, Src/Zle/zle_main.c: free heap
	memory after each full Zle command executed (plus cosmetics).
	Still need to try and stop menu selection accumulating heap
	memory.

2008-02-11  Peter Stephenson  <pws@csr.com>

	* users/12547: Completion/Darwin/Type/_mac_files_for_application,
	Completion/Unix/Command/_locate: fix array indices [0] -> [1] in
	completion.

	* Haakon Riiser: 24545: Completion/X/Command/_acroread: new
	options for version 8.

2008-02-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24542: Src/Zle/zle_tricky.c: RC_QUOTES wasn't handled
	if the opening quote wasn't at the start of the word, causing
	endless looping.

2008-02-07  Clint Adams  <clint@zsh.org>

	* unposted: Functions/Misc/run-help-git,
	Functions/Calendar/calendar_add, Functions/Misc/sticky-note: remove
	shebang line.

2008-02-06  Clint Adams  <clint@zsh.org>

	* 24536: Completion/Unix/Command/_cut: tweaks to 24529, spelling
	fix.

	* Mikael Magnusson: 24529: Completion/Unix/Command/_cut:
	remaining fixes from 24526.

2008-02-05  Peter Stephenson  <pws@csr.com>

	* 24533 (tweaked): Completion/compinstall: use _completer _ignored
	as default to offer user if no completers are defined

2008-02-03  Clint Adams  <clint@zsh.org>

	* 24528: configure.ac, Etc/zsh-development-guide:
	revert 24429.

	* 24527: Completion/Unix/Command/_cut: a subset of the
	fixes from Mikael Magnusson in 24526.

2008-02-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24524: Config/version.mk: increment version to 4.3.5-dev-0.

2008-02-01  Clint Adams  <clint@zsh.org>

	* 24513, 24514, 24515, 24516, 24517, 24518, 24519, 24520, 24521:
	Doc/Zsh/builtins.yo, Doc/Zsh/calsys.yo, Doc/Zsh/contrib.yo,
	Doc/Zsh/expn.yo, Doc/Zsh/grammar.yo, Doc/Zsh/mod_curses.yo,
	Doc/Zsh/mod_newuser.yo, Doc/Zsh/mod_sched.yo, Doc/Zsh/options.yo,
	Doc/Zsh/roadmap.yo, Doc/Zsh/tcpsys.yo: typo fixes from A. Costa.

2008-02-01  Peter Stephenson  <pws@csr.com>

	* users/12527: Etc/relnote_4.3.5.txt: Add release note for 4.3.5.

	* unposted: Release 4.3.5.

	* Back off 24506 pending 4.3.5 release.

2008-02-01  Clint Adams  <clint@zsh.org>

	* 24506: Makefile.in, configure.ac, Doc/Makefile.in,
	Etc/Makefile.in, Src/Makefile.in, Src/Makemod.in.in,
	Test/Makefile.in: make ZSH_VERSIONSUFFIX propagate to somewhere
	useful.

2008-01-31  Peter Stephenson  <pws@csr.com>

	* Christopher Key <cjk32@cam.ac.uk>: users/12521:
	Completion/Unix/Command/_subversion: svn and svnadmin help
	parsing.

2008-01-30  Peter Stephenson  <pws@csr.com>

	* 24498: Src/mkmakemod.sh: check config.h instead of config.status
	for dynamic configuration since the syntax is less variable.
	Could be done by generating from Src/mkmakemod.sh.in instead.

	* 24496: Doc/Zsh/contrib.yo: more Yodl parenthesis protection.

2008-01-29  Peter Stephenson  <pws@csr.com>

	* 24485: INSTALL: note that term.h may need CPPFLAGS=-I...
	if it's to be included from the curses library directory.

	* 24483: Doc/Zsh/prompt.yo, Doc/Zsh/zle.yo: some minor
	sectioning problems.

	* users/12498: Doc/Zsh/contrib.yo: missing section spotted
	by Vincent.

	* unposted: Config/version.mk, Functions/Misc/.distfiles:
	4.3.4-dev-8.

2008-01-25  Peter Stephenson  <pws@csr.com>

	* 24460: Doc/Zsh/mod_zpty.yo, Src/utils.c, Src/Modules/zpty.c:
	make "zpty -rt" more consistent by polling before every byte,
	not just the first.

2008-01-25  Clint Adams  <clint@zsh.org>

	* 24464: Completion/Unix/Command/_git: remove trailing whitespace.

2008-01-22  Clint Adams  <clint@zsh.org>

	* 24437, 24441, 24442: Completion/Unix/Command/_git: compensate
	for some breakage introduced by 24396.

2008-01-22  Peter Stephenson  <pws@csr.com>

	* 24434: Src/Zle/zle_refresh.c: handle unprintable and zero-width
	wide characters on the command line by displaying as hex.

2008-01-22  Clint Adams  <clint@zsh.org>

	* 24429: configure.ac, Etc/zsh-development-guide:
	use ZSH_VERSIONSUFFIX instead of ZSH_EXTRAVERSION.

	* Frank Terbeck: 24413: Completion/Unix/Command/_git: handle
	completion when git aliases are used.

	* Mikael Magnusson: 24396: Completion/Unix/Command/_git:
	don't pass -r to git ls-files for performance reasons,
	compensate for lack of recursion.

2008-01-21  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/builtin.c: got rid of compiler warning about
	a signed/unsigned comparison.

2008-01-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Completion/Unix/Command/_mount: make MATCH etc.
	local.

	* users/12461: Completion/Unix/Command/_mount: mount points
	weren't completed properly for umount.

2008-01-18  Barton E. Schaefer  <schaefer@zsh.org>

	* users/12453: Functions/Misc/xtermctl: X11 window control for
	xterm-compatible emulators

2008-01-18  Clint Adams  <clint@zsh.org>

	* 24408: configure.ac, Etc/zsh-development-guide:
	use contents of ZSH_EXTRAVERSION environment variable for
	version suffix.

2008-01-18  Peter Stephenson  <pws@csr.com>

	* 24406: Src/Zle/compmatch.c: use deep copy of Cline structure
	to avoid it containing itself.

2008-01-17  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: a few minor
	news options.

2008-01-14  Peter Stephenson  <pws@csr.com>

	* 24388: Completion/Unix/Command/_mh: abort neatly if MH
	commands not found.

2008-01-13  Clint Adams  <clint@zsh.org>

	* 24387: Completion/Debian/Command/_dpkg: update --force-*
	options for dpkg completion.

2008-01-13  Barton E. Schaefer  <schaefer@zsh.org>

	* users/12426: Functions/Misc/sticky-note: post-its for zsh.

	* 24364: Functions/Misc/run-help: change the comment from 24349
	to a local assignment to HELPDIR with a default location.

2008-01-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* "N.J. Mann" <njm@njm.f2s.com>: users/12420:
	Completion/Unix/Command/_cvs: completion for cvs commit -f.

2008-01-10  Peter Stephenson  <pws@csr.com>

	* users/12412: Src/builtin.c, Src/parse.c, Test/C02cond.ztst:
	check for extra arguments in test and [.

	* 24384: Src/params.c: eliminate invalid pointer and also
	(unposted) add debug check for use.

2008-01-08  Peter Stephenson  <pws@csr.com>

	* unposted: 4.3.4-dev-7.

	* 24371: Src/Zle/zle_refresh.c: potential crash when refreshing
	scrolling chunk of large history entry.

2008-01-06  Clint Adams  <clint@zsh.org>

	* Chris Lamb: 24365: Completion/Debian/Command/.distfiles,
	Completion/Debian/Command/_vim-addons: completion for vim-addons.

2008-01-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24362: Src/Zle/zle_refresh.c: redrawing line with multibyte
	character first caused later characters not to be redrawn.

2008-01-04  Clint Adams  <clint@zsh.org>

	* 24360: Completion/Unix/Command/_du: fix misspelling of
	--separate-dirs.

2008-01-04  Peter Stephenson  <pws@csr.com>

	* 25356: Src/text.c, Test/C02cond.ztst: "=~" wasn't handled by
	the code that retrieves a printed representation.
	Non-interactively this caused a crash.

2008-01-04  Clint Adams  <clint@zsh.org>

	* 24349: Functions/Misc/run-help: add comment about HELPDIR to
	assist replacement in Debian build.

2008-01-03  Clint Adams  <clint@zsh.org>

	* 24345: Completion/Unix/Command/_metaflac: add --no-utf8-comment
	and --list.

2007-12-31  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (based on J.Sommer: 24334): Doc/Zsh/contrib.yo:
	Document expanded behavior of run-help.

	* J.Sommer: 24333: Functions/Misc/.distfiles,
	Functions/Misc/run-help-git, Functions/Misc/run-help-svk,
	Functions/Misc/run-help-svn: run-help helpers.

	* 24332: Functions/Misc/run-help: use only the path tail of $1
	when calling "man" et al.  Look for a helper function named
	run-help-$1 to provide specific help for the command, before
	falling back on "man".

	* 24324: Src/hist.c: do not set ftim when re-entering the history
	mechanism for string substitution.

2007-12-31  Clint Adams  <clint@zsh.org>

	* 24330: Completion/X/_xpdf: add some missing options from xpdf
	3.02.

2007-12-27  Clint Adams  <clint@zsh.org>

	* 24323: Completion/Debian/Command/_apt: for performance reasons,
	procure release names via apt-cache policy instead of apt-cache
	dump.

2007-12-27  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/params.c: silenced a compiler warning by making
	an int unsigned.

2007-12-24  Clint Adams  <clint@zsh.org>

	* 24316: Test/runtests.zsh, Test/ztst.zsh: count skipped tests
	differently from successes and failures.

2007-12-20  Peter Stephenson  <pws@csr.com>

	* unposted: 4.3.4-dev-6.

	* 24305: NEWS, README, Etc/FAQ.yo: update files in preparation
	for 4.3.5.

2007-12-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24301: missed a case for the lower-casing fix in 23219.

	* 24298: Tonguc Yumruk: Functions/Misc/is-at-least: use
	emulate -L for consistency.

2007-12-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24289 plus change suggested by Ismail in 24290:
	Test/Makefile.in, Test/runtests.zsh, Test/ztst.zsh,
	Test/.distfiles: count successful and unsuccessful scripts
	and report with status.

2007-12-18  Peter Stephenson  <pws@csr.com>

	* 24279: Src/jobs.c, Src/zle_main.c, Src/zle_thingy.c: allow
	terminal changes in zle -I to be remembered in normal shell
	settings.

2007-12-17  Peter Stephenson  <pws@csr.com>

	* unposted: Src/utils.c: suppress harmless warning.

	* 24275: Src/builtin.c, Src/Zle/zle_utils.c,
	Test/D07multibyte.ztst: Solaris returns the full character
	length from mbrlen() etc. even if the call started in the
	middle; bad characters are silently converted to a question mark.

	* unposted: Config/version.mk: 4.3.4-dev-5.

	* unposted: Src/lex.c: minor typo

	* Wayne: 24273: Src/Modules/curses.c: various macros
	aren't supposed to return a value.

2007-12-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24271: Src/lex.c, Test/C01arith.ztst: handle parse failures
	in math substitution better.

	* 24268: Completion/Unix/Type/_mailboxes: handle backslashed =.

	* 24264: Doc/Zsh/builtins.yo, Doc/Zsh/expn.yo, Src/params.c,
	Src/subst.c, Src/zsh.h, Test/B02typeset.ztst: restrict the
	effect of 24234 to expansion in the parameter substitution code
	and attempt to document the effect.

2007-12-15  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync: Improved the help
	text of the --whole-file option.

2007-12-14  Peter Stephenson  <pws@csr.com>

	* 24252: configure.ac, Src/system.h, Src/Modules/curses.c:
	_XOPEN_SOURCE_EXTENDED was causing problems on OpenBSD.

	* 24251: Doc/ztexi.yo: fix sitem() macro.

2007-12-13  Clint Adams  <clint@zsh.org>

	* 24242: Functions/Calendar/calendar_add, Functions/Example/cat,
	Functions/Example/zless, Functions/Misc/checkmail,
	Functions/Misc/run-help, Functions/Misc/zcalc, Functions/Misc/zkbd:
	unify top lines as #!/bin/zsh (followed by options).

	* Peter: 24235: Completion/Base/Utility/_arguments: handle
	underscores.

2007-12-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24241: Doc/Zsh/expn.yo: explain the effect of time glob
	qualifiers better.

	* 24240: Src/Zle/zle_main.c: vared didnʼt check for trailing
	garbage on parameter names until too late.

	* 24239: Completion/Zsh/Context/_subscript: if the [ of
	a subscript was backslashed, a trailing space was added
	backslashed along with the "\[".

	* 24236: Test/C02cond.ztst: another case where the wretched
	cond -N test can fail.

	* 24234: Doc/Zsh/expn.yo, Src/params.c, Src/subst.c,
	Test/B02typeset.ztst: apply parameter flags defined with
	typeset etc. consistently so that substitution code layered
	above always sees the effects.

2007-12-12  Peter Stephenson  <pws@csr.com>

	* users/12325: Doc/Zsh/builtins.yo, Src/builtin.c:
	implement OSI rules for three- and four-argument test and [ ... ]
	commands and warn users about the problems.

	* users/12305: Doc/Zsh/builtins.yo, Src/init.c,
	Test/A01grammar.ztst: option output wasn't well described;
	"-c" is documented not to set SHIN_STDIN, so don't.

2007-12-11  Clint Adams  <clint@zsh.org>

	* unposted: Completion/Debian/Command/.distfiles: update.

2007-12-11  Peter Stephenson  <pws@csr.com>

	* users/12307: Test/C02cond.ztst: the wretched -N test is
	still problematic; expand the delay to 2 seconds.

	* 24210: Src/builtin.c: "set -o" should abort on failure.

	* unposted: Config/version.mk, Completion/Unix/Command/.distfiles:
	Functions/Zle/.distfiles: 4.3.4-dev-4.

2007-12-10  Peter Stephenson  <pws@csr.com>

	* Vincent Lefevre: 24192: Completion/Unix/Command/_make:
	make GNU make support -include.

2007-12-09  Barton E. Schaefer  <schaefer@zsh.org>

	* 24150 plus unposted: Src/exec.c, Test/D08cmdsubst.ztst:
	Retain exit status of last non-assignment command substitution
	across variable assignment processing so that, in the event of
	no command word to execute, the exit status of the statement is
	that of the last command substitution (per POSIX).

2007-12-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24197: Src/utils.c, Src/Modules/datetime.c: interface to
	ztrftime() for insufficient memory was broken.

2007-12-08  Clint Adams  <clint@zsh.org>

	* 24188: Completion/Unix/Command/_id: completion for GNU id.

	* 24187: Completion/Debian/Command/_members: completion for members.

2007-12-07  Clint Adams  <clint@zsh.org>

	* 24174: Completion/Unix/Command/_cut: Oliver's deuglification
	of 24169.

2007-12-07  Peter Stephenson  <pws@csr.com>

	* Unposted: Src/exec.c: add explanatory comment for 24170/24179.

	* 24180: configure.ac, Src/utils.c: back off (most of) 24148.

	* 24179: Src/exec.c: alter 241770 to use queue_signals().

	* Guillaume Chazarain: 24170: Src/exec.c: block interrupts
	around fork since it may mess with locks.

2007-12-07  Clint Adams  <clint@zsh.org>

	* 24172 (tweaked): configure.ac: check ncurses.h, ncurses/ncurses.h, and
	ncursesw/ncurses.h for curses keys.

	* 24171, 24173: Src/Modules/terminfo.c: define USE_TERMINFO_MODULE when
	ncurses.h, ncurses/ncurses.h, or ncursesw/ncurses.h is present.

2007-12-06  Clint Adams  <clint@zsh.org>

	* 24169: Completion/Unix/Command/_cut: use print in command
	substitution to avoid a literal non-ASCII character in the German
	translation of args for cut completion.

2007-12-05  Clint Adams  <clint@zsh.org>

	* 24160: Src/Modules/terminfo.c, Src/Modules/terminfo.mdd:
	build terminfo module if ncursesw is present but curses.h is not.

2007-12-05  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_ip: typo in "addr replace"
	completion.

2007-12-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24148: configure.ac, Src/utils.c: attempt to use strerror_r()
	to make error messages in signal handle safer.

2007-12-03  Wayne Davison  <wayned@users.sourceforge.net>

	* 24147: Util/difflog.pl: improved the temporary-file handling.

2007-12-03  Peter Stephenson  <pws@csr.com>

	* 24143: Etc/zsh-development-guide, Util/.distfiles:  Remove
	difflog.pl from the distribution owing to security worries
	in usage (but leave it in the archive); also document the
	distfiles business.

2007-12-03  Clint Adams  <clint@zsh.org>

	* 24140: Completion/Unix/Command/_git: spelling fix and
	removal of redundant "config" subcommand as proposed by Wayne.

2007-12-01  Clint Adams  <clint@zsh.org>

	* 24135: Completion/Debian/Command/_make-kpkg: consistently
	complete subcommands with minus signs instead of underscores.

2007-11-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* arno: 24134: Completion/Unix/Command/_find: additional options.

2007-11-29  Peter Stephenson  <pws@csr.com>

	* 24130 (belatedly): Doc/Zsh/calsys.yo,
	Functions/Calendar/.distfiles, Functions/Calendar/calendar,
	Functions/Calendar/calendar_add,
	Functions/Calendar/calendar_parse: abstract calendar_parse from
	calendar and use in calendar_add to be slightly cleverer about
	recurrences.

	* Kohsuke Kawaguchi: 24129: Completion/Unix/Command/_ant:
	skip targets that can't be invoked from the command line.

2007-11-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24128: Test/Y02compmatch.ztst: test for 24127.

	* 24127: Src/Zle/compcore.c, Src/Zle/compmatch.c: fix
	bug with matcher 'r:|[-./_]=* r:|=* l:|=*' completing
	where word on command line starts after a "-".

2007-11-28  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync: Added one more
	option for the upcoming 3.0.0 version of rsync: --contimeout.

2007-11-28  Peter Stephenson  <pws@csr.com>

	* Mustafa Oezkan: 24126: Completion/Unix/Command/_mount:
	additional options.

2007-11-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Ryan F: users/12154: Completion/Unix/Type/_groups: MacOS X
	group completion.

2007-11-26  Peter Stephenson  <pws@csr.com>

	* unposted: Config/version.mk, Completion/Unix/Command/.distfiles:
	changes for 4.3.4-dev-3.

	* 24120: Src/init.c: memory allocation for termcap strings
	was screwy, in particular when terminal couldn't move left.

	* c.f. users/12248: Doc/Zsh/.distfiles: zshcalsys.1 was missing
	from distribution.

2007-11-24  Clint Adams  <clint@zsh.org>

	* 24118: configure.ac: only link against libnsl if we have NIS and
	need it for yp_all, or if we need it for getpwnam.

2007-11-23  Clint Adams  <clint@zsh.org>

	* Markus Waldeck: 24117: Completion/Unix/Command/_uname:
	completion for uname.

2007-11-23  Geoff Wing  <gcw@zsh.org>

	* 24098: Src/Zle/zle_refresh.c: Fix my botch with 23924, rework
	out new prompts and their lengths before use in resetvideo().

2007-11-22  Clint Adams  <clint@zsh.org>

	* unposted: Functions/Prompts/prompt_clint_setup: fix typo in git
	psvar assignment.

	* Sean Finney: 24115: Completion/Unix/Command/_git: offer tags as
	well as heads where refspecs are valid.

	* 24114: Completion/Unix/Command/_git: make colon suffix removable
	after the first part of refspecs.

2007-11-22  Barton E. Schaefer  <schaefer@zsh.org>

	* 24113: Src/params.c: createparamtable() was still messing with
	the internals of the environment even when USE_SET_UNSET_ENV.

2007-11-21  Clint Adams  <clint@zsh.org>

	* arno.: 24111: Completion/Debian/Command/_dlocate: complete -lsbin
	and -lsman options to dlocate.

2007-11-21  Peter Stephenson  <pws@csr.com>

	* 24110: Src/Modules/curses.c: change those includes yet again.

2007-11-20  Peter Stephenson  <pws@csr.com>

	* 24108 plus yet another tweak: configure.ac: the test
	for whether we using ncurses as a library was both wrong
	and in the wrong place.

	* 24107: configure.ac, Src/Modules/curses.c: yet more
	library fun: search for ncurses headers in other places,
	don't use ncursesw/ncurses.h if no multibyte support,
	don't use any ncurses headers if the terminal library
	isn't ncurses.

	* 24104: INSTALL, configure.ac: don't search for ncurses if
	we can't find ncurses.h.

	* 24103: Doc/Makefile.in: ensure zsh.texi is updated if
	the version changes.

	* ????? & 24104: configure.ac: attempt to prevent Tru64 Unix
	from reporting missing symbols when linking dynamically (not
	tested).

	* unposted: run Util/check_exports and add some mod_export tags.

	* unposted: fix .distfiles and version.mk for 4.3.4-dev-2.

2007-11-19  Peter Stephenson  <pws@csr.com>

	* users/12230: Src/Zle/zle_params.c: if killring was set
	to empty array, kringsize was zero but kring was unset,
	causing unhealthy effects in cut().

	* unposted: from Eric Mangold: Completion/Unix/Command/_twisted:
	update.

2007-11-18  Clint Adams  <clint@zsh.org>

	* Nikolai Weibull: 24075: Completion/Unix/Command/_cp: fix
	completion of values for --preserve and --no-preserve.

2007-11-12  Peter Stephenson  <pws@csr.com>

	* 24093: Doc/Zsh/arith.yo: be more accurate about supported
	floating point.

	* 24089: Doc/Zsh/mod_curses.yo, Src/Modules/curses.c:
	compilation on non-curses system; also (unposted) avoid crash
	decoding color when not supported.

	* Vin Shelton: 24088: Src/Modules/curses.c: 24083 error with
	no multibyte.

2007-11-11  Clint Adams  <clint@zsh.org>

	* Nikolai Weibull: 24046: Completion/Unix/Command/_strip: improve
	completion for Solaris and GNU strips.

2007-11-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24083: Doc/Zsh/mod_curses, Src/Modules/curses.c: add
	'zcurses querychar'.

	* 24082: Functionz/Zle/delete-whole-word-match: failed if
	cursor was on whitespace.

	* Mikael Magnusson, 24076; 24081: Doc/Zsh/zle.yo,
	Functions/Zle/backward-kill-word-match,
	Functions/Zle/delete-whole-word-match,
	Functions/Zle/kill-word-match:  need to cancel option
	processing with -- after widget calls with arguments.

2007-11-09  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync: Added missing
	single-letter options for --acls and --xattrs.

2007-11-08  Peter Stephenson  <pws@csr.com>

	* users/12198: Doc/Zsh/mod_complist.yo: make the definition of
	the menu-select widget clearer.

	* unposted: Src/curses.c: typo in parameter setting in
	24073.

2007-11-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24073 (plus tweak to allow "zcurses mouse" with no additional
	arguments): Doc/Zsh/mod_curses.yo, Src/Modules/curses.c:
	add zcurses mouse handling.

2007-11-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24070: Src/utils.c, Test/A03quoting.ztst,
	Test/D07multibyte.ztst: Some fixes for \u handling in
	getkeystring().

2007-11-06  Peter Stephenson  <pws@csr.com>

	* 24069: Doc/Zsh/mod_curses.yo, Src/Modules/curses.c: add
	$zcurses_keycodes.

	* 24068: Src/builtin.c: attempt to make `printf "%g\n" -0'
	output "-0", although this depends on the vagaries of the
	library's strtod() (works on Solaris, doesn't on Fedora 7).

2007-11-04  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync:  Added new options
	for the upcoming 3.0.0 release of rsync.

2007-11-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* c.f. 24050: NEWS: note high resolution timestamps.

	* c.f. 24050: Src/Modules/.cvsignore: add curses_keys.h:

2007-11-01  Oliver Kiddle  <opk@zsh.org>

	* 24050: configure.ac, Src/cond.c, Src/glob.c, Src/system.h:
	handle nanosecond timestamps on systems that support them

	* 24048: Src/hashtable.c: fix home directory expansion with
	NIS on Solaris

	* Frank Benkstein: 24047: Completion/compinit: fix compdef
	with more than three commands using the same service

2007-10-31  Oliver Kiddle  <opk@zsh.org>

	* 24045: Src/params.c: fix memory leak where old value of an
	environment variable isn't freed

2007-10-31  Barton E. Schaefer  <schaefer@zsh.org>

	* 24043: Functions/Prompts/promptinit: emulate -L resets prompt
	options that we don't want reset, so remove it

2007-10-31  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/utils.c: Fixed the use of an uninitialized 'x'
	in spckword() if shout is NULL.

2007-10-31  Clint Adams  <clint@zsh.org>

	* 24039: Completion/Unix/Command/_cut: cope with FreeBSD
	cut in addition to GNU cut.

2007-10-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24038: Doc/Zsh/mod_curses.yo, Src/Modules/curses.c: add
	"zcurses bg".

2007-10-30  Peter Stephenson  <pws@csr.com>

	* users/12149: Doc/Zsh/expn.yo, Src/subst.c,
	Test/D04parameter.ztst:  "${(@s.:.)...}" retains empty
	fields, although "${(s.:.)...}" remains backward compatible.

2007-10-30  Peter Stephenson  <pws@csr.com>

	* 24030, adapted: Src/Modules/curses.c: turning off a key timeout
	on Solaris 8 seemed to need leaving and re-entering cbreak mode.
	This can't be done per-window, so make this specific to Solaris
	not using ncurses.

2007-10-29  Clint Adams  <clint@zsh.org>

	* Markus Waldeck: 24032 (tweaked): Completion/Unix/Command/_cut:
	completion for cut.

2007-10-29  Peter Stephenson  <pws@csr.com>

	* 24029: Src/Modules/curses.c: crashed on attempt to use
	color if it wasn't available.

	* unposted: configure.ac: remove some broken debugging.

2007-10-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24028: Doc/Zsh/mod_curses.yo, Src/Modules/curses.c:
	add "zcurses timeout".

	* 24027: Doc/Zsh/mod_curses.yo, Src/Modules/curses.c:
	add "touch", subwindows, optimized "refresh".

	* 24026: Doc/Zsh/mod_curses.yo, Src/Modules/curses.c:
	handle default/default colorpair and handle color
	default separately if use_default_colors() is available.

	* unposted: Doc/Zsh/mod_curses.yo: Oops, misdescribed the
	effect of getmaxyx().

	* 24025: Doc/Zsh/mod_curses.yo, Src/Modules/curses.c,
	Src/Modules/curses_keys.awk: new zcurses subcommands
	"clear" and "position"; "stdscr" window; numerous other tweaks.

2007-10-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Src/curses.c: zcurses input oops.

	* 24024: configure.ac, Doc/Zsh/mod_curses.yo,
	Src/Modules/curses.c, Src/Modules/curses_keys.awk:  add "zcurses
	input" for single character raw input without echoing.  Test for
	wget_wch for wide character input.  Add handling for keypad()
	mode by scanning header.

2007-10-26  Clint Adams  <clint@zsh.org>

	* 24022: Completion/Debian/Command/_dpkg-repack: completion for
	dpkg-repack by Dr. Markus Waldeck, tweaked a bit.

2007-10-25  Peter Stephenson  <pws@csr.com>

	* c.f. users/12110: Doc/Zsh/params.yo: desperately try to
	get the $SECONDS documentation correct.

	* c.f. users/12109: Doc/Zsh/params.yo: tweak to SECONDS
	documentation for clarity.

	* users/12100: Completion/Unix/Type/_path_files,
	Doc/Zsh/compsys.yo: with NO_CASE_GLOB, use a case-insensitive
	matcher if none is in effect.

2007-10-24  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24018: Doc/Zsh/mod_curses.yo, Src/Modules/curses.c:
	add "zcurses scroll".

	* 24017: Doc/Zsh/mod_curses.yo, Src/Modules/curses.c:
	fold color support into attr subcommand and improve error
	handling; add various readonly parameters; replace strtok();
	tidy some zwarnnam().

2007-10-24  Peter Stephenson  <pws@csr.com>

	* 24016: configure.ac, Src/Modules/curses.c: compilation with
	curses and not ncurses.

2007-10-23  Clint Adams  <clint@zsh.org>

	* 24012: Src/Modules/curses.c: rename "endwin", "c", and "s" to
	"endwin", "char", and "string" respectively.

2007-10-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24011 (tweaked to include 24010 and to remove unneeded
	#define's): Src/Modules/curses.c: fix attr/endwin argument
	counts; verbose errors for wrong arguments; one cchar_t
	should be a wchar_t; dispatch straight to subcommands;
	attr passes back status from setting attributes.

2007-10-23  Clint Adams  <clint@zsh.org>

	* 24010: Src/Modules/curses.c: fix max arguments for 'zcurses
	border' to 1.

2007-10-23  Peter Stephenson  <pws@csr.com>

	* users/12087: Src/glob.c: fix a case where we doing globbing
	unnecessarily to find files case-insensitively in Cygwin.

2007-10-22  Peter Stephenson  <pws@csr.com>

	* 24007: Src/prompt.c, Src/utils.c: mildly suspicious things
	found when looking at crash: prompt allocation length and use
	of "shout".

	* 24006: Src/glob.c: (F) glob qualifier needs to unmetafy.

2007-10-21  Clint Adams  <clint@zsh.org>

	* 24005: Src/Modules/curses.c: enforce min/max arguments on zcurses
	commands.

	* 24004: Doc/Zsh/mod_curses.yo: align documentation with UI changes
	in 24002.

2007-10-20  Clint Adams  <clint@zsh.org>

	* 24002: Src/Modules/curses.c: change all the subcommands from
	option letters to words.

2007-10-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 24001: Src/Modules/curses.c: fix up zcurses -C.

2007-10-20  Clint Adams  <clint@zsh.org>

	* Mikael Magnusson: 23999: Completion/Unix/Command/_git:
	improvements for git show, git rev-parse, et al.

2007-10-19  Clint Adams  <clint@zsh.org>

	* 23997: Src/Modules/curses.c: don't delete color pair hash
	on module unload unless it's been previously initialized.

	* 23994: Completion/Unix/Command/_git: tweaks for 23993.

	* Mikael Magnusson: 23993: Completion/Unix/Command/_git: improved
	completion for git show.

2007-10-19  Geoff Wing  <gcw@zsh.org>

	* 23924: Src/Zle/zle_main.c, Src/Zle/zle_refresh.c: Improve
	synchronising of character attributes with other output routines

2007-10-18  Clint Adams  <clint@zsh.org>

	* Mikael Magnusson: 23991: Completion/Unix/Command/_git: fix
	typo in __git_blobs().

	* Mikael Magnusson: 23988: Completion/Unix/Command/_git: fix
	git-svn commands completion.

	* 23989: Src/Modules/curses.c: add broken zcurses -C to set window
	colors.

2007-10-18  Peter Stephenson  <pws@csr.com>

	* 23986: Doc/Zsh/contrib.yo: zmv example for turning spaces
	into underscores.

	* 23978: configure.ac, Src/Modules/curses.c: use waddwstr() to
	get zcurses -s to work with wide characters.

2007-10-17  Clint Adams  <clint@zsh.org>

	* 23982: Doc/Zsh/mod_curses.yo: documentation for zcurses -A.

	* 23981: Src/Modules/curses.c: add zcurses -A to set window
	attributes.

2007-10-17  Peter Stephenson  <pws@csr.com>

	* 23970 (slightly modified): Doc/Zsh/mod_curses.yo,
	Src/Modules/curses.c: fix up deletion of curses windows and add
	zcurses -i/-e for initialisation and end to retain terminal
	sanity; make "zcurses -r" do a global refresh.

	* Vin Shelton: 23968: Doc/Zsh/mod_curses.yo: overabundance of
	enditem().

2007-10-15  Clint Adams  <clint@zsh.org>

	* 23965: Completion/Unix/Command/_git: add missing bracket in
	completion for git svnimport.

	* 23964: Src/Modules/curses.c: call endwin() in curses module cleanup.

	* 23962: Doc/Zsh/mod_curses.yo, Src/Modules/curses.c: store windows
	in a linked list instead of a static array, and use strings as
	window identifiers instead of integers.

	* 23958: Doc/Zsh/mod_curses.yo, Src/Modules/curses.c: change target
	window to be the first argument of zcurses -a.

	* 23957: Doc/Zsh/mod_curses.yo, Src/Modules/curses.c: minor fixes.

2007-10-14  Clint Adams  <clint@zsh.org>

	* unposted: Doc/Zsh/.distfiles, Src/Modules/.distfiles: update for
	zsh/curses module and documentation.

	* 23954: Doc/Makefile.in, Doc/Zsh/mod_curses.yo: documentation for
	zsh/curses module.

2007-10-14  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Functions/Prompts/prompt_bart_setup: make sure
	localtraps is unset before assigning to functions[TRAPWINCH].

	* users/12008: Functions/Prompts/promptinit: emulate zsh to
	avoid setopts conflicts.  Run precmd and preexec only if they
	are defined as functions.

2007-10-14  Clint Adams  <clint@zsh.org>

	* 23952: Src/Modules/curses.c, Src/Modules/curses.mdd: work with
	non-wide curses as well.

2007-10-13  Clint Adams  <clint@zsh.org>

	* 23947: Functions/Prompts/prompt_clint_setup: remove apm battery
	status and add git branch detection.

	* unposted: Config/aczshoot.m4: quote name of aclocal function.

2007-10-12  Clint Adams  <clint@zsh.org>

	* 23945: Config/aczshoot.m4: autoconf include file for
	budding out-of-tree module support.

2007-10-12  Peter Stephenson  <pws@csr.com>

	* 23943 (slightly modified): INSTALL, configure.ac: search
	ncursesw and document this.

2007-10-11  Clint Adams  <clint@zsh.org>

	* 23927: Src/system.h: don't define struct timezone if
	ZSH_OOT_MODULE is defined.

2007-10-11  Peter Stephenson  <pws@csr.com>

	* 23934: Completion/Base/Completer/_expand_alias:
	if "foo" expands as regular alias to "foo blah", turn this
	into "\foo blah" to avoid the alias kicking in again.

2007-10-08  Clint Adams  <clint@zsh.org>

	* 23923: Src/Modules/curses.c: fold all other curses windowing
	builtins into zcurses.

	* 23919: Src/Modules/curses.c, Src/Modules/curses.mdd:
	have new zcurses builtin replace 4 separate builtins.

2007-10-08  Peter Stephenson  <pws@csr.com>

	* arno: 23910: Completion/Unix/Command/_init_d: handle
	spaces in cases in init scripts.

2007-10-08  Clint Adams  <clint@zsh.org>

	* 23911: configure.ac, Src/Modules/curses.c,
	Src/Modules/curses.mdd: curses windowing module.

2007-10-06  Clint Adams  <clint@zsh.org>

	* Mikael Magnusson: 23907: Completion/Unix/Command/_git: add
	--cached option to git-diff completion.

	* 23908: Completion/Unix/Command/_git: add missing backslash in
	_git-svn.

	* Mikael Magnusson: 23906: Completion/Unix/Command/_git: add
	missing backslash in _git-svn.

2007-10-05  Peter Stephenson  <p.w.stephenson@ntlworld.com

	* unposted, c.f. users/11935: Doc/Zsh/builtins.yo: quoting
	of arguments to unalias.

2007-10-04  Clint Adams  <clint@zsh.org>

	* 23905: Completion/Unix/Command/_git: remove useless gitdir
	assignment and scope array locally in new __git_changed_files
	function.

	* Mikael Magnusson: 23903: Completion/Unix/Command/_git:
	complete both modified and added files for git commit.

2007-10-03  Peter Stephenson  <pws@csr.com>

	* 23900: Src/Zle/compctl.c, Src/Zle/zle_tricky.c: Better handling
	of NO_EQUALS option on old-style completion.

2007-10-02  Peter Stephenson  <pws@csr.com>

	* 23896: configure.ac, INSTALL, README: replace
	--with-curses-terminfo by --with-term-lib, which takes an
	argument; fail if termcap/curses library not found; improve
	installation documentation.

	* 23883: Doc/Zsh/func.yo: try to improve precmd documentation.

	* Daniel Qarras: users/11915: Completion/Unix/Command/_module:
	.version incorrectly quoted as regexp.

2007-10-01  Clint Adams  <clint@zsh.org>

	* Nikolai Weibull: 23889: Completion/Unix/Command/_git: fix -o
	completion in git cvsimport.

	* Nikolai Weibull: 23888: Completion/Unix/Command/_git: complete
	branch names and cached files after git log.

	* Nikolai Weibull: 23879: Completion/Unix/Command/_git: complete
	only cached files after git log.

	* Jesse Weinstein: 23878: Completion/Unix/Command/_ranlib:
	completion for ranlib.

2007-09-30  Clint Adams  <clint@zsh.org>

	* 23875: Completion/Unix/Command/_git: complete heads, tags, and
	files after git log.

	* 23874: Completion/Unix/Command/_git: only declare
	revision_arguments parameter once.

	* Nikolai Weibull: 23871: Completion/Unix/Command/_cdrdao:
	fix __cdrdao-drivers typo.

	* 23872: Completion/Unix/Command/_git: complete git
	config in subcommand position.

	* 23870: Completion/Unix/Command/_git: completion for git
	mergetool.

	* 23868: Completion/Debian/Command/_svn-buildpackage: completion
	for svn-buildpackage.

	* 23867: Completion/Debian/Command/_dpkg-buildpackage: completion
	for dpkg-buildpackage.

	* 23863: Completion/Linux/Command/_lsusb: completion
	for lsusb.

	* 23863: Completion/Unix/Command/_git: remove all
	global variables.

	* 23862: Completion/Unix/Command/_git: declare
	author_conversion_file_arg_spec local.

2007-09-29  Clint Adams  <clint@zsh.org>

	* 23860: Completion/Debian/Command/_dpatch-edit-patch: complete
	patch names, omitting the .dpatch extension.

	* 23854: Completion/Debian/Command/_dpatch-edit-patch: complete
	colon-separated path after -P, other minor tweaks.

	* Julien BLACHE: 23852:
	Completion/Debian/Command/_dpatch-edit-patch: completion for
	dpatch-edit-patch.

	* Pierre Habouzit: 23851: Completion/Unix/Command/_git:
	use ad-hoc functions to list git branches and tags.

2007-09-28  Clint Adams  <clint@zsh.org>

	* 23850: Completion/Unix/Command/_md5sum: complete for GNU md5sum
	instead.

	* Jesse Weinstein: 23848: Completion/Unix/Command/_md5sum:
	completion for md5sum.

2007-09-27  Clint Adams  <clint@zsh.org>

	* Mikael Magnusson: 23838: Completion/Unix/Command/_git:
	have git verify-tag complete tags instead of hash IDs.

	* 23846: Completion/Unix/Command/_git: merge in additional changes
	from Nikolai Weibull's repo.

	* Jun Takimoto: 23814: Completion/Unix/Command/_ls, Command/_ls,
	Completion/BSD/Command/_chflags,
	Completion/Unix/Type/_file_systems, Completion/Unix/Command/_comm:
	fixes for Darwin.

	* 23841: Completion/Unix/Command/_git: complete tag hashes for git
	verify-tag.

2007-09-26  Peter Stephenson  <pws@csr.com>

	* users/11883: Src/init.c: "return" at top level caused
	following precommand functions to return immediately.

2007-09-26  Clint Adams  <clint@zsh.org>

	* 23834: Completion/Unix/Type/_tex: complete tex files for xetex
	and xelatex.

2007-09-25  Clint Adams  <clint@zsh.org>

	* Mikael Magnusson: 23832: Completion/Unix/Command/_git:
	fix git merge -m completion.

	* 23831: Completion/Unix/Command/_git: fix handling of merge
	strategy option.

	* 23829: Completion/Unix/Command/_git: merge in the remaining
	git completion changes from Nikolai Weibull's repository.

	* 23828: Completion/Unix/Command/_git: merge in lots of
	git completion changes from Nikolai Weibull's repository.

	* Mikael Magnusson: 23827: Completion/Unix/Command/_vorbis:
	allow all arguments to options to either immediately follow
	the option letter or be the next word.

2007-09-23  Clint Adams  <clint@zsh.org>

	* 23824: Completion/Unix/Command/_git: merge in git rerere
	completion from Nikolai Weibull's repository.

	* 23823: Completion/Unix/Command/_git: merge in git rev-parse
	completion from Nikolai Weibull's repository.

2007-09-21  Clint Adams  <clint@zsh.org>

	* 23822: Completion/Unix/Command/_git: merge in git rm
	completion fixes from Nikolai Weibull's repository.

2007-09-18  Peter Stephenson  <pws@csr.com>

	* users/11852: Completion/Base/Completer/_expand_alias:
	quotes were incorrectly removed from aliases.

2007-09-13  Clint Adams  <clint@zsh.org>

	* 23813: Src/Zle/zle_hist.c: set vipenultsrchstr to NULL
	after freeing it to avoid vi-mode history search segfaults.

2007-09-05  Peter Stephenson  <pws@csr.com>

	* users/11818: Doc/Zsh/mod_parameter.yo, Src/jobs.c, Src/utils.c,
	Src/Modules/parameter.c:  Allow non-numeric lookup of job
	status parameters.

	* unposted: Functions/Calendar/calendar: make sure there's a
	space between a date of a recurring event and the rest of
	the line.

2007-09-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/11807: Src/exec.c, Src/jobs.c: display of jobs in
	subshells and occasionally in the main shell was screwy.

2007-08-31  Peter Stephenson  <pws@csr.com>

	* 23812: Src/exec.c: ( command & ) caused core dump after 23460.

2007-08-30  Clint Adams  <clint@zsh.org>

	* Chris Lamb: 23810: Completion/Debian/Command/_lighttpd:
	 completion for lighty-{enable,disable}-mod .

2007-08-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23809: Src/Zle/zle_tricky.c: attempt to expand finished
	$'...' expressions before or after the cursor in the
	word being completed.

2007-08-30  Peter Stephenson  <pws@csr.com>

	* 23808: Src/utils.c: debugging to try to isolate intermittent
	problem in wcs_nicechar().

	* 23807: Src/Zle/complist.c, Src/Zle/zle_misc.c: interactive mode
	in completion was fairly seriously broken.

2007-08-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk,
	Completion/Unix/Command/.distfiles,
	Completion/Unix/Type/.distfiles: updates for dev version
	I haven't got around to making yet, but one day soon.

	* 23795: Src/lex.c: make ${(Q)...} handle $'...' correctly,
	up to the problem of long flies in short ointments.

2007-08-23  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Calendar/calendar_show: used subscript
	0 instead of 1, hence broken since 23562.

2007-08-22  Peter Stephenson  <pws@csr.com>

	* 23794: Src/Zle/compresult.c: completing on 'echo "foo$"<TAB>'
	was broken.  The code is as opaque as usual but preventing the
	crash seems straightforward.

	* 23792: Doc/Zsh/expn.yo, Test/D07multibyte.ztst:  test
	and documentation for 23784.

	* 23791: Src/Zle/zle_refresh.c: use VARARR for arrays with
	MB_CUR_MAX.

	* users/11791: Functions/Zle/incremental-complete-word:
	missing "emulate -L zsh": was commented out, not sure why.

2007-08-21  Clint Adams  <clint@zsh.org>

	* 23788: Doc/Zsh/mod_files.yo, Src/Modules/files.c: add -h option
	to chown symlinks rather than targets, and change default behavior
	to do the opposite.

	* Matthieu Moy: 23785: Completion/Unix/Command/_git: add missing
	backslash in _arguments list in git-send-email.

2007-08-21  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Calendar/calendar_scandate: ensure we
	match the first time on the line so as to hook up with date.
	Could usefully be done with the date too, but not as crucial.

	* users/11790: Functions/Zle/{up,down}-line-or-beginning-search:
	emulate -L zsh to avoid nounset problem.

2007-08-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23784: Src/utils.c: Use $'\...' quoting for unparseable and
	unprintable characters when doing backslash quoting.

2007-08-19  Clint Adams  <clint@zsh.org>

	* R.Ramkumar: 23783: Completion/Zsh/Command/_command,
	Completion/Zsh/Command/_hash, Completion/Zsh/Command/_which,
	Completion/Zsh/Context/_equal, Completion/Zsh/Type/_command_names:
	use _path_commands.

	* R.Ramkumar, tweaked: 23782: Completion/Unix/Type/_path_commands:
	commands with descriptions.

	* 23781: Completion/Debian/Command/_dput: base host completion
	on output of `dput -H`.

	* 23780: Completion/Debian/Command/_dput: add -e, -H, and
	optional host argument.

2007-08-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23778: Doc/Zsh/builtins.yo: document KSH_TYPESET behaviour
	in the typeset manual entry.

2007-08-18  Clint Adams  <clint@zsh.org>

	* 23775: Completion/Unix/Command/_growisofs:
	restore completion of devicename=filename pairs after -Z and -M.

2007-08-16  Peter Stephenson  <pws@csr.com>

	* 23764: Doc/Zsh/calsys.yo, Functions/Calendar/calendar,
	Functions/Calendar/calendar_add: allow hidden continuation
	lines in calendar entry and use UID to help with updates.

	* Roy Marples: 23762: configure.ac: need to suppress [...] quoting
	for use of [...] in case.

	* 23761: Doc/Zsh/calsys.yo, Functions/Calendar/calendar:
	calendar -b shows brief output.

2007-08-14  Peter Stephenson  <pws@csr.com>

	* 23759: Doc/Zsh/contrib.yo, Functions/MIME/pick-web-browser:
	a few improvements to pick-web-browser.

	* 23757: Src/lex.c: suppression correction of command
	words immediately followed by () or something that looks
	like it's going to be one.

2007-08-12  Andrey Borzenkov  <bor@zsh.org>

	* 23751: Completion/Linux/Command/_modutils: support for
	completing module files directly

2007-08-09  Clint Adams  <clint@zsh.org>

	* Nikolai Weibull: 23749: Completion/Unix/Command/_cdrdao:
	completion for cdrdao.

	* Nikolai Weibull: 23748: Completion/Unix/Command/_growisofs:
	better completion for growisofs and mkisofs.

2007-08-07  Clint Adams  <clint@zsh.org>

	* 23746: Completion/Unix/Command/_growisofs: partial completion
	for growisofs.

	* 23745: Completion/Unix/Command/_genisoimage: partial completion
	for genisoimage.

2007-08-04  Clint Adams  <clint@zsh.org>

	* Matthieu Moy: 23738: Completion/Unix/Command/_git: additional
	git diff args.

	* 23739: Completion/Unix/Command/_git: merge in git diff
	completion fixes from Nikolai Weibull's repository.

2007-08-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23736: Src/hist.c: status for file save wasnʼt
	initialised.

	* unposted: **/.distfiles: update files for distribution.

2007-07-31  Peter Stephenson  <pws@csr.com>

	* 23733: Src/module.c, Test/V01zmodload.ztst: zmodload -LaF
	didn't include unloaded modules, making it a bit pointless.

	* 23732: Src/exec.c, Test/B02tyepset.ztst: unknown builtin
	error message was broken; test warning output was broken;
	exec of zsh in new env test was broken.

	* 23730: Src/exec.c, Src/params.c, Src/system.h, B02typeset.ztst:
	improve preprocessor and regression tests for 23725.

2007-07-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23726: Test/B02typeset.ztst: test for adding and removing
	of environment variables.

	* 23725: configure.ac, Src/exec.c, Src/params.c, Src/system.h:
	use setenv() and unsetenv() for memory management of the
	environment where possible.

2007-07-29  Clint Adams  <clint@zsh.org>

	* 23720: Completion/Unix/Command/_dvi: handle arguments to dvips -P
	as part of the same word.

	* 23718: Completion/Unix/Command/_dvi: don't use _arguments -s.

2007-07-28  Clint Adams  <clint@zsh.org>

	* 23714: Completion/Unix/Command/_dvi: handle dvips -G, -R, -u, -U,
	-v, -V, -y, and -z.

2007-07-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23713: Doc/Zsh/expn.yo, Misc/globtests, Src/pattern.c,
	Test/D02glob.ztst: add (#cN,M) globbing flag to work like
	{N,M} in regular expressions.

2007-07-27  Clint Adams  <clint@zsh.org>

	* 23712: Completion/Unix/Command/_dvi: handle dvips -j.

2007-07-26  Peter Stephenson  <pws@csr.com>

	* 23703: Src/init.c: getenv() should be zgetenv().

	* 23702: Config/installfns.sh: use chmod to change permissions
	since installing as a programme may try to strip the script.

2007-07-25  Clint Adams  <clint@zsh.org>

	* 23697: configure.ac: use -rdynamic where it seems to be
	available, not based on the value of $host.

2007-07-25  Peter Stephenson  <pws@csr.com>

	* 23696: Src/params.c, Test/D04parameter.ztst: assignment
	to negative subscripts in scalars before the start was broken.
	Now adds at start.

2007-07-24  Peter Stephenson  <pws@csr.com>

	* 23694: Src/cond.c: change of infix condition features to C:
	broke =~.

2007-07-23  Peter Stephenson  <pws@csr.com>

	* 23693: Src/Zle/compmatch.c: _match tried to match the quoted
	form of file names and any completion that did it's own quoting.

2007-07-22  Clint Adams  <clint@zsh.org>

	* 23691: Completion/BSD/Command/_portsnap: declare local parameter
	scope for _arguments state.

2007-07-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Renato Botelho <rbgarga@gmail.com>: 23685:
	Completion/BSD/Command/{_portlint,_csup,_portsnap}:
	new FreeBSD completions.

2007-07-19  Clint Adams  <clint@zsh.org>

	* Magnus Therning + tweaks: 23686: Completion/Unix/Command/_tin:
	respect TIN_HOMEDIR environment variable.

2007-07-17  Peter Stephenson  <pws@csr.com>

	* 23682: Src/module.c: missed cases where m->name should
	be m->node.nam from 23665.

2007-07-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23680: Test/C04funcdef.ztst: tests for 23671.

2007-07-13  Peter Stephenson  <pws@csr.com>

	* 23671: Doc/Zsh/exec.yo, Src/exec.c: Function
	command_not_found_handler can be defined to handle command
	not found.

2007-07-12  Clint Adams  <clint@zsh.org>

	* 23674: Completion/Unix/Command/_git: merge in git clone
	completion fixes from Nikolai Weibull's repository.

2007-07-06  Clint Adams  <clint@zsh.org>

	* 23666: Completion/Debian/Type/_deb_packages:
	redirect stderr from apt-cache --generate pkgnames to
	/dev/null.

2007-07-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23665: Doc/Zsh/builtins.yo,
	Etc/zsh-development-guide,Src/builtin.c, Src/cond.c, Src/exec.c,
	Src/hashtable.c, Src/init.c, Src/jobs.c, Src/mkbltnmlst.sh,
	Src/module.c, Src/params.c, Src/string.c, Src/zsh.h,
	Src/Builtins/rlimits.c, Src/Builtins/sched.c, Src/Modules/cap.c,
	Src/Modules/clone.c, Src/Modules/datetime.c,
	Src/Modules/example.c, Src/Modules/files.c,
	Src/Modules/langinfo.c, Src/Modules/mapfile.c,
	Src/Modules/mathfunc.c, Src/Modules/parameter.c,
	Src/Modules/pcre.c, Src/Modules/regex.c, Src/Modules/socket.c,
	Src/Modules/stat.c, Src/Modules/system.c, Src/Modules/tcp.c,
	Src/Modules/termcap.c, Src/Modules/terminfo.c,
	Src/Modules/zftp.c, Src/Modules/zprof.c, Src/Modules/zpty.c,
	Src/Modules/zselect.c, Src/Modules/zutil.c, Src/Zle/compctl.c,
	Src/Zle/complete.c, Src/Zle/complist.c, Src/Zle/computil.c,
	Src/Zle/deltochar.c, Src/Zle/zle_main.c, Src/Zle/zleparameter.c,
	Test/V01zmodload.ztst:  Finish autoloading of modules;
	make autoloads persistent.  Put modules in hash table.
	Rationalise error handling and error messages.  Improve
	module listing.  Abort at top level of list execution when
	errflag is set instead of relying on called functions returning
	early.

2007-07-06  Clint Adams  <clint@zsh.org>

	* 23664: Completion/Debian/Command/_bts: handle bts cache
	and cleancache subcommands.

2007-07-06  Peter Stephenson  <pws@csr.com>

	* 23660: Doc/Zsh/expn.yo, Src/sort.c, Test/D04parameter.ztst:
	numerical sorting didn't work in reverse, wasn't tested and wasn't
	correctly documented.

	* unposted: Functions/Calendar/calendar_lockfiles: configuration
	appears to reduce collisions between lock attempts in multiple
	windows.

2007-07-05  Peter Stephenson  <pws@csr.com>

	* 23658: Completion/Base/Utility/_combination: bad use
	of index variable exposed by 23553.

2007-07-05  Clint Adams  <clint@zsh.org>

	* 23655: Completion/Unix/Command/_git: merge in git instaweb
	completion from Nikolai Weibull's repository.

	* 23654: Completion/Debian/Command/_reprepro: add completion for
	reprepro.

2007-07-03  Clint Adams  <clint@zsh.org>

	* 23653: Completion/Debian/Command/_apt: add completion for apt-get
	autoremove.

2007-07-03  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/README, Doc/Zsh/mod_cap.yo,
	Doc/Zsh/mod_complete.yo, Doc/Zsh/mod_example.yo,
	Doc/Zsh/mod_files.yo, Doc/Zsh/mod_mapfile.yo,
	Doc/Zsh/mod_zleparameter.yo, Doc/intro.ms, Doc/zshzftpsys.yo,
	Etc/Makefile.in, Functions/Prompts/prompt_adam1_setup,
	Functions/Prompts/prompt_redhat_setup,
	Functions/Prompts/prompt_suse_setup, Functions/Zftp/zfrglob,
	Functions/Zftp/zftp_chpwd, Misc/.distfiles, Misc/bash2zshprompt,
	Misc/c2z, Misc/compctl-examples, Misc/globtests.ksh,
	Misc/job-control-tests, Misc/lete2ctl, Src/Zle/.distfiles,
	Util/preconfig, aclocal.m4: jiggery pokery to force files onto
	main branch (1.X) from vendor branch (1.1.1.X).

2007-07-03  Clint Adams  <clint@zsh.org>

	* 23645: Functions/Zftp/zfautocheck: use == instead of =.

	* 23644: Completion/Unix/Command/_git: merge in git remote
	completion from Nikolai Weibull's repository.

2007-07-02  Clint Adams  <clint@zsh.org>

	* 23640: Completion/Unix/Command/_git: merge in git quiltimport
	completion from Nikolai Weibull's repository.

	* 23639: Completion/Unix/Command/_git: merge in git merge-tree
	completion from Nikolai Weibull's repository.

	* 23629: Etc/FTP-README: change references to "beta" to "dev" or
	"development".

2007-07-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Tomasz Pala: users/11599: Completion/Unix/Command/_ip:
	improvements for VLAN interfaces, deleting addresses,
	abbreviations.

2007-07-01  Clint Adams  <clint@zsh.org>

	* 23628: Completion/Unix/Command/_git: merge in from Nikolai
	Weibull's repository completion for git mktree.

	* 23627: Completion/Unix/Command/_git: merge in from Nikolai
	Weibull's repository fixes for git hash-object, index-pack,
	merge-index.

2007-06-28  Oliver Kiddle  <opk@zsh.org>

	* 23611: Completion/Unix/Command/_ldd, Completion/Unix/Type/_ld_debug:
	new completions for ldd and LD_DEBUG on Solaris and Linux

2007-06-28  Clint Adams  <clint@zsh.org>

	* 23610: Completion/Unix/Command/_git: merge in from Nikolai
	Weibull's repository git describe as well as fixes for
	diff-index, diff-files, and diff-stages.

	* 23609: Completion/Unix/Command/_git: merge in git clean
	completion from Nikolai Weibull's repository.

2007-06-27  Peter Stephenson  <pws@csr.com>

	* 23607: Src/linklist.c, Src/loop.c, Src/module.c, Src/parse.c,
	Src/subst.c, Src/Modules/parameter.c, Src/Zle/compcore.c,
	Src/Zle/computil.c: Rationalise some linked list functions.

2007-06-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23606: Src/mkbltnmlst.sh, Src/module.c, Test/V01zmodload.ztst:
	make all module feature autoloads pass through one function.

2007-06-24  Clint Adams  <clint@zsh.org>

	* 23595: Completion/Unix/Command/_git: merge in git archive
	completion from Nikolai Weibull's repository.

	* 23594: Completion/Unix/Command/_git: merge in git grep
	completion from Nikolai Weibull's repository.

	* 23593: Completion/Unix/Command/_git: merge in git annotate
	completion from Nikolai Weibull's repository.

2007-06-23  Clint Adams  <clint@zsh.org>

	* 23587: Completion/X/Command/_xrandr: completion for
	xrandr.

	* 23586: Completion/Unix/Command/_dmidecode: completion for
	dmidecode.

2007-06-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23585: Src/hist.c: handle errno when handling errors.

2007-06-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23581: Src/hist.c: handle errors in writing history file
	better.

2007-06-22  Clint Adams  <clint@zsh.org>

	* 23580: Completion/Unix/Command/_guilt: rudimentary completion
	for guilt.

2007-06-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23578: Doc/Zsh/builtins.yo, Src/mkbltnmlst.sh, Src/module.c,
	Src/Builtins/rlimits.mdd, Src/Builtins/sched.mdd,
	Src/Modules/cap.mdd, Src/Modules/clone.mdd,
	Src/Modules/datetime.mdd, Src/Modules/example.mdd,
	Src/Modules/files.mdd, Src/Modules/langinfo.mdd,
	Src/Modules/mapfile.mdd, Src/Modules/mathfunc.mdd,
	Src/Modules/parameter.mdd, Src/Modules/pcre.mdd,
	Src/Modules/regex.mdd, Src/Modules/socket.mdd,
	Src/Modules/stat.mdd, Src/Modules/system.mdd, Src/Modules/tcp.mdd,
	Src/Modules/termcap.mdd, Src/Modules/terminfo.mdd,
	Src/Modules/zftp.mdd, Src/Modules/zprof.mdd, Src/Modules/zpty.mdd,
	Src/Modules/zselect.mdd, Src/Modules/zutil.mdd,
	Src/Zle/compctl.mdd, Src/Zle/complete.mdd, Src/Zle/computil.mdd,
	Src/Zle/zle.mdd, Src/Zle/zleparameter.mdd:  make standard
	features autoloadable and use feature notation for predefined
	autoloads.

2007-06-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23575: Src/Modules/newuser.c: yet another problem on AIX:
	need features_ and enables_ functions.

	* unposted, c.f. 23572: Src/modentry.c: bad prototype.

	* 23571: Src/module.c: AIX definitions weren't right.

2007-06-19  Peter Stephenson  <pws@csr.com>

	* 23567: Completion/Base/Utility/_complete_help_generic,
	Completion/Base/Widget/_complete_debug,
	Completion/Base/Widget/_complete_help,
	Completion/Base/Widget/_generic, Doc/Zsh/compsys.yo:
	make help and debugging available for generic widgets
	via _complete_help_generic.

2007-06-19  Clint Adams  <clint@zsh.org>

	* 23569: Completion/Debian/Command/_bts: make 'bts show'
	behave the same as 'bts bugs'.

	* 23568: Completion/Linux/Command/_iwconfig: complete iwconfig
	modu.

2007-06-18  Peter Stephenson  <pws@csr.com>

	* unposted (should be in 23562): Test/C01arith.ztst: stupidity
	strikes again.

	* 23562: README, Doc/Zsh/options.yo, Doc/Zsh/params.yo,
	Src/exec.c, Src/glob.c, Src/options.c, Src/params.c, Src/subst.c,
	Src/zsh.h, Src/Modules/mapfile.c, Src/Modules/parameter.c,
	Src/Zle/complete.c, Test/C01arith.ztst, Test/D05array.ztst,
	Test/D06subscript.ztst, Test/D07multibyte.ztst,
	Test/E01options.ztst: add KSH_ZERO_SUBSCRIPT option to handle
	the currently default behaviour that $array[0] or $string[0]
	is mapped to $array[1] or $string[1] if KSH_ARRAYS is not
	in effect.  Now off by default; returns empty element or
	causes error if used for setting.  Valid ranges that happen
	to include zero are not affected.

2007-06-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Test/D07multibyte.ztst: stop test files from
	cluttering up directory.

	* users/11575: Doc/Zsh/compsys.yo: document use of
	additional completers and insert style with _all_matches

2007-06-15  Peter Stephenson  <pws@csr.com>

	* 23553: Doc/Zsh/arith.yo, Doc/Zsh/builtins.yo, Src/exec.c,
	Src/math.c: should have been committed but weren't.

2007-06-14  Peter Stephenson  <pws@csr.com>

	* users/11568: Functions/Prompts/.distfiles,
	Functions/Prompts/prompt_{adam2,bigfade,elite2,elite,fade,fire}_setup,
	Functions/Prompts/prompt_special_chars: allow UTF-8 versions
	of certain visually striking but uninformative characters.

2007-06-14  Clint Adams  <clint@zsh.org>

	* 23561: Completion/Unix/Command/_git: merge in relevant changes
	from Nikolai Weibull's repo to more appropriately complete after
	'git add'.

2007-06-14  Peter Stephenson  <pws@csr.com>

	* 23560: Doc/Zsh/mod_sched.yo, Src/Builtins/sched.c: improved
	version of 23554 making $zsh_scheduled_events more useful
	for programming.

2007-06-12  Clint Adams  <clint@zsh.org>

	* 23556: Completion/Unix/Command/_rrdtool: completion
	for rrdtool.

	* 23557: Completion/Unix/Command/_git: complete
	filenames after 'git reset <revision>'.

2007-06-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23554: Doc/Zsh/mod_sched.yo, Doc/Zsh/params.yo,
	Src/Builtins/sched.c, Src/Builtins/sched.mdd:
	add $zsh_scheduled_events.

2007-06-12  Clint Adams  <clint@zsh.org>

	* unposted: Completion/Unix/Command/_pkg-config,
	Completion/Unix/Command/_unexpand: remove RCS Id
	comments.

2007-06-12  Peter Stephenson  <pws@csr.com>

	* 23553: Src/params.c: use of unsubscripted array inside
	math evaluation now does something reasonable instead of
	returning 0.

	* 23552: Src/Builtins/sched.c: remove unnecessary debugging
	warning.

2007-06-11  Peter Stephenson  <pws@csr.com>

	* 23543: Completion/Unix/Command/_perforce: work around
	problem adding "..." with hidden prefix.

2007-06-08  Peter Stephenson  <pws@csr.com>

	* 23537: Doc/Zsh/mod_zutil.yo, Src/Module/zutil.c,
	Test/V05styles.ztst:  use hash table for styles and add
	tests.  Apart from ordering of styles by name (patterns
	are still ordered by weight) there should be no effect on
	shell syntax and output.

2007-06-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23535: Src/Module/parameter.mdd: autoload saliases and
	dis_saliases.

2007-06-06  Peter Stephenson  <pws@csr.com>

	* Phil Pennock: 23529: Completion/compdump: quote completion dump
	to prevent global alias expansion.

2007-06-05  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_units: message and tag were
	reversed; always attempt completion with removed prefix
	(a bit problematic if prefix is e.g. "m").

	* From Mikael Magnusson and Phil Pennock: 23521, 23522:
	Completion/Unix/Command/_units: extra locations for
	units data.

2007-06-04  Peter Stephenson  <pws@csr.com>

	* 23519: Completion/Unix/Command/_units: completion for "units".

	* 23518: Doc/Zsh/contrib.yo, Functions/MIME/zsh-mime-handler:
	add find-file-in-path and file-path styles to MIME system.

2007-06-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23511: Src/exec.c, Src/lex.c: error if here document
	too large.

2007-06-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Functions/Calendar/age, Functions/Example/zls:
	some more uses of zsh/stat that should only enable b:zstat.

2007-05-30  Peter Stephenson  <pws@csr.com>

	* 23495: Completion/Base/Completer/_ignored,
	Completion/Base/Completer/_prefix: 23440 broken obscure
	use of subscripting.

2007-05-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Src/module.c: failure adding autoload builtin
	didn't clean up properly.

2007-05-29  Peter Stephenson  <pws@csr.com>

	* 23488: README, Etc/zsh-development-guide, Src/builtin.c,
	Src/init.c, Src/module.c, Src/module/zftp.c, Src/Zle/complete.c,
	Src/Zle/zle_main.c, Src/Zle/zle_thingy.c, Src/Zle/zle_tricky.c:
	tidy up module interface and documentation.

	* 23486: Test/A01grammar.ztst, Test/C03traps.ztst,
	Test/D07multibyte.ztst, Test/E01options.ztst, Test/ztst.zsh:
	Use {fd} syntax to open fd's for tests that won't clash
	with standard fd's.

	* 23485: Completion/Zsh/Command/_zmodload, Src/cond.c,
	Src/exec.c, Src/module.c, Src/params.c: completion for
	zmodload -F; autoloading now requests a specific feature
	from a module.

	* 23482: Src/Modules/tcp.c, Src/Zle/complete.c: more typos.

	* unposted: Doc/Zsh/mod_stat.yo: typo.

	* Phil Pennock: 23480: Src/parse.c: typo in =~ handling.

2007-05-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Not posted but see 23479:Completion/Unix/Command/_chmod,
	Completion/Unix/Command/_chown, Completion/Unix/Command/_cvs,
	Completion/Unix/Type/_list_files, Completion/Zsh/Command/_stat,
	Completion/Zsh/Command/_zstyle,
	Completion/Zsh/Type/_file_descriptors,Doc/Zsh/builtins.yo,
	Doc/Zsh/compsys.yo, Doc/Zsh/mod_stat.yo,
	Etc/zsh-development-guide, Src/builtin.c, Src/cond.c, Src/exec.c
	Src/init.c, Src/mkbltnmlst.sh, Src/mkmakemod.sh, Src/modentry.c,
	Src/module.c, Src/params.c, Src/zsh.h, Src/Builtins/rlimits.c,
	Src/Builtins/sched.c, Src/Modules/cap.c, Src/Modules/clone.c,
	Src/Modules/datetime.c, Src/Modules/example.c,
	Src/Modules/files.c, Src/Modules/langinfo.c,
	Src/Modules/langinfo.mdd, Src/Modules/mapfile.c,
	Src/Modules/mathfunc.c, Src/Modules/parameter.c,
	Src/Modules/pcre.c, Src/Modules/regex.c, Src/Modules/socket.c,
	Src/Modules/stat.c, Src/Modules/system.c, Src/Modules/tcp.c,
	Src/Modules/termcap.c, Src/Modules/terminfo.c, Src/Modules/zftp.c,
	Src/Modules/zprof.c, Src/Modules/zpty.c, Src/Modules/zselect.c,
	Src/Modules/zutil.c, Src/Zle/compctl.c, Src/Zle/complete.c,
	Src/Zle/complist.c, Src/Zle/computil.c, Src/Zle/deltochar.c,
	Src/Zle/zle_main.c, Src/Zle/zle_thingy.c, Src/Zle/zle_tricky.c,
	Src/Zle/zleparameter.c, Test/B02typeset.ztst,
	Test/V01zmodload.ztst, Test/V04features.ztst: add "zmodload -F"
	and internal features support for modules.

	* 23478: Src/Zle/compresult.c: don't run reverse-menu-complete
	if no completion yet.

2007-05-27  Clint Adams  <clint@zsh.org>

	* 23475: Completion/Unix/Command/_cdrecord: call $service
	instead of 'cdrecord', in case we are using wodim.

2007-05-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23471: configure.ac: error names not found properly
	on Linux owing to restrictive test when searching files.

2007-05-23  Peter Stephenson  <pws@csr.com>

	* John Buddery: 23461 plus comment and test: fix race
	setting up multios by blocking SIGCHLD.

	* 23460: Src/exec.c, Src/jobs.c, Test/E01options.ztst:
	fix longstanding problem with multios attached to a
	subshell process.

2007-05-22  Peter Stephenson  <pws@csr.com>

	* Phil Pennock: 23450: Src/Zle/zleparameter.yo: undefined
	widget caused crash in in $widgets special parameter.

2007-05-21  Peter Stephenson  <pws@csr.com>

	* 23447: INSTALL, README, Doc/Zsh/contrib.yo,
	Doc/Zsh/mod_newuser.yo, Doc/Zsh/roadmap.yo: improve documentation
	for the zsh/newuser module and zsh-newuser-install function.

	* 23446: Src/Modules/parameter.c: a typo meant scanning
	alias parameters returned a value the same as the key.

	* Unposted, see discussion around 23431: MACHINES: mention
	multibyte oddity on MacOS.

	* 23440: README, Doc/Zsh/params.yo, Src/params.c,
	Test/D06subscript.ztst: Reverse parameter subscripting
	with (R) now returns the empty string on failure.  Other
	operators are not changed.

2007-05-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23444: Src/builtin.c: print -c/-C didn't take into
	account multibyte characters.

2007-05-17  Clint Adams  <clint@zsh.org>

	* Nikolai Weibull: 23443: Completion/Unix/Command/_vim:
	mark --nofork and -f as redundant.

2007-05-16  Clint Adams  <clint@zsh.org>

	* Ag. D. Hatzimanikas: 23442: Completion/Unix/Command/_vim:
	update for vim 7.1.

2007-05-14  Clint Adams  <clint@zsh.org>

	* Alexander Myodov: 23439: Completion/Unix/Command/_screen:
	complete sessions for -dr, -dR, -Dr, -DR, -dx, and -Dx.

2007-05-14  Peter Stephenson  <pws@csr.com>

	* users/11484: Functions/Misc/zmv: allow renaming $f to $g
	to work if the files are really the same.

	* 23438 (slightly improved to use _call_program):
	Completion/Unix/Type/_printers: improve finding of network
	printers.

	* Noted by Wayne: 23437; Src/params.c: typo in 23436.

2007-05-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23435: Nikolai Weibull: Src/sort.c: bug testing for end
	of sort string when ignoring backslashes.

	* Phil Pennock: unposted: Doc/Zsh/cond.yo: should document
	POSIX regular expressions as extended, not basic.

	* 23436: Src/params.c: handle empty strings for locale
	variables more consistently.

	* 23434: Completion/Unix/Command/_configure: use also
	for config.status.

	* 23433: Src/Zle/zle_main.c: cast for ZMAXTIMEOUT was wrong
	where sizeof(long) > sizeof(int).

2007-05-10  Andrey Borzenkov  <bor@zsh.org>

	* 23409 with extra comment: Src/init.c, Src/utils.c: after ZLE
	displayed "use 'exit' to exit" message, PROMPT_SP will overwrite
	prompt without ZLE knowing about it. Disable PROMPT_SP output if
	message was printed.

2007-05-10  Peter Stephenson  <pws@csr.com>

	* Peter A. Castro: 23408: zftp account handling was broken.

2007-05-08  Peter Stephenson  <pws@csr.com>

	* Phil Pennock + tweaks: 23398 + more tweaks: README,
	Doc/Zsh/builtins.yo, Doc/Zsh/grammar.yo, Src/exec.c, Src/zsh.h,
	Test/A01grammar.ztst: add compatibility options for exec.

2007-05-02  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/mod_pcre.yo, Src/pcre.c: missing
	documentation file (tweaked) plus pointer fixes.

2007-05-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Phil Pennock + tweaks: 23375: configure.ac, Doc/Makefile.in,
	Doc/Zsh/cond.yo, Doc/Zsh/mod_pcre.yo, Doc/Zsh/options.yo,
	Src/cond.c, Src/options.c, Src/parse.c, Src/text.c, Src/zsh.h,
	Src/Modules/pcre.c, Src/Modules/regex.c,  Src/Modules/regex.mdd:
	Add zsh/regex option, =~ syntax and related options
	BASH_REMATCH, NO_CASE_MATCH, RE_MATCH_PCRE.

2007-05-01  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/contrib.yo: typo in widget name.

	* Guillaume Chazarain: 23364: Src/signals.c, Src/signals.h: fix
	race in POSIX signal blocking - use local variables as other forms
	already do.

	* 23363: README (not posted), Doc/Zsh/compsys.yo,
	Src/Zle/computil.c: fake-files style now takes pattern.

2007-04-30  Peter Stephenson  <pws@csr.com>

	* 23339: Src/mem.c: make malloc(0) allocate a single byte
	instead of returning invalid (and unfreeable) memory.

2007-04-27  Peter Stephenson  <pws@csr.com>

	* 23337: Src/Zle/compctl.c: argument to stat() wasn't
	unmetafied so some filenames with non-ASCII characters
	weren't recognised when the type of the file needed testing
	in old-fashioned completion.

2007-04-26  Peter Stephenson  <pws@csr.com>

	* Phil Pennock: 23326: Src/utils.c: with no __STDC_ISO_10646__
	or HAVE_ICONV but with HAVE_NL_LANGINFO and CODESET the
	code wouldn't compile.

2007-04-23  Peter Stephenson  <pws@csr.com>

	* unposted: Src/parse.c: make sure we get "invalid zwc file"
	for a short file (not "wrong version").

	* 23313: Src/parse.c: the shell didn't actually check the version
	of ZWC files anyway.

	* 23312: Src/parse.c, Src/zsh.mdd: ensure parse.c is updated
	when version.h changes in order to pick up changes to ZWC
	files; memset() header of wordcode file to normalise unused words.

	* 23308: Src/text.c: stop tindent becoming negative, which
	causes infinite use of memory; add debug test to see where
	it would become negative.

	* Christoph Bauer: 23310ish: define _INCLUDE__STDC_A1_SOURCE
	for HP/UX.

2007-04-21  Clint Adams  <clint@zsh.org>

	* 23303: Completion/Unix/Command/_date: use _guard.

2007-04-19  Clint Adams  <clint@zsh.org>

	* 23301: Paul Ackersviller: Functions/Misc/add-zsh-hook:
	fix semicolon mistyped as a colon.

	* 23302: Completion/Unix/Command/_subversion: complete properties
	after svn propget and propedit.

2007-04-19  Peter Stephenson  <pws@csr.com>

	* unposted: Config/version.mk: set release string to 4.3.4-dev-0.

	* users/11419: Doc/Zsh/zle.yo,
	Functions/Zle/backward-kill-word-match,
	Functions/Zle/delete-whole-word-match,
	Functions/Zle/kill-word-match, Src/Zle/zle_misc.c,
	Src/Zle/zle_utils.c: allow zle copy-region-as-kill with an
	argument to add text to the kill ring from a widget function.

	* unposted: Functions/Misc/add-zsh-hook: should have been
	added ages ago but wasn't.

	* README, Config/version.mk, Etc/FAQ.yo: release 4.3.4.

2007-04-17  Wayne Davison  <wayned@users.sourceforge.net>

	* users/11424: Functions/Zle/smart-insert-last-word: fixed
	parse error caused by a comment in a math expression.

2007-04-17  Peter Stephenson  <pws@csr.com>

	* users/11421: Src/Zle/complist.c: use of %{...%} in
	completion list formatting was broken.

	* Christoph Bauer: users/11416: Src/utils.c: bad use
	of VARARR confused some compilers.

2007-04-17  Geoff Wing  <gcw@zsh.org>

	* unposted: LICENCE: update year to 2007

2007-04-16  Peter Stephenson  <pws@csr.com>

	* unposted: ChangeLog, README, Completion/Base/Utility/.distfiles,
	Config/version.mk, Functions/Calendar/.distfiles,
	Functions/Misc/.distfiles, Src/.distfiles, Src/sort.c,
	Src/utils.c: prepare for release of 4.3.3.

2007-04-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23278: Src/sort.c, Test/D07multibyte.ztst: Fix
	NUMERICGLOBSORT, broken by 23118.

	* users/11398: Src/zle_move.c: vi-goto-mark was broken
	by multibyte characters.

2007-04-14  Clint Adams  <schizo@debian.org>

	* 23275: Completion/Unix/Command/_date: change order of
	arguments to _arguments so that options will actually be
	completed.

2007-04-13  Peter Stephenson  <pws@csr.com>

	* 23273: Src/params.c, Test/D04parameter.ztst: bad patterns
	in ${var[(r)...]} returned the first element of an array instead
	of the empty string.

	* 23271: Pete Hollobon: Completion/Unix/Command/_sqsh,
	Completion/Unix/Command/.distfiles: new completion.

2007-04-12  Peter Stephenson  <pws@csr.com>

	* 23270: Src/system.h: #define _STRPTIME_DONTZERO to get Solaris
	strptime() to work properly.

2007-04-05  Clint Adams  <clint@zsh.org>

	* 23264: Src/Modules/pcre.c: don't add the -pcre-match
	operator unless the pcre functions are available.

2007-04-02  Peter Stephenson  <pws@csr.com>

	* 23258: Src/Zle/complist.c: debugging added in 23248
	was overaggressive.

	* 23257: Src/subst.c: buffer too short for multibyte
	${(#)...} evaluation.

2007-03-31  Clint Adams  <clint@zsh.org>

	* 23255: Completion/Unix/Command/_module: fix 23253 better.

	* 23253: Erik Johansson: Completion/Unix/Command/_module:
	remove double quotes causing zcompile to choke.

2007-03-30  Clint Adams  <clint@zsh.org>

	* 23252: Completion/Debian/Command/_aptitude: complete for
	"aptitude unhold".

2007-03-30  Peter Stephenson  <pws@csr.com>

	* unposted: Src/Zle/complist.c: better fix for 23248.

2007-03-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23248: INSTALL, Src/utils.c, Src/zsh.h, Src/Zle/complist.c:
	bug with completion lists on last line of group just shorter than
	the line length; if compiled with debugging, ZSH_DEBUG_LOG is used
	for dputs() output.

2007-03-29  Clint Adams  <clint@zsh.org>

	* unposted: Completion/Unix/Command/.distfiles: update
	.distfiles.

2007-03-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23246: Src/Zle/zle_tricky.c: fix completion of redirections that
	occur before the command word.

2007-03-28  Clint Adams  <clint@zsh.org>

	* 23241: Daniel Qarras: Completion/Unix/Command/_module:
	fix for _module.

2007-03-27  Peter Stephenson  <pws@csr.com>

	* unposted: Src/jobs.c: fix uninitialized variable in 23238.

	* 23238: Src/jobs.c: job didn't get deleted from table
	if it wasn't printed, leading to obscure problems with current
	jobs.

2007-03-26  Peter Stephenson  <pws@csr.com>

	* unposted (follow-on from 23228): Doc/Zsh/calsys.yo,
	Functions/Calendar/calendar{,_edit,lockfiles,scandate,showdate}:
	New calendar_edit (looks up file to edit and locks it);
	calendar -a option; calendar_showdate -f fmt option;
	make calendar_lockfiles use zsh/select to get higher resolution
	timer to jitter delay; apply the summer time fix to
	"<month>, <nth> <frob>day" as well; allow "2nd" as an
	ordinal (also 1nd and 3nd, 4nd, ... since we aren't interested
	in checking good English).

2007-03-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* usres/11333: Completion/Unix/Command/_ssh: users-hosts
	didn't limit the hosts properly when the user was matched
	for ssh.

2007-03-24  Clint Adams  <clint@zsh.org>

	* 23236: Daniel Qarras: Completion/Unix/Command/_module:
	enhancements for _module.

2007-03-23  Peter Stephenson  <pws@csr.com>

	* unposted, see followups to 23232: Doc/Zsh/builtins.yo:
	superduper nitpicked version.

	* 23232: Src/module.c, Doc/Zsh/builtins.yo: improve
	warning interface; record that zmodload doesn't flag an error
	on failed loading.

2007-03-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23228: Functions/Calendar/calendar_{scan,show}date: fix
	summer time adjustments for relative times, plus some minor
	tweaks.

2007-03-22  Peter Stephenson  <pws@csr.com>

	* 23226: Completion/Unix/Command/_nice: "nice -n<->" wasn't
	handled.

2007-03-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23224: Src/Zle/zle_refresh.c: fix output of prompt in
	single line ZLE.

2007-03-19  Peter Stephenson  <pws@csr.com>

	* 23221: Martin Koeppe: don't used XTABS if not available.

2007-03-15  Peter Stephenson  <pws@csr.com>

	* 23219: Src/options.c: Ismail Dönmez reported that lower
	casing of I to dotless i in tr_TR.UTF-8 broke option handling.

2007-03-14  Clint Adams  <clint@zsh.org>

	* 23215: Completion/Unix/Command/_module: completion for
	"module".

2007-03-13  Clint Adams  <clint@zsh.org>

	* 23214: Completion/Unix/Command/_subversion: complete files
	after svn commit --file.

2007-02-10  Felix Rosencrantz  <f.rosencrantz@gmail.com>

	* unposted: Completion/Unix/Command/_comm: added -s flag to
	_arguments so completion could deal with combined flags.

2007-03-08  Clint Adams  <clint@zsh.org>

	* 23206: Completion/Unix/Command/_mercurial: completion for hg.

2007-03-05  Clint Adams  <clint@zsh.org>

	* 23205: Doc/Zsh/options.yo: fix misspelling of "effect".

2007-03-01  Peter Stephenson  <pws@csr.com>

	* 23203: Completion/X/Command/_acroread: use -version
	to get version (spotted by Zvi) and fix the other methods
	as fallback.

2007-02-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/compsys.yo: document now useful -t
	option to _regex_words.

	* 23198: Completion/Base/Utility/_values,
	Completion/Base/Utility/_regex_words: make _values -s more
	useful and use for regex completions with non-standard suffixes.

2007-02-27  Clint Adams  <clint@zsh.org>

	* 23196: Completion/Debian/Command/_apt: tweak apt-cache madison
	and --installed.

2007-02-27  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_ip: another typo
	(rule_cmds).

2007-02-26  Peter Stephenson  <pws@csr.com>

	* 23190: Completion/Unix/Type/_net_interfaces: use ifconfig
	on Linux and fall back to old method in order to pick up
	additional interface types.

	* unposted: Completion/Unix/Command/_ip: tweak ip route
	show abbreviations.

2007-02-25  Barton E. Schaefer  <schaefer@zsh.org>

	* 22894 (belated): Completion/Unix/Type/_email_addresses: fix
	muttrc path expansion in search for aliases.

	* unposted (based on users/10881,10884): Doc/Zsh/contrib.yo,
	Functions/Zle/smart-insert-last-word: add auto-previous zstyle,
	make use of auto-suffix-retain, add an always block for cleanup,
	and search unedited text via parameter module $history.

	* unposted: Functions/Misc/zkbd: account for the possibility that
	meta- or alt- key combos could generate a multibyte character.

2007-02-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23186: Completion/Base/Utility/_regex_words,
	Completion/Unix/Command/_ip (tweaked), Doc/Zsh/compsys.yo: add to
	regex completion handling and add new ip completion.

2007-02-25  Barton E. Schaefer  <schaefer@zsh.org>

	* 23176 (tweaked): Doc/Zsh/expn.yo, Src/subst.c: make the (X)
	parameter expansion flag apply to the (#) flag as well, so that
	"character not in range" is not normally a fatal error.  Also
	fix a minor typo in a comment.

2007-02-25  Clint Adams  <clint@zsh.org>

	* 23185: Tobias Gruetzmacher: Completion/Unix/Command/_qemu: qemu
	completion improvements.

2007-02-24  Clint Adams  <clint@zsh.org>

	* 23184: Completion/Unix/Command/_qemu: completion for qemu.

2007-02-22  Clint Adams  <clint@zsh.org>

	* 23183: Completion/Debian/Command/_make-kpkg:
	complete comma-separated list of directories/modules
	for --added-modules.

2007-02-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Src/utils.c: document some limitations of
	getkeystring().

2007-02-16  Peter Stephenson  <pws@csr.com>

	* 23182: Completion/Base/Utility/_arguments: handle
	./configure --help output "--with-foo[=BAR]" by
	using "=-" specifier.

2007-02-14  Clint Adams  <clint@zsh.org>

	* 23178: David Riebenbauer: Completion/Debian/Command/_make-kpkg:
	update for modern versions of make-kpkg.

2007-02-14  Peter Stephenson  <pws@csr.com>

	* 23177: Src/utils.c: print unprintable characters under
	256 in \M- format even in multibyte mode.

2007-02-14  Barton E. Schaefer  <schaefer@zsh.org>

	* 23169 (tweaked): Src/exec.c: upon failure to duplicate file
	descriptors when setting up multios, report error and unwind as
	gracefully as possible.

2007-02-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23172: Src/Zle/zle_tricky.c: typo fixing line wrapping
	in completion displays caused too many lines in multiline
	explanation strings.

2007-02-13  Peter Stephenson  <pws@csr.com>

	* 23168: Src/Modules/tcp.c: error when failing to bind
	to a port didn't use native byte order.

2007-02-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	23165: Src/math.c, Src/utils.c, Doc/Zsh/options.yo: don't
	try to parse base indicators in octal and raise error for
	bases above 36.

2007-02-10  Felix Rosencrantz  <f.rosencrantz@gmail.com>
	* 23164: Src/builtin.c when PUSHD_SILENT is set, don't print anything
	from popd/pushd.

2007-02-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23162: Src/subst.c, D07multibyte.ztst: ${(#)x} didn't
	metafy the result, giving nonsense if x was somewhere between
	128 and 160.

2007-02-08  Peter Stephenson  <pws@csr.com>

	* unposted: README: add note on 23159 to incompatibilities
	section.

	* 23159 plus minor doc tweaks: Doc/Zsh/params.yo, Src/params.c,
	Src/utils.c, Src/Zle/zle_main.c: leave BAUD parameter unset
	by default.

2007-02-07  Peter Stephenson  <pws@csr.com>

	* 23153: Src/utils.c: put back old ztrcmp(), with a comment:
	as we're not doing strcoll() using full wide character conversion
	is overkill.

2007-02-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23152: Src/builtin.c, Src/hashtable.c, Src/module.c,
	Src/options.c, Src/params.c, Src/utils.c: fix ztrcmp()
	to respect MULTIBYTE option and make sorting of printed
	out hash tables more consistent.

2007-02-06  Peter Stephenson  <pws@csr.com>

	* unposted: Src/Zle/complist.c: 23144 could leave an uninitialised
	variable.

2007-02-05  Clint Adams  <clint@zsh.org>

	* 23151: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_monotone: partial completion
	for mtn (monotone) command.

2007-02-03  Clint Adams  <clint@zsh.org>

	* 23150: Completion/Debian/Command/.distfiles,
	Completion/Debian/Command/_cdbs-edit-patch: completion for
	cdbs-edit-patch.

2007-02-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23144: Felix Eckhofer <felix@tribut.de>: Src/Zle/complist.c:
	NULL pointer when ending interactive search in menu select.

	* 23143: Src/string.c, Src/subst.c: =-expansion failed
	when there were metacharacters in the following string,
	but still tried to expand it.  It now succeeds.

2007-02-01  Peter Stephenson  <pws@csr.com>

	* unposted: Src/Sched.c: using 23142 turned up sched bug:
	we could add checksched twice to the timed event list.

2007-01-31  Peter Stephenson  <pws@csr.com>

	* 23142: Doc/Zsh/calsys.yo, Functions/Calendar/calendar,
	Functions/Calendar/calendar_add, calendar_scandate,
	calendar_show, calendar_showdate: enhancements for recurring
	events and relative times and dates in calendar system.

2007-01-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23141: Src/jobs.c: don't refresh the display after
	a printjob() that didn't print anything.

2007-01-29  Clint Adams  <clint@zsh.org>

	* 23140: Completion/Unix/Command/_arping: handle syntax for
	iputils variant as well as whichever arping for which we
	had already been completing.

2007-01-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23136, 23138: Src/utils.c, Test/A03quoting.ztst: 23097 added
	Bnulls for backslashes in $'...' strings but then didn't handle
	them.

2007-01-26  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Zle/zle_tricky.c: fixed the error checking of
	mbrtowc(), whose return value can never be < 0.

	* unposted: Src/subst.c: silenced a compiler warning by making
	an int unsigned.

	* unposted: Src/signals.c: mark an arg as UNUSED().

2007-01-24  Peter Stephenson  <pws@csr.com>

	* unposted: Src/Builtins/sched.c: minor error in sched that no
	one's spotted yet: we deleted a timed function twice if
	there was anything left in the list after we ran an event.

	* 23131: Test/.distfiles, Test/D08cmdsubst.ztst: new tests for
	command substitution.

2007-01-23  Peter Stephenson  <pws@csr.com>

	* 23126, modified: Src/lex.c: errors when deciding between
	$(( and $( were not handled properly and in particular caused
	problems in history expansion in zle.  The code is a little
	obscure; added a comment about this.

2007-01-22  Peter Stephenson  <pws@csr.com>

	* 23122: Src/sort.c: bug with some strings with embedded nulls and
	some not in 23118.

2007-01-22  Peter Stephenson  <pws@csr.com>

	* 23119: Src/sort.c, Test/B03print.ztst, Test/D07multibyte.ztst:
	do lowering of multibyte character case in sorting properly.

2007-01-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23118: Doc/Zsh/expn.yo, Src/builtin.c, Src/glob.c, Src/jobs.c,
	Src/sort.c, Src/subst.c, Src/utils.c, Src/zsh.h, Src/zsh.mdd,
	Src/Zle/compcore.c, Src/Zle/computil.c, Src/Zle/zle_tricky.c,
	Test/B03print.ztst, Test/D04parameter.ztst: improve sorting,
	making it work properly with locales and handling embedded
	nulls consistently.

2007-01-21  Clint Adams  <clint@zsh.org>

	* 23117: arno: Completion/Unix/Command/_yafc:
	strip out erroneous commas.

	* 23116: arno: Completion/Unix/Command/_getmail:
	strip out erroneous commas.

2007-01-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23115: Doc/Zsh/grammar.yo, Src/lex.c, Src/loop.c, Src/parse.c,
	Src/text.c, Src/zsh.h, Test/A01grammar.ztst:  add ";|"
	at end of case statement to cause testing of later patterns.

2007-01-18  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/calsys.yo: typo with parentheses.

	* 23114: Src/subst.c: ${foo:s/bar/rod} was broken (when final
	delimiter is not present).

2007-01-16  Peter Stephenson  <pws@csr.com>

	* users/11113: Completion/Unix/Command/_todo.sh: extend
	project and context completion to ordinary text and complete
	after whitespace in quotes.

2007-01-15  Barton E. Schaefer  <schaefer@zsh.org>

	* 23107, 23109: Config/defs.mk.in: suppress parallel makes.

2007-01-14  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23104: Src/exec.c, Src/zsh.h: fix line numbering in
	users/11111 and tidy up wordcode definitions slightly.

2007-01-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23101: Src/signals.c, Test/C03traps.ztst: ZERR traps
	had various odd features when combined with function returns.

2007-01-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/11111: Doc/Zsh/options.yo, Src/exec.c, Src/options.c,
	Src/zsh.h: add DEBUG_BEFORE_CMD option to run DEBUG traps
	before the command instead of after.

	* 23098: Src/builtin.c, Test/D07multibyte.ztst: print widths
	in printf take account of multibyte characters.

2007-01-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23097: Src/lex.c, Src/utils.c, Src/zsh.h, Src/Zle/compcore.c:
	splitting of $'...' strings in completion.

2007-01-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23091: Doc/Zsh/compctl.yo, Doc/Zsh/contrib.yo: fixes
	for some *roff problems noted by doclifter.

2007-01-05  Peter Stephenson  <pws@csr.com>

	* 23090: configure.ac: make ncurses preferred over curses
	and try not to link to multiple display libraries if not
	necessary.

2007-01-04  Clint Adams  <clint@zsh.org>

	* 23089: R.Ramkumar: Completion/Unix/Command/_mpc:
	relax playlist glob pattern to work with newer versions.

2007-01-04  Peter Stephenson  <pws@csr.com>

	* 23088: Src/builtin.c, Src/zsh.h: Stephane says printf
	formats and arguments should actually be escaped differently.

	* 20386: Src/zsh.h, Test/B03print.ztst: printf should handle
	octal escapes in the '\0NNN' form.

2007-01-02  Clint Adams  <clint@zsh.org>

	* 22817: Frank Terbeck: Completion/Debian/Command/_aptitude:
	update for modern options, add completion of releases.

	* 23080: arno: Completion/X/Command/_qiv: fix -c and -g
	(both were mistakenly -b).

2006-12-19  Peter Stephenson  <pws@csr.com>

	* 23071: Src/utils.c: problem with signed characters with
	no multibyte support.

	* 23070: Test/C02cond.ztst: Skip [[ -N file ]] test on NFS
	file systems.

	* 23067: Doc/Zsh/builtins.yo, Src/jobs.c, Src/signals.c:
	queue traps but handle signals when waiting for jobs or processes,
	unless TRAPSASYNC is set or the wait builtin is in use, so as
	to handle untrapped signals in a timely fashion; document that
	negative or zero process IDs after kill may be handled specially
	by the OS.

2006-12-18  Peter Stephenson  <pws@csr.com>

	* 23054, part: Src/jobs.c: error message for "kill -" with
	no option or signal name was confusing.

2006-12-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23060: Doc/Makefile.in: make everything makes info.

	* 23059: arno: Completion/Debian/Command/_apt-file, also
	.distfiles: new completion.

	* 23058: arno: Completion/X/Command/_mozilla: handle -CreateProfile.

	* 23057: arno: Completion/X/Command/_setxkbmap, also .distfiles:
	new completion.

2006-12-15  Peter Stephenson  <pws@csr.com>

	* users/11083: Doc/Zsh/contrib.yo, Functions/Zle/.distfiles,
	Functions/modify-current-argument,
	Functions/split-shell-arguments: functions for handling spliting
	of shell arguments in ZLE.

2006-12-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23052: Doc/Zsh/builtins.yo, Src/subst.c: multibyte
	characters in typeset -L/R/Z padding.

2006-12-13  Peter Stephenson  <pws@csr.com>

	* 23051: Src/lex.c: using ${(Q)...} on an expression with
	RCQUOTE handling failed when DEBUG was defined.

2006-12-12  Peter Stephenson  <pws@csr.com>

	* users/11079: Doc/Zsh/expn.yo: point out that 1(2##) may not
	work.

2006-12-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/zle.yo: documentation for CUTBUFFER and
	killring ought to be more explicit about their connection.

	* 23044: Src/builtin.c: print -c/-C is yet another version
	of print no one bothered to fix up to handle unmetafication
	properly.

2006-12-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* based on 23038: Completion/Unix/Command/_webbrowser,
	Completion/X/Command/_mozilla: remove firefox from _webbrowser,
	it's handled by Completion/X/Command/_mozilla; add some
	firefox-specific options.

2006-12-08  Clint Adams  <clint@zsh.org>

	* 23039: Completion/X/Command/_mozilla: handle iceweasel as
	firefox.

2006-12-08  Peter Stephenson  <pws@csr.com>

	* 23036: Src/utils.c, Src/Zle/compcore.c, Src/Zle/zle_tricky.c:
	three more fixes for completion using $'...'.

2006-12-04  Peter Stephenson  <pws@csr.com>

	* 23028: configure.ac, Config/defs.mk.in, Doc/Makefile.in:
	use texi2pdf where available.

	* unposted: Doc/Zsh/calsys.yo, Functions/Calendar/age,
	Functions/Calendar/calendar_add,
	Functions/Calendar/calendar_scandate: autoload missing in
	calendar_add; add some date shortcuts for the use of age.

	* 23027: Vin Shelton: Doc/Zsh/calsys.yo: texinfo links were
	reversed.

2006-12-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22026: Src/exec.c,  Src/subst.c, Src/utils.c, Src/zsh.h,
	Src/Zle/compcore.c, Src/Zle/compctl.c, Src/Zle/zle.h,
	Src/Zle/zle_tricky.c: Incomplete fixes for using $'...'
	quoting in completion.

2006-12-01  Peter Stephenson  <pws@csr.com>

	* unposted fixes for previous commit:
	Completion/Unix/Type/_list_files, Doc/Zsh/calsys.yo,
	Functions/Calendar/age: age was broken; fix typos; use
	"always" block to restore stat disability.

	* c.f. 23023: Completion/Unix/Type/_list_files, Doc/.distfiles,
	Doc/Makefile.in, Doc/zsh.yo, Doc/zshcalsys.yo, Doc/Zsh/.distfiles,
	Doc/Zsh/calsys.yo, Doc/Zsh/compsys.yo, Doc/Zsh/intro.yo,
	Doc/Zsh/manual.yo, Doc/Zsh/modules.yo, Doc/Zsh/tcpsys.yo,
	Functions/Calendar/.distfiles, Functions/Calendar/age,
	Functions/Calendar/calendar, Functions/Calendar/calendar_add,
	Functions/Calendar/calendar_lockfiles,
	Functions/Calendar/calendar_read,
	Functions/Calendar/calendar_scandate,
	Functions/Calendar/calendar_show,
	Functions/Calendar/calendar_sort, Src/Modules/datetime.mdd: new
	calendar system with age glob qualifier function; files
	_list_files to be able not to trample over external stat.

2006-11-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23022: Test/ztst.zsh: don't allow WORDCHARS to be exported
	to tests.

	* unposted: Completion/Unix/Command/_perforce: updated to 2006.2.

2006-11-27  Clint Adams  <clint@zsh.org>

	* 23018: Completion/Unix/Command/_darcs: parse out
	section headings from darcs --help.

2006-11-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 23008: Src/exec.c: failure to output error message could
	alter exit status.

2006-11-18  Clint Adams  <clint@zsh.org>

	* 23005: Completion/Unix/Command/_toilet: completion
	for toilet.

2006-11-15  Peter Stephenson  <pws@csr.com>

	* users/10989: Completion/Base/Core/_description,
	Doc/Zsh/compsys.yo: add fake-always style that overrides
	ignored-patterns.

2006-11-14  Peter Stephenson  <pws@csr.com>

	* users/10981: Jean-Rene David <jrdavid@magma.ca>:
	Completion/Unix/Command/_ssh: needs glob_subst to expand
	path for config file.

	* users/10979: Completion/Unix/Command/_ssh: use config file
	from -F option if present.

2006-11-13  Clint Adams  <clint@zsh.org>

	* 22998: Completion/Linux/_acpi: add -s to _arguments.

2006-11-11  Clint Adams  <clint@zsh.org>

	* unposted: update config.guess and config.sub to
	2006-07-02 versions.

2006-11-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22997: Src/builtin.c, Src/subst.c: ${...?...} didn't go through
	proper exit sequence and didn't take account of being in a
	subshell and didn't call exit trap anyway because errflag was set.

2006-11-10  Peter Stephenson  <pws@csr.com>

	* 22993: Completion/Unix/Command/_make: slightly more
	effective version of 22988.

	* 22992: Doc/Zsh/func.yo, Doc/Zsh/builtins.yo, Src/builtin.c:
	make $? available on trap or hook shell exit.

2006-11-09  Peter Stephenson  <pws@csr.com>

	* 22984: Doc/Zsh/func.yo, Src/builtin.c: add zshexit hook
	to 22978.

	* 22988: arno: Completion/Unix/Command/_make: failed on
	special variable names, so use local -h.  Probably not a
	complete fix since the function can run recursivesly for
	include directives which should use the same namespace.

2006-11-08  Peter Stephenson  <pws@csr.com>

	* 22983: Src/builtin.c, Src/init.c: exit could loop for ever
	in two different ways (but not at the same time).

	* 22978 (tweaked): Doc/Zsh/func.yo, Doc/Zsh/options.yo,
	Src/builtin.c, Src/init.c, Src/utils.c, Src/Zle/zle_main.c,
	Test/A05execution.ztst: use <hook>_functions array variables for
	hook functions.

	* 22981: Zvi Har'El: Src/glob.c: 22980 got a get_strarg() wrong in
	glob.c, somehow.

2006-11-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22980: Doc/Zsh/expn.yo, Src/subst.c, Test/D04parameter.ztst,
	Test/D07multibyte.ztst: 22952 messed up optional arguments
	to padding parameter flags.

2006-11-07  Peter Stephenson  <pws@csr.com>

	* 22973: arno: Completion/Unix/Command/_zip: .xpi files are
	zip files.

2006-11-06  Peter Stephenson  <pws@csr.com>

	* 22972: Completion/Zsh/Command/_typeset: autoload completion
	is limited to functions not yet registered.

	* 22971: Src/exec.c, Src/jobs.c: don't allow job control
	on jobs in current shell and sanitize error message used.

2006-11-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22968: Src/builtins.c: print -z and print -s didn't cope
	with the fact that the arguments were unmetafied.

2006-11-03  Peter Stephenson  <pws@csr.com>

	* users/10928: send all "jobs" output to stdout, not shout.

	* 22953: Mikael Magnusson:
	Completion/Base/Widget/_most_recent_file: didn't work if
	file started with a hyphen.

2006-11-02  Peter Stephenson  <pws@csr.com>

	* 22952: Src/glob.c, Src/params.c, Src/subst.c,
	Test/D04parameter.ztst: fix multibyte delimiters for
	arguments to parameter flags and substitution modifiers
	in parameters and glob qualifiers (but not yet substitution
	modifiers in history).

	* 22950: Src/Zle/zle_tricky.c: starting menu completion
	with reverse-menu-complete used the first match instead
	of the last.

2006-11-02  Clint Adams  <clint@zsh.org>

	* 22947: R. Ramkumar: Completion/Unix/Command/_mkdir:
	minor mkdir completion fixes.

2006-11-01  Peter Stephenson  <pws@csr.com>

	* 22934, with modifications (c.f. 22937): INSTALL, README,
	Completion/compinit, Doc/Zsh/expn.yo, Doc/Zsh/options.yo,
	Src/glob.c, Src/hist.c, Src/options.c, Src/subst.c, Src/zsh.h,
	Test/E01options.ztst: add HIST_SUBST_PATTERN option, make
	${.../#%...} anchor at both ends.

2006-11-01  Clint Adams  <clint@zsh.org>

	* 22940: R. Ramkumar: Completion/Unix/Command/_mkdir:
	completion for mkdir.

	* users/9483: Sir Raorn(?): Completion/Unix/Command/_ri:
	completion for ri (ruby documentation viewer).

2006-10-27  Peter Stephenson  <pws@csr.com>

	* 22924: Src/Zle/complist.c, Src/Zle/compresult.c,
	Src/Zle/zle_main.c, Src/Zle/zle_utils.c: fix a couple more
	metafy_line()/unmetafy_line() problems.

	* 22921: Src/compresult.c: obscure crash reveals
	hasbrpsfx() can be called with line unmetafied.

2006-10-30  Peter Stephenson  <pws@csr.com>

	* 22913: Doc/Zsh/params.yo, Src/jobs.c: set $! after a "bg", too.

2006-10-27  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: completion
	of jobs selected from a jobview (e.g. after p4 fix -d -c <change>)
	was broken.

2006-10-27  Clint Adams  <clint@zsh.org>

	* 22914: Completion/Unix/Command/_cdrecord: add wodim to compdef
	line.

2006-10-25  Peter Stephenson  <pws@csr.com>

	* 22911: Src/Zle/zle_tricky.c: need fix from 22877 here, too.

	* arno: Completion/Unix/Command/{_getmail,_yafc,.distfiles}:
	two new completions.

	* unposted: Completion/Debian/Command/.distfiles,
	Completion/Linux/Command/.distfiles,
	Completion/Linux/Type/.distfiles,
	Completion/Unix/Command/.distfiles,
	Completion/Unix/Type/.distfiles, Doc/.cvsignore,
	Functions/Zle/.distfiles: various files missing from
	the distribution.

2006-10-23  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync: the final option
	changes for the imminent 2.6.9 release.

2006-10-20  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_todo.sh: use plain
	mode for getting completino lists.

2006-10-23  Clint Adams  <clint@zsh.org>

	* 22896: Src/Zle/complete.mdd: rename Mandrake to
	Mandriva.

2006-10-20  Clint Adams  <clint@zsh.org>

	* 22888: Completion/Unix/Command/_tardy: completion for
	tardy.

2006-10-19  Peter Stephenson  <pws@csr.com>

	* unposted: Src/utils.c: EOF in ur-22885 should be WEOF.

	* unposted: Completion/Unix/Command/_todo.sh: more places
	where we complete priorities and contexts.

	* quoted in 22885: Src/utils.c: 22544 introduced problems
	with multibyte tokenized strings.

2006-10-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted, c.f. 22833: rename Completion/Mandrake and
	all its works to Completion/Mandriva.

2006-10-16  Peter Stephenson  <pws@csr.com>

	* 22877: Src/Zle/compctl.c: string quoting used QT_NONE
	instead of QT_BACKSLASH.

2006-10-16  Geoff Wing  <gcw@zsh.org>

	* unposted: Doc/Zsh/metafaq.yo, Etc/FAQ.yo: archive.progeny.com
	mirror site is being decommissioned.  Remove from lists

2006-10-15  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Functions/Misc/colors: add several comments about
	other ANSI terminal attributes, cribbed from ECMA-48.

	* unposted: Functions/Zle/keymap+widget: another example.

	* users/10885: Doc/Zsh/zle.yo, Src/Zle/iwidgets.list,
	Src/Zle/zle_utils.c: add widgets auto-suffix-remove and
	auto-suffix-retain for user-defined suffix control.

2006-10-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22874: Functions/Misc/run-help: unquoting wasn't consistent.

2006-10-14  Clint Adams  <clint@zsh.org>

	* 22875: Completion/Debian/Command/_a2utils: Emmanuel Bouthenot,
	tweaked: completion for a2ensite, a2dissite, a2enmod, a2dismod.

2006-10-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22873: Larry P. Shrof: Doc/Zsh/expn.yo: typo.

2006-10-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22860: Completion/Unix/Command/_tar: allow - before first
	argument of tar.

	* 22859: Completion/Base/Utility/_arguments: improved to
	handle all descriptions for zsh configure and GNU tar.

2006-10-10  Peter Stephenson  <pws@csr.com>

	* 22858: Completion/Base/Utility/_arguments: options generated
	from --help text can now be documented.

	* 22851: arno: Completion/Unix/Command/_init_d: "-" can occur
	in script names.

	* 22854: Doc/Zsh/contrib.yo, Functions/Zle/replace-string,
	Functions/Zle/replace-string-again: separate out back end
	as separate widget to repeat replacement.

	* 22853: Src/utils.c: unquoted ^ at end of bindkey string
	treated literally.

	* 22852: Doc/Zsh/compsys.yo: finally document effect of 22191
	(users style overrides use of userdirs).

2006-10-07  Clint Adams  <clint@zsh.org>

	* 22835: Completion/Unix/Command/_pon: tidy up pon bit
	and add poff completion.

2006-10-07  Andrey Borzenkov  <bor@zsh.org>

	* 22831: Src/Zle/comp.h, Src/Zle/compresult.c, Src/Zle/computil.c:
	make CM_SPACE definition global and use it consistently in
	compresults and compdescribe to lay out matches

	* 22839: Completion/Unix/Command/_texinfo: as pointed by
	Vincent Lefevre, info accepts file names as first argument

2006-10-06  Peter Stephenson  <pws@csr.com>

	* 22820: Src/Zle/compresult.c: no, users/10791 wasn't right
	and now I'm bored so this will have to do.

	* users/10791: Src/Zle/compresult.c: accumulated completions
	on single line could cause border disputes resulting in
	skirmishes with cursor position.

2006-10-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22819: Doc/Zsh/compwid.yo, Src/builtin.c, Src/subst.c,
	Src/text.c, Src/utils.c, Src/zsh.h, Src/Zle/compcore.c,
	Src/Zle/compctl.c, rc/Zle/complete.c, Src/Zle/computil.c,
	Src/Zle/zle_tricky.c: rationalise internal quotation,
	upgrade completion use of quotation to start handling $'...'
	(still incomplete), fix bug on completion with active
	RCQUOTES.

2006-10-05  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: improved
	message when not completing after "p4 clients".

	* 22818: Doc/Zsh/params.yo: delimiters in subscript flags
	are like those in parameter substitution.

2006-10-03  Clint Adams  <clint@zsh.org>

	* 22816: Joerg Sommer: Completion/Unix/Command/_pon:
	completion for pon.

	* 22815: Joerg Sommer: Completion/Debian/Command/_invoke-rc.d:
	completion for invoke-rc.d.

2006-10-03  Clint Adams  <clint@zsh.org>

	* 22814: Completion/X/Command/_mplayer: add .mp4 and .flv
	to media file extension list.

	* 22812: R. Ramkumar: Completion/Unix/Command/_bittorrent,
	Completion/Unix/Command/_rsync, Completion/Unix/Command/_ssh,
	Completion/Unix/Command/_wget: utilize _bind_addresses in
	existing completion functions.

	* 22811: R. Ramkumar: Completion/Unix/Type/_bind_addresses:
	helper function to give local IP addresses to which a program
	might bind a socket.

	* 22810: Completion/Unix/Command/_gpg: fix malformed
	--encrypt-to line.

	* 22808: Completion/Debian/Command/_dchroot,
	Completion/Debian/Command/_dchroot-dsa: handle internationalized
	output and choices within brackets.

2006-10-02  Peter Stephenson  <pws@csr.com>

	* unposted: INSTALL: correct opening remarks.

	* 22804: Mikael Magnusson: Functions/Zle/narrow-to-region:
	allow zero-length ranges.

2006-10-01  Clint Adams  <clint@zsh.org>

	* 22803: Roger Leigh: Completion/Debian/Command/_dchroot,
	Completion/Debian/Command/_dchroot-dsa,
	Completion/Debian/Command/_schroot: updates for
	dchroot and schroot completion, and new completion
	for dchroot-dsa.

2006-09-30  Clint Adams  <clint@zsh.org>

	* 22800: Completion/Linux/Type/_fuse_arguments,
	Completion/Linux/Type/_fuse_values,
	Completion/Linux/Type/_wakeup_capable_devices:
	put quotes around "$@".

	* 22799: R. Ramkumar: Completion/Linux/Command/_fusermount:
	change _fusermount to use _fuse_values and _canonical_paths.

	* 22798: R. Ramkumar: Completion/Unix/Command/_bittorrent:
	cleanup and fixes.

	* 22797: R. Ramkumar: Completion/Linux/Type/_fuse_arguments,
	Completion/Linux/Type/_fuse_values: generic FUSE completion
	support functions.

	* 22796: R. Ramkumar: Completion/Unix/Command/_subversion:
	fix misspelling of IPREFIX.

	* 22795: R. Ramkumar: Completion/Unix/Type/_urls:
	handle https urls.

	* 22794: R. Ramkumar: Completion/Linux/Command/_acpitool,
	Completion/Linux/Type/_wakeup_capable_devices: completion for
	acpitool.

2006-09-30  Andrey Borzenkov  <bor@zsh.org>

	* unposted: Src/Zle/compmatch.c: fix thinko in 22787 that changed
	semantic of pattern matching in join_strs

2006-09-29  Vin Shelton  <acs@xemacs.org>

	* 22789: Src/init.c: Source zshenv even if non-interactive.

2006-09-29  Andrey Borzenkov  <bor@zsh.org>

	* 22787: Srz/Zsh/compmatch.c: change calling convention of
	pattern_match to not depend on current implementation that works
	for single byte characters only, thus making it more easy to
	change it later.

2006-09-28  Peter Stephenson  <pws@csr.com>

	* 22783: Frank Terbeck: Src/init.c: don't load zsh/newuser
	unless interactive.

2006-09-27  Peter Stephenson  <pws@csr.com>

	* 22780: Completion/Base/Utility/_arguments:
	Completion/Unix/Command/_todo.sh, Doc/Zsh/compsys.yo,
	Src/Zle/computil.c: _arguments -n sets NORMARG to index of first
	non-option argument (via comparguments -n); use this in _todo.sh.

	* unposted: Completion/Unix/Command/_todo.sh: replace buggy
	search message by completion of projects and contexts.

	* 22778: Completion/Unix/Command/_locate: completion for
	various versions of the locate command.

2006-09-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22765: Src/subst.c, Src/utils.c, Src/ztype.h,
	Src/Zle/zle_main.c: rename some MB_ macros to WC_ since they
	act on wchar_t's.

2006-09-23  Andrey Borzenkov  <bor@zsh.org>

	* unposted: Test/A06assign.ztst, Test/B03print.ztst,
	Test/E01options.ztst, Test/ztst.zsh: as pointed by Bart in 22759,
	locale is already taken care of in test harness; revert 22758
	and add LC_NUMERIC and LC_MESSAGES to list of locale variables to set.

	* 22761: Src/subst.c, Src/Zle/computil.c: make compdescribe
	to consistently use character width when laying out matches.
	This supercedes fix in 22729.

2006-09-22  Andrey Borzenkov  <bor@zsh.org>

	* 22758: Test/A06assign.ztst, Test/B03print.ztst,
	Test/E01options.ztst: force locale to C to avoid test failures
	due to localized output

2006-09-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22752: + Roman Neuhauser: Doc/Zsh/compsys.yo,
	Doc/Zsh/compwid.yo, Doc/Zsh/roadmap.yo: improved introduction
	to completion.

2006-09-21  Peter Stephenson  <pws@csr.com>

	* 22739: arno: Functions/Prompt/promptinit: change test
	for prompt -c to test for theme.

	* 22753: Src/prompt.c, Src/utils.c, Src/Zle/complist.c:
	minor bugs with using characters spotted from warnings on
	Cygwin.

2006-09-20  Peter Stephenson  <pws@csr.com>

	* users/10748: Doc/Zsh/compsys.yo: improve example, make one
	feature clearer.

	* unposted: Completion/Unix/Command/_perforce: add some
	handling for unsupported commands; add p4d completion.

	* 22743: Doc/Zsh/builtis.yo, Src/builtin.c: document the sh
	"set - [args]" -> "set -xv [-- args]" hack and limit it to
	non-native emulation.

	* 22742: Doc/Zsh/expn.yo, Src/subst.c, Src/zsh.h: padding once
	again defaults to character lengths, but (m) flag turns on
	character widths for multibyte characters.

2006-09-17  Clint Adams  <clint@zsh.org>

	* 22728, 22734: Doc/Zsh/mod_parameter.yo, Src/Modules/parameter.c,
	Src/Modules/parameter.mdd, Src/exec.c, Src/zsh.h: $functrace
	parameter for function backtraces.

2006-09-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22729: Src/Zle/computil.c: truncation of description didn't
	handle multibyte characters.

	* 22727: Src/init.c, Src/Zle/zle_main.c: "use 'exit' to exit"
	was suboptimal.

2006-09-16  Andrey Borzenkov  <bor@zsh.org>

	* 22721: Makefile.in: add pdf target

2006-09-15  Clint Adams  <clint@zsh.org>

	* 22719: configure.ac: check for RLIMIT_NICE and
	RTLIMIT_RTPRIO so 22718 will work.

	* 22718: Src/Builtins/rlimits.c: use ulimit -e and -r
	for RLIMIT_NICE and RLIMIT_RTPRIO respectively.

2006-09-15  Peter Stephenson  <pws@csr.com>

	* zsh-users/10720: arno + pws: Functions/Misc/checkmail:
	bad recursive argument handling and need to be safer about
	options.

	* 22715: Src/exec.c: AUTOCONTINUE option never worked.

	* 22713: Src/Zle/zle_tricky.c: word end in math completion context
	was screwy.

	* 22710: README, Doc/Zsh/expn.yo, Src/prompt.c, Src/subst.c,
	Src/utils.c: assume width 1 for control characters; don't
	crash if width of repeated padding string is 0.

2006-09-14  Peter Stephenson  <pws@csr.com>

	* 22692: Doc/Zsh/expn.yo: additional notes on a couple of
	parameter expansion features.

2006-09-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22705: Doc/Zsh/expn.yo, Src/prompt.c, Src/subst.c, Src/utils.c,
	Src/zsh.h, Test/D04parameter.ztst, Test/D07multibyte.ztst:
	make ${(l...)...} and ${(r...)...} padding handle multibyte
	characters including those wider than 1 unit.

2006-09-13  Peter Stephenson  <pws@csr.com>

	* 22704: Completion/Unix/Command/_todo.sh: new completion.

2006-09-12  Peter Stephenson  <pws@csr.com>

	* 22689: Src/subst.c, Test/D04parameter.ztst: untokenize
	strings for substitution in cases like
	${${~:-*}//(#m)*/$MATCH=$MATCH}.  The pattern code tried
	to metafy the tokens, which caused chaos.

2006-09-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Mikael Magnusson: Doc/Zsh/mod_sched.yo: typos.

2006-09-11  Peter Stephenson  <pws@csr.com>

	* 22686: Src/params.c: unset array if assigning numeric
	parameter to it.

2006-09-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22685: Src/builtin.c: printf "%d" \'X should handle multibyte
	characters X.

	* 22684: Src/builtin.c, Src/math.c, Src/params.c, Src/subst.c,
	Src/utils.c, Src/zsh.h, Src/Zle/zle_hist.c, Src/Zle/zle_hist.c,
	Src/Zle/zle_misc.c: rewrite getkeystring() to have something
	approaching an API; printf strings expand octal escapes even
	without a leading zero.

	* 22676, adapted as in 22678: README, Doc/Zsh/mod_sched.yo,
	Src/init.c, Src/subst.c, Src/utils.c, Src/zsh.h,
	Src/Builtins/sched.c, Src/Zle/zle_main.c, Src/Zle/zle_thingy.c:
	make sched events work when waiting for input in zle; allow sched
	to handle the trashzle(); improve the interface to sched both
	internally and externally.

	* 22681: configure.ac, Src/Modules/system.mdd: pass all
	files defining errnos to awk so that it finds them all on
	systems where the list of definitions is fragmented.

2006-09-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22672: arno: Functions/Prompts/prompt_clint_setup,
	Functions/Prompts/prompt_zefram_setup: broken when KSH_ARRAYS
	is on.

2006-08-30  Peter Stephenson  <pws@csr.com>

	* 22660 [slightly tweaked]: Src/Zle/compctl.c: unmetafy
	directory prefix for passing to opendir() and stat().

2006-08-22  Clint Adams  <clint@zsh.org>

	* 22657: Completion/Unix/Command/_tla: update for tla 1.3.5.

2006-08-22  Peter Stephenson  <pws@csr.com>

	* 22656: Src/options.c (slightly tweaked): improve handling of
	monitor option a bit.

2006-08-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* zsh-users/10634: Completion/compinstall: attempt to fix up
	relative paths of completion configuration file.

2006-08-21  Clint Adams  <clint@zsh.org>

	* 22655: Ralph Amissah: Completion/Unix/Command/_sisu:
	completion for sisu.

2006-08-21  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/compsys.yo: extra documentation arising out of
	discoveries by Bart in zsh-users/10626 and 22653.

2006-08-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22651: Src/Zle/complist.c, Src/Zle/zle_tricky.c: failed to
	unmetafy bytes for output.

	* 22650: Src/Modules/zutil.c: when deleting styles, the pointer
	to the last style can become invalid.

	* 22643: Src/Zle/zle_tricky.c: completion in math context was
	broken by searching for multibyte word characters.

	* 22638: Src/Modules/zutil.c: deleting styles in contexts didn't
	remove the style itself if it was the last context.

2006-08-17  Peter Stephenson  <pws@csr.com>

	* 22613: configure.ac, Doc/Zsh/mod_datetime.yo,
	Src/Modules/datetime.c: add strftime -r to use strptime()
	if available.

	* 22612: Src/Zle/complist.c: comment the static variables.

2006-08-16  Peter Stephenson  <pws@csr.com>

	* 22610: Doc/Zsh/mod_zutil.yo, Src/Modules/zutil.c:
	allow zstyle -L with arguments.

2006-08-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22611: Src/Zle/complist.c: bug when scrolling completion
	list with line wider than screen.

2006-08-15  Clint Adams  <clint@zsh.org>

	* 22609: Completion/Unix/Command/_baz: complete for
	switch subcommand.

2006-08-14  Peter Stephenson  <pws@csr.com>

	* 22608: Doc/Zsh/contrib.yo: improvements on 22606.

	* 22606: Doc/Zsh/contrib.yo, Functions/Zle/match-word-context,
	Functions/Zle/match-words-by-style, Functions/Zle/.distfiles: new
	word-context style for word matching, remove out-of-date handling
	for bug.

	* 22605: Src/Zle/complist.c: bug in 22597 noticed by Bart
	when not printing.

2006-08-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22601: Completion/Unix/Type/_list_files: need to unquote
	characters quoted by the completion mechanism.

2006-08-13  Clint Adams  <clint@zsh.org>

	* unposted: Functions/Zle/.distfiles,
	Completion/Unix/Command/.distfiles: update distributed files.

2006-08-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22599: Src/utils.c, Src/zsh.h, Src/Zle/complist.c,
	Src/Zle/compresult.c, Src/Zle/zle_tricky.c: use wide character
	widths in completion.

2006-08-10  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/compsys.yo: trivial typo.

	* 22597: Src/Zle/complist.c, Src/Zle/zle_tricky.c: back off
	two hunks of 22594 which appeared to both unnecessary and
	incorrect.

2006-08-10  Barton E. Schaefer  <schaefer@zsh.org>

	* 22595: Src/Zle/complist.c: paranoid bounds-checking on some
	loop indices.

2006-08-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Functions/Example/pushd: maintain pushdignoredups if
	it was set on entry to the function.  I have a weird sense of
	deja vu about this...

	* 22594: Src/Zle/complist.c, Src/Zle/compresult.c,
	Src/Zle/zle_tricky.c: Attempt to fix some off-by-one errors
	counting lines when a completion list exactly fits the
	display width.

2006-08-09  Peter Stephenson  <pws@csr.com>

	* 22593: Doc/Zsh/contrib.yo, Functions/MIME/zsh-mime-handler: add
	handle-nonexistent style.

2006-08-08  Peter Stephenson  <pws@csr.com>

	* 22592: Functions/TCP/tcp_send, Doc/Zsh/tcpsys.yo: add tcp_send
	-c to behave in a catlike fashion.

2006-08-07  Peter Stephenson  <pws@csr.com>

	* unposted: Src/Zle/complist.c: another bad declaration.

	* 22589: Src/Zle/complist.c: bug in menu selection when displaying
	long lines.

2006-08-06  Clint Adams  <clint@zsh.org>

	* 22588: Completion/Unix/Command/_rake: handle targets
	with colons in their names.

2006-08-04  Peter Stephenson  <pws@csr.com>

	* 22587: INSTALL, MACHINES, NEWS< README: update notes on
	multibyte support and add references to news.

	* 22586: Src/parse.c, Src/utils.c: minor warnings spotted
	on Cygwin: unnecessary static declaration in parse.c, typo in
	set_widearray, also comments on other warnings that are harder
	to avoid.

	* 22585: makepro.awk, Src/utils.c: zsh.exports was missing
	VA_ALIST declarations and some multibyte-related stuff.

	* 22584: Frank Terbeck: Completion/Unix/Type/_tar_archive: even
	GNU tar should complete uncompressed .tar files.

	* 22582: configure.ac: Test for functions needed for multibyte
	mode instead of basing MULTIBYTE_SUPPORT on marginally relevant
	preprocessor definition.  Installation docs still need changing.

	* 22583: Peter A. Castro: Src/Modules/mathfunc.c: Cygwin erand48()
	apparently needs initialisation.

2006-08-03  Peter Stephenson  <pws@csr.com>

	* 22581: Src/prompt.c, Src/utils.c, Src/Zle/complist.c,
	Src/Zle/zle.h, Src/Zle/zle_tricky.c, Src/Zle/zle_utils.c:
	rationalise multibyte conversions to and from wide characters
	to use restartable form.

	* unposted: Completion/Unix/Command/_subversion: import
	directory is optional, so complete URLs also on first argument.

2006-08-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22579: Completion/Unix/Command/_perldoc,
	Completion/Unix/Type/_perl_modules: find .pod files in perl
	include path for documentation.

	* users/10570: Completion/Unix/Command/_subversion: handle "svn
	import" better.

2006-08-02  Peter Stephenson  <pws@csr.com>

	* 22578: README, Doc/Zsh/params.yo, Src/params.c: ensure
	HISTCHARS/histchars never contains non-ASCII characters.

	* unposted: Functions/Zle/history-beginning-search-menu,
	Doc/Zsh/params.yo: yet more tweaks I'm too embarrassed to post:
	^ also needs quoting; clear display on first non-digit character;
	stray / appeared in substitution.

2006-08-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22575: Src/utils.c, Src/ztype.h, Src/Zle/compresult.c,
	Src/Zle/zle.h, Src/Zle/zle_tricky.c, Src/Zle/zle_utils.c:
	multibyte fixes for blashquote() and getzlequery() and
	remove some aliases.

	* 22574: Functions/Zle/history-beginning-search-menu,
	Doc/Zsh/params.yo: ~ also needs quoting and we have to do
	it even if space isn't active.

2006-08-01  Peter Stephenson  <pws@csr.com>

	* 22573: Functions/Zle/history-beginning-search-menu,
	Doc/Zsh/params.yo: smooth the interface to the widget and
	document how to quote metacharacters for reverse array
	subscripting.

	* 22572: Src/pattern.c, Test/D04parameter.ztst: use of (#m)
	was broken with pure strings.

	* users/10564: Completion/Unix/Command/_gpg: use appropriate
	key ring arguments to search key rings.

2006-07-30  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (see users/10559): Functions/Zle/keymap+widget: a
	technique for overriding ZLE widgets only within a selected
	keymap.

2006-07-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22565: Src/compcore.c: Fix bug with menu completion after failed
	accept-and-menu-complete, perhaps.

	* 22562: Src/glob.c, Test/D07multibyte.ztst: make ${...#...} etc.
	understand multibyte characters.

2006-07-29  Barton E. Schaefer  <schaefer@zsh.org>

	* 22561: Functions/Zle/incremental-complete-word: fix display bug
	introduced roughly five years ago when _main_complete was changed
	to remove the leading underscore from $_lastcomp[completer].  Add
	some other commentary.

2006-07-28  Peter Stephenson  <pws@csr.com>

	* 22560: Functions/Zle/history-beginning-search-menu:
	tweak (= hack) to clear menu after use.

	* 22559: Doc/Zsh/contrib.yo,
	Functions/Zle/history-beginning-search-menu: new Zle function.

2006-07-26  Peter Stephenson  <pws@csr.com>

	* 22558: Src/math.c: declaration after statement.

2006-07-25  Peter Stephenson  <pws@csr.com>

	* 22557: Doc/Zsh/options.yo, Misc/globtests, Src/options.c,
	Src/pattern.c, Test/D02glob.ztst, Test/D07multibyte.ztst:
	Turn on multibyte option by default for MULTIBYTE_SUPPORT and fix
	tests and patterns.

	* unposted: Src/pattern.c, Src/utils.c: minor typos in
	22556 found when MULTIBYTE_SUPPORT is not defined.

2006-07-24  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22556: Doc/Zsh/builtins.yo, Functions/Zle/insert-composed-char,
	Src/builtin.c, Src/pattern.c, Src/subst.c, Src/utils.c, Src/zsh.h,
	Src/ztype.h, Src/Zle/zle.h, Src/Zle/zle_main.c,
	Test/D04parameter.ztst, Test/D07multibyte.ztst: Multibyte
	separators and delimiters.

2006-07-18  Clint Adams  <clint@zsh.org>

	* 22554: Jesse Weinstein: Completion/Unix/Command/_vorbiscomment:
	completion for vorbiscomment.

2006-07-18  Peter Stephenson  <pws@csr.com>

	* unposted: **/.distfiles: update distributed files.

2006-07-18  Clint Adams  <clint@zsh.org>

	* 22553: Jesse Weinstein: Completion/Unix/Command/_metaflac:
	completion for metaflac.

2006-07-15  Clint Adams  <clint@zsh.org>

	* 22552: Completion/Unix/Command/_tla: update for tla 1.3.4.

2006-07-12  Peter Stephenson  <pws@csr.com>

	* 22550: Test/A04redirect.ztst, Test/ztst.zsh: put "exec" tests
	in subshells and allow substitution on test output to occur
	after the test.

2006-07-12  Clint Adams  <clint@zsh.org>

	* 22549: Completion/Unix/Command/_subversion:
	improve svn propset completion slightly.

2006-07-11  Peter Stephenson  <pws@csr.com>

	* 22546: Src/parse.c, Test/A04redirect.ztst,
	Test/D07multibyte.ztst: fix bug with {myfd}>... redirection
	syntax introduced in 22544 and tweak tests.

2006-07-10  Peter Stephenson  <pws@csr.com>

	* 22544: README, Doc/Zsh/options.yo, Src/builtin.c, Src/glob.c,
	Src/lex.c, Src/math.c, Src/module.c, Src/options.c, Src/params.c,
	Src/parse.c, Src/subst.c, Src/utils.c, Src/zsh.h, Src/ztype.h,
	Src/Zle/compcore.c, Src/Zle/zle_tricky.c, Test/D07multibyte.ztst:
	Improve use of ztype tests for multibyte characters.  Add
	POSIX_IDENTIFIERS option to control allowability of multibyte
	alphanumeric characters in parameter and module names.

2006-07-09  Clint Adams  <clint@zsh.org>

	* 22543: Completion/Unix/Command/_cssh: completion for
	clusterssh.

2006-07-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22542: Src/parse.c, Src/prompt.c, Src/zsh.h: 22516 was
	overentusiastic about popping the command stack; turn cmdpop()
	and cmdpush() into functions for better maintainability.

2006-07-03  Peter Stephenson  <pws@csr.com>

	* 22537: Makefile.in: rm -rf autom4te.cache on distclean.

2006-06-30  Peter Stephenson  <pws@csr.com>

	* 22529: Doc/Zsh/arith.yo, Src/math.c, Src/utils.c,
	Test/D07multibyte.ztst: multibyte conversion in math expressions.

2006-06-28  Peter Stephenson  <pws@csr.com>

	* 22526: Doc/Zsh/expn.yo, Src/subst.c: enhance${(#)...} to output
	Unicode.

	* 22525: Completion/compinit, Src/hist.c, Src/jobs.c,
	Src/pattern.c, Src/subst.c, Src/utils.c, Src/zsh.h,
	Test/D07multibyte.ztst: lengths and cases of multibyte strings
	in parameters and history.

2006-06-27  Peter Stephenson  <pws@csr.com>

	* 22524: Src/params.c, Test/D07multibyte.ztst: searchable
	subscripts with multibyte characters.

	* 22522: Src/utils.c: infinite loop with invalid character
	in mb_metastrlen().

2006-06-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22519: Test/D07multibyte.ztst: initial multibyte parameter tests.

2006-06-26  Peter Stephenson  <pws@csr.com>

	* 22518: Src/params.c, Src/utils,c, Src/zsh.h,
	Test/B02typeset.ztst: Initial go at making parameter subscripts
	use multibyte characters.

	* 22516: Src/parse.c: error evaluating "func()" didn't pop
	the command stack.

	* 22501: README: missed this bit.

2006-06-24  Clint Adams  <clint@zsh.org>

	* unposted: Completion/Unix/Command/_tar: autoload
	is-at-least in _tar if using GNU tar.

	* 22513: Completion/Unix/Command/_tar: only do that for
	GNU tar >= 1.14.91.

	* 22511: Completion/Unix/Command/_tar,
	Completion/Unix/Type/_tar_archive: complete compressed archive
	filenames for GNU tar even when a compression option is not
	specified.

2006-06-19  Peter Stephenson  <pws@csr.com>

	* 22501: configure.ac: reduce default maximum function depth
	to 1000.

2006-06-17  Barton E. Schaefer  <schaefer@zsh.org>

	* 22492: Functions/Zle/url-quote-magic: properly detect when a new
	word (in the zsh syntax sense) has been started, and thus avoid
	improperly quoting a metacharacter that is the first character of
	a new word.

2006-06-16  Peter Stephenson  <pws@csr.com>

	* unposted: Src/exec.c: remove TODO in exec.c redundant
	since 22474.

2006-06-11  Clint Adams  <clint@zsh.org>

	* 22486: Completion/Debian/Command/_dak: completion for
	dak (the debian-archive-kit).

2006-06-09  Clint Adams  <clint@zsh.org>

	* users/10282: Oliver Kiddle: Completion/Unix/Command/_man:
	complete associated sections with man page names.

2006-06-08  Clint Adams  <clint@zsh.org>

	* unposted: Completion/Debian/Command/_madison: complete the
	same way for rmadison.

2006-06-05  Peter Stephenson  <pws@csr.com>

	* 22484: configure.ac, Src/makepro.awk, Src/system.h, Src/utils.c:
	support varargs.h in addition to stdarg.h.

	* 22483: Src/params.c, Src/Modules/system.c,
	Doc/Zsh/mod_system.yo: add $sysparams to zsh/system.

2006-06-02  Clint Adams  <clint@zsh.org>

	* 22481: Oliver Kiddle: Completion/Unix/Command/_subversion:
	complete svn diff and resolved subcommands.

2006-06-02  Peter Stephenson  <pws@csr.com>

	* 22480: Functions/Misc/zmathfuncdef: autoload functions from
	zsh/mathfunc as needed.

2006-05-31  Clint Adams  <clint@zsh.org>

	* 22479: Completion/Debian/Command/_lintian: _arguments -s.

2006-05-30  Wayne Davison  <wayned@users.sourceforge.net>

	* 22476: Src/pattern.c: silenced some compiler warnings and
	improved the multibyte code a little.

2006-05-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22474: most source files touched: use stdarg.h to implement
	escape handling in error messages properly.

2006-05-30  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync: some option changes
	for the upcoming 2.6.9 release.

2006-05-30  Peter Stephenson  <pws@csr.com>

	* 22473: Src/exec.c: modify zsh-users/10343 to print interpreter
	using nice characters.  Still not very satisfactory.

2006-05-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22470: configure.ac: incorporate extensions to errno.h
	searching found by <johann@myrkraverk.com> trying to maximise
	matches and minimise the risk of finding the wrong file.

	* zsh-users/10343: Src/exec.c: make bad #! interpreters print a
	more informative message.

2006-05-28  Clint Adams  <clint@zsh.org>

	* 22469: R. Ramkumar: Completion/Unix/Command/_mount: use
	_canonical_paths.

	* 22468: R. Ramkumar: Completion/Unix/Command/_mount: fixes and
	updates.

	* 22467: R. Ramkumar: Completion/Unix/Command/_canonical_paths:
	utility function which completes all paths given to it, and also
	tries to offer completions which point to the same file as one of
	the paths given.

2006-05-26  Clint Adams  <clint@zsh.org>

	* 22466: Src/mkmakemod.sh: cope with autoconf 2.60 config.status
	syntax.

	* 22465: Config/defs.mk.in: add datarootdir for substitution
	in order to cope with change in autoconf CVS.

2006-05-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22464: Src/Zle/zle_main.c: an error in prompt substitution could
	cause bad recursion karma.

2006-05-25  Wayne Davison  <wayned@users.sourceforge.net>

	* 22454, Hideki ONO: Completion/Unix/Command/_ls: added support
	for *BSD's version of ls.

2006-05-25  Clint Adams  <clint@zsh.org>

	* 22457, R. Ramkumar: Completion/Unix/Command/_mpc:
	fix buggy quoting of zstyle contexts.

	* 22456, R. Ramkumar: Completion/Unix/Command/_mpc:
	update for mpc 0.11.2.

	* 22455, R. Ramkumar: Completion/Linux/Command/_valgrind:
	update for valgrind 3.1.1.

2006-05-22  Peter Stephenson  <pws@csr.com>

	* 22451: Doc/Zsh/expn.yo: cross-reference ${^spec} in brace
	expansion.

2006-05-20  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_bzr: added a bunch of missing
	options and a couple more missing subcommands.  Also made all the
	long-name options that take args allow a '=' to be used to specify
	the value.

2006-05-20  Clint Adams  <clint@zsh.org>

	* 22450: Completion/Unix/Command/_tcptraceroute: completion for
	tcptraceroute.

	* 22449: Completion/Unix/Command/_tracepath: completion for
	tracepath and tracepath6.

2006-05-19  Peter Stephenson  <pws@csr.com>

	* 22448: Src/Zle/zle_params.c: fix typo in get_rbuffer() that
	could cause crash examining $RBUFFER in completion code.

2006-05-18  Clint Adams  <clint@zsh.org>

	* 22446: Completion/Debian/Command/_bts: acknowledge that
	tags is an alias of tag.

2006-05-12  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_bzr: added a bunch of
	missing subcommands and unified mv/move/rename.

2006-05-12  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/params.yo: improve documentation for $$
	and $PPID.

	* unposted: Doc/Zsh/compsys.yo: document that _list_files
	uses the builtin stat, c.f. 22440.

	* 22440: Completion/Unix/Type/_list_files: loaded zsh/stat
	if not needed, which screwed up external stat programmes.

2006-05-05  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_bzr: fixed the completion
	of "bzr upgrade" and the subcommands that lookup the parent
	URL.  Also added subcommands "checkout" and "update".

2006-05-01  Clint Adams  <clint@zsh.org>

	* 22436: Completion/Unix/Command/_pax: completion for
	OpenBSD pax.

2006-04-30  Clint Adams  <clint@zsh.org>

	* 22435: Completion/Unix/Command/_comm: completion for
	GNU comm.

2006-04-28  Clint Adams  <clint@zsh.org>

	* 22434, intrigeri@boum.org:
	Completion/Linux/Command/_vserver: completion for vserver.

2006-04-26  Clint Adams  <clint@zsh.org>

	* 22433, R. Ramkumar: Completion/Unix/Command/_mpc:
	add completion for --no-status option.

2006-04-25  Peter Stephenson  <pws@csr.com>

	* 22432: Src/pattern.c: bug with backtracking over repeated
	single parameters.

	* 22431: Src/Zle/zle_main.c, Src/Zle/zle_thingy.c,
	Src/Zle/zle_vi.c: expand 22427 to set WIDGET etc. more
	consistently when executing functions.

	* 22429: Src/pattern.c: bug with pure string matching
	introduced by 22408.

	* 22427: Doc/Zsh/zle.yo, Src/Zle/zle_thingy.c: zle <widget> -w
	sets WIDGET etc. to reflect <widget>.

2006-04-24  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* zsh-users/10172: Doc/Zsh/zle.yo, Src/Zle/iwidgets.list,
	Src/Zle/zle_keymap.c: read-command reads a key sequence as
	in normal zle operation but sets REPLY to the result instead
	of executing it.

2006-04-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Functions/Misc/zmathfuncdef: improve recognition
	of parameter expansions.

2006-04-23  Clint Adams  <clint@zsh.org>

	* Francisco Borges: users/10162: updated _aptitude.

	* 22425: Completion/Unix/Command/_surfraw: update for
	new surfraw debsec elvi from Micah Anderson.

2006-04-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/contrib.yo: documentation for 22417.

	* unposted: Doc/Zsh/contrib.yo, Functions/MIME/pick-web-browser:
	add some styles for commands.

	* 22416, tweaked: Doc/Zsh/builtins.yo, Doc/Zsh/contrib.yo,
	Functions/Misc/.distfiles, Functions/Misc/zcalc,
	Functions/Misc/zmathfuncdef, Src/builtin.c, Src/exec.c,
	Src/module,c, Src/math.c, Src/module.c, Src/zsh.h,
	Test/C04funcdef.ztst: user-defined math functions via
	shell functions.

2006-04-14  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_raggle: update for version
	0.4.4

2006-04-13  Clint Adams  <clint@zsh.org>

	* 22418: Completion/Unix/Command/_env,
	Completion/Zsh/Command/_precommand: completion for
	GNU env.

2006-04-11  Peter Stephenson  <pws@csr.com>

	* 22417: Functions/MIME/zsh-mime-handler: also
	allow autocd to work and add *(/) to the default
	execute-as-is.

2006-04-11  Wayne Davison  <wayned@users.sourceforge.net>

	* 22415: Doc/Makefile.in: changed how we call install-info so that
	we work with Debian's (broken) version as well as GNU's version.

2006-04-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22409: Src/pattern.c: fix compilation with --disable-multibyte.

	* 22408: Doc/Zsh/expn.yo, Doc/Zsh/options.yo, Src/options.c,
	Src/pattern.c, Src/utils.c, Src/zsh.h, Src/Zle/zle.h: add
	MULTIBYTE option, (#u) and (#U) globbing flags, and support
	for multibyte characters in patterns.

	* 22407: Functions/MIME/zsh-mime-handler: and it needs NULL_GLOB,
	too.

2006-04-06  Peter Stephenson  <pws@csr.com>

	* 22405: Functions/MIME/zsh-mime-handler: pattern matching
	in 22394 needed tweaking.

2006-04-05  Clint Adams  <clint@zsh.org>

	* 22404: Completion/Unix/Command/_cowsay:
	completion for cowsay.

2006-04-05  Peter Stephenson  <pws@csr.com>

	* 22394, R. Ramkumar, plus doc as 22043:
	Functions/MIME/zsh-mime-handler, Doc/Zsh/contrib.yo:
	execute-as-is style for MIME suffixes.

	* 22393, R. Ramkumar, plus doc, 22402:
	Completion/Unix/Type/_hosts, Doc/Zsh/compsys.yo: use-ip and
	known-hosts-files styles.

	* 22375: Doc/Zsh/expn.yo: somehow the doc got missed out.

2006-04-04  Clint Adams  <clint@zsh.org>

	* 22392: Completion/Linux/Command/_analyseplugin:
	completion for ladspa's analyseplugin.

2006-03-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/10107: Doc/Zsh/jobs.yo: SIGQUIT is ignored by the shell.

2006-03-28  Wayne Davison  <wayned@users.sourceforge.net>

	* 22390: Completion/Unix/Command/_bzr: an improved version
	that completes options and context-sensitive filenames.

2006-03-27  Wayne Davison  <wayned@users.sourceforge.net>

	* SF bug #1262954: Src/jobs.c: fixed a compilation problem
	when HAVE_GETRUSAGE is defined but HAVE_WAIT3 is not.

2006-03-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/10087: Src/parse.c: "case foo in" didn't turn off
	aliases for "in", unlike "for" and "select".

2006-03-26  Clint Adams  <clint@zsh.org>

	* 22386: Completion/X/Command/_acroread: fix acroread
	version detection according to Bart's 22385.

2006-03-25  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Zle/zle_thingy.c: fixed undefined function
	reference (call to zwarnname() should have been zwarnnam()).

2006-03-22  Peter Stephenson  <pws@csr.com>

	* 22375 with tweak from Wayne, 22376: Doc/Zsh/expn.yo,
	Src/subst.c: ${(0)...} splits on null bytes.

2006-03-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* zsh-users/10047 : Doc/Zsh/zle.yo, Src/Zle/zle_thingy.c,
	Functions/Zle/read_from_minibuffer: add and use -K option
	to select keymap for use with widget.

2006-03-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22638: MACHINES: compilation with cc on Irix 6.5.

2006-03-20  Clint Adams  <clint@zsh.org>

	* 22371, 22372: Src/Zle/zle.h, Src/Zle/zle_word.c: use
	only alphanumerics and underscores as word characters
	with vi bindings.

2006-03-20  Peter Stephenson  <pws@csr.com>

	* 22360, 22365: Makefile.in, README, Config/installfns.sh,
	Doc/Makefile.in, Doc/META-FAQ.yo, Doc/zmacros.yo, Doc/zman.yo,
	Doc/zsh.yo, Doc/ztexi.yo, Doc/Zsh/builtins.yo, Doc/Zsh/compsys.yo,
	Doc/Zsh/contrib.yo, Doc/Zsh/expn.yo, Doc/Zsh/files.yo,
	Doc/Zsh/func.yo, Doc/Zsh/index.yo, Doc/Zsh/mod_mathfunc.yo,
	Doc/Zsh/mod_zftp.yo, Doc/Zsh/mod_zselect.yo, Doc/Zsh/options.yo,
	Doc/Zsh/tcpsys.yo, Doc/Zsh/zftpsys.yo, Doc/Zsh/zle.yo: support
	version 2 of Yodl.

2006-03-17  Clint Adams  <clint@zsh.org>

	* 22364: Src/Builtins/rlimits.awk: add 'nice' and
	'rt_priority' rlimits (NICE and RTPRIO).

	* 22366: Src/Zle/zle_word.c: better handling for
	multibyte-character-containing words in vi widgets.

2006-03-16  Clint Adams  <clint@zsh.org>

	* 22349: Completion/X/Command/_nautilus: completion for
	nautilus.

2006-03-13  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Modules/zftp.c: got rid of a compiler warning
	and split two C statements that shouldn't have been on one line.

2006-03-13  Peter Stephenson  <pws@csr.com>

	* users/10013: Util/helpfiles: fix use of zshall for generating.

2006-03-09  Wayne Davison  <wayned@users.sourceforge.net>

	* users/10007: Francisco Borges: Doc/Zsh/options.yo: Added
	missing <D> for HIST_SAVE_BY_COPY.

	* 22335: Src/Zle/zle_thingy.c: fix some compiler warnings and
	ensure that zmod gets restored properly in bin_zle_call().

2006-03-08  Peter Stephenson  <pws@csr.com>

	* 22337: Src/builtin.c: debugging code omitted from 22331.

2006-03-07  Wayne Davison  <wayned@users.sourceforge.net>

	* 22301: Completion/Base/Completer/_expand: enable alises for the
	expansion of $(...) and `...`.

	* 22271 (updated): Src/subst.c, Src/linklist.c, Src/zsh.h: got rid
	of the mult_isarr global from subst.c by using the LinkList's new
	flag integer.

	* unposted: Src/linklist.c, Src/zsh.h: changed the previous-node
	pointer in a "struct linknode" from "last" to "prev".

	* 22331: Src/builtin.c, Src/exec.c, Src/hashtable.c, Src/hist.c,
	Src/init.c, Src/lex.c, Src/linklist.c, Src/module.c, Src/options.c,
	Src/params.c, Src/parse.c, Src/prompt.c, Src/signals.c, Src/subst.c,
	Src/utils.c, Src/zsh.h, Src/Modules/datetime.c,
	Src/Modules/langinfo.c, Src/Modules/mapfile.c,
	Src/Modules/parameter.c, Src/Modules/system.c, Src/Modules/termcap.c,
	Src/Modules/terminfo.c, Src/Modules/zftp.c, Src/Zle/compctl.c,
	Src/Zle/compctl.h, Src/Zle/complete.c, Src/Zle/compresult.c,
	Src/Zle/computil.c, Src/Zle/zle_hist.c, Src/Zle/zle_main.c,
	Src/Zle/zle_params.c, Src/Zle/zle_tricky.c, Src/Zle/zleparameter.c:
	Changed some structures to avoid gcc's type-punned warnings.

2006-03-07  Peter Stephenson  <pws@csr.com>

	* 22328, modified: Completion/Unix/Type/_list_files,
	Completion/Unix/Type/_path_files, Doc/Zsh/compsys.yo,
	Doc/Zsh/compwid.yo, Src/Zle/comp.h, Src/Zle/compcore.c,
	Src/Zle/complete.c:  Option -o to compadd uses match
	strings rather than display strings from -d for sorting;
	_path_files uses _list_files to handle file-list style
	which allows long format file lists.

	* unposted: Config/version.mk: belatedly update version
	to 4.3.2-dev-1 to avoid clash with released version.

2006-03-06  Barton E. Schaefer  <schaefer@zsh.org>

	* 22321 plus tweak: Src/builtin.c, Src/mem.c, Src/params.c:
	optimize 22318 by stealing some ideas from Andrey Borzenkov.

2006-03-06  Peter Stephenson  <pws@csr.com>

	* users/1097: Completion/Zsh/Type/_command_names,
	Doc/Zsh/compsys.yo: rehash style for external commands.

2006-03-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22318: Src/builtin.c: uniquifying special arrays was broken.

	* 22277: Test/C03traps.ztst: missed this.

2006-03-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22317: Src/builtins.c, Src/exec.c: exiting the shell from
	code forked from within a function doesn't maintain the
	exit status.

	* 22277, 22281 plus tweaks: Src/exec.c, Src/jobs.c, Src/signals.c,
	Test/C03traps.ztst: standardize behaviour of using wait builtin
	with trapped signals.

2006-03-02  Peter Stephenson  <pws@csr.com>

	* unposted, but see 22307: configure.ac: turn all
	"test $foo = bar" into "test x$foo = xbar" for safety.

2006-03-01  Peter Stephenson  <pws@csr.com>

	* unposted: MACHINES, README, Config/version.mk: information
	and version number for 4.3.2.

2006-03-01  Wayne Davison  <wayned@users.sourceforge.net>

	* 22313: Src/utils.c: added the missing "mod_export" to
	 the declaration of makecommaspecial().

2006-02-28  Clint Adams  <clint@zsh.org>

	* 22309: Completion/Unix/Command/_surfraw: update for
	new surfraw debsec elvi.

2006-02-28  Peter Stephenson  <pws@csr.com>

	* 22306: configure.ac: fix warning with unset variable
	in test.

	* unposted: zsh-4.3.1, finally.

	* unposted: Completion/Unix/Command/.distfiles: a couple
	of files missing.

	* unposted: Functions/MIME/zsh-mime-handler: typo.

	* unposted: README: doc formats were out of date.

	* 22305 (slightly tweaked): README,
	Completion/Unix/Type/_mailboxes,  Doc/Zsh/compsys.yo:  no default
	for pine-directory since that could cause recursive search mayhem.

2006-02-26  Clint Adams  <clint@zsh.org>

	* 22302, 22303: Completion/Debian/Command/_schroot:
	completion for schroot.

2006-02-24  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync: added the
	options --copy-dirlinks, --no-H, and --no-hard-links.

2006-02-21  Clint Adams  <clint@zsh.org>

	* 22298: Completion/Unix/Command/_diffstat: completion
	for diffstat.

2006-02-20  Clint Adams  <clint@zsh.org>

	* unposted: update config.guess and config.sub to
	2005-08-03 and 2005-07-08, respectively.

	* unposted: Completion/Debian/Command/.distfiles: add
	_linda.

	* 22294: Completion/Unix/Command/_getconf: add GNU libc
	confstrings to getconf completion.

2006-02-20  Peter Stephenson  <pws@csr.com>

	* unposted: 4.3.0-dev-5.

2006-02-20  Clint Adams  <clint@zsh.org>

	* 22289: Completion/Debian/Command/_linda: completion for
	linda.

2006-02-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22285:
	Completion/Unix/Command/_imagemagick: handling of file arguments
	didn't work.
	Doc/Zsh/intro.yo: zshtcpsys and zshcontrib manual pages weren't
	listed.
	Functions/MIME/pick-web-browser: add Firefox.
	Functions/MIME/zsh-mime-setup: take account of handler and flags
	styles when listing.

2006-02-19  Clint Adams  <clint@zsh.org>

	* 22284: configure.ac, Src/glob.c, Src/hashtable.c, Src/init.c,
	Src/params.c, Src/system.h, Src/Modules/stat.c: add
	--disable-dynamic-nss configure switch to disable use of
	getpw*(), getgr*(), initgroups() functions.

2006-02-19  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Zle/compcore.c: made the allocation of a larger
	string in add_match_data() choose a more efficient size.

	* unposted: Completion/Unix/Command/_rsync: added the missing
	-h option for daemon mode.

2006-02-18  Wayne Davison  <wayned@users.sourceforge.net>

	* users/9936: Src/Zle/compcore.c: fixed the newest check for
	invalid characters (it now parses the string as metafied).

2006-02-17  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Test/D04parameter.ztst: a few minor additions.

2006-02-16  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Type/_hosts: weed out hashed-entry
	lines from the known_hosts file (these lines start with a '|').

	* 22275: Doc/Zsh/expn.yo: a few more improvements in the
	discussion of field splitting, the = flag, and SH_WORD_SPLIT.

	* 22273: Src/subst.c, Test/D04parameter.ztst, README: made
	${(A)=name:=word} not split on quoted whitespace and fixed
	a typo in the README.

2006-02-16  Peter Stephenson  <pws@csr.com>

	* 22272: INSTALL, README, Config/version.mk, Etc/CONTRIBUTORS,
	Etc/FAQ.yo: 4.3.0-dev-4.

2006-02-15  Wayne Davison  <wayned@users.sourceforge.net>

	* 22270; Src/subst.c, Test/D04parameter.ztst: fixed a long-standing
	problem with ${name+$array$scalar}.

2006-02-15  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: use zsh to
	match files within directories generated from p4 output, so
	as to get matching control working; style "glob" provides
	backward compatibility.

2006-02-15  Wayne Davison  <wayned@users.sourceforge.net>

	* 22268: Src/subst.c, Test/D04parameter.ztst, Doc/Zsh/expn.yo,
	Doc/Zsh/roadmap.yo: some fixes to variable expansion allows
	${1+"$@"} to work when shwordsplit is set (e.g. when emulating
	sh).  Fixed a couple other minor bugs too.

2006-02-13  Wayne Davison  <wayned@users.sourceforge.net>

	* 22217: Src/Zle/compcore.c: allow the insertion of invalid
	multibyte characters using the $'\123' idiom.

	* 22215: Src/utils.c, Src/Zle/zle_tricky.c: fixed the completion of
	filenames containing commas inside an open bracelist, including the
	ability for the user to manually backslash escape commas.

	* unposted: Src/Zle/computil.c: replaced an algorithm that was
	looking backward for a backslash because that can accidentally
	quote a character after a "\\" sequence.

2006-02-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22235: Eric Mangold: Completion/Unix/Command/_twisted: new
	completion.

	* 22237: Vincent Steman: Completion/Unix/Command/_man: location of
	packaged manual pages on NetBSD.

2006-02-11  Clint Adams  <clint@zsh.org>

	* 22234: Completion/Unix/Command/_quilt: Adeodato Simó's
	quilt completion improvements.

2006-02-09  Wayne Davison  <wayned@users.sourceforge.net>

	* 22206: Src/Zle/zle.h, Src/Zle/zle_misc.c: fixed broken
	suffix-removal in an --enable-multibyte configured zsh.

2006-02-09  Clint Adams  <clint@zsh.org>

	* unposted: Completion/Debian/Command/.distfiles,
	Completion/Linux/Command/.distfiles,
	Completion/Unix/Command/.distfiles: update
	some .distfiles.

	* 22205: Completion/Unix/Command/_make: patch from
	R.Ramkumar to use the argument to -C in make
	completion.

2006-02-07  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync:  One last new option
	for the imminent 2.6.7 release of rsync.

2006-02-07  Peter Stephenson  <pws@csr.com>

	* 22200: Src/jobs.c: process text wasn't unmetafied for output.

	* 22198: README, Src/init.c, Src/params.c, Doc/Zsh/params.yo:
	modify 22195 so that HOME gets set as before in native emulation.

2006-02-06  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Modules/newuser.c: fixed return-without-value
	compiler warning.

2006-02-06  Peter Stephenson  <pws@csr.com>

	* 22196: INSTALL, README, Config/version.mk: development
	version 4.3.0-dev-3

	* 22195: README, Src/init.c, Src/params.c, Src/subst.c,
	Src/utils.c, Src/Modules/newuser.c: don't set HOME in the shell,
	only if passed by the environment; handle the fallout.

2006-02-05  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync:  A few more fixes
	and improvements.

2006-02-05  Clint Adams  <clint@zsh.org>

	* 22193: Completion/Debian/Command/_wanna-build: completion
	for wanna-build.

2006-02-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22192: Danek Duvall: Completion/Unix/Type/_users: also remove
	comments from .ssh/known_hosts.

2006-02-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22191: from Danek Duvall: Completion/Unix/Type/_hosts,
	Completion/Unix/Type/_users: neaten _hosts and make _users
	more consistent.

2006-02-03  Peter Stephenson  <pws@csr.com>

	* 22187: Completion/Unix/Type/_hosts: don't trounce any global
	$hosts; don't use hacky array assignment; do examine
	~/.ssh/known_hosts for default set of hosts to complete.

2006-01-29  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync:  Added new options
	for the upcoming 2.6.7 release of rsync.

2006-01-29  Clint Adams  <clint@zsh.org>

	* 22179: Completion/Unix/Command/_cplay: complete audio files
	and playlists based on a list of file extensions provided
	by Joe Wreschnig.

2006-01-28  Clint Adams  <clint@zsh.org>

	* 22174: Completion/Unix/Command/_vorbis: fix misspelling
	of -Q for oggdec.

2006-01-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22169: Doc/Zsh/zle.yo, Src/Zle/zle_keymap.c: hook function
	zle-keymap-select called when $KEYMAP changes.

2006-01-21  Clint Adams  <clint@zsh.org>

	* 22168: Completion/Debian/Command/_bts: add options and
	handling for new subcommands added in 22166 except for
	cache and cleancache.

	* 22167: Completion/Unix/Command/_cp: completion for
	GNU cp.

	* 22166: Completion/Debian/Command/_bts: add new
	subcommands (clone, submitter, found, notfound, block, unblock,
	user, usertag, package, owner, noowner, reportspam, cache,
	cleancache).

2006-01-18  Clint Adams  <clint@zsh.org>

	* 22165: Doc/Zsh/builtins.yo, Doc/Zsh/expn.yo,
	Doc/Zsh/roadmap.yo: change "zshparams" to "zshparam".

2006-01-17  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/prompt.c:  Fixed 2 free()-related bugs in the
	handling of %D.

2006-01-16  Bart Schaefer  <schaefer@zsh.org>

	* 22110 (slightly tweaked): Completion/Unix/Command/_su: complete
	options, be more clever about determining the shell being used,
	and treat the argument of the -c option as a command (cf. _sh).

2006-01-13  Wayne Davison  <wayned@users.sourceforge.net>

	* 22162: Src/prompt.c, Src/Modules/datetime.c, Src/Modules/stat.c:
	some strings needed to be metafied:  strftime values going into the
	expansion of the prompt, and strftime/username/groupname values
	that were assigned to a variable.

	* unposted: Src/prompt.c, Src/utils.c, Src/Zle/complist.c,
	Src/Zle/zle_utils.c: got rid of some superfluous STOUC() uses, such
	as the onces I recently added for the arg of nicechar() (which can
	handle the int being a negative or positive value).

	* unposted: Src/Zle/zle_refresh.c: fixed an unused-variable
	compiler warning when compiling the non-multibyte version of zsh.

2006-01-12  Clint Adams  <clint@zsh.org>

	* 22159: Completion/Linux/Command/_tpb: completion for tpb.

	* 22153: Completion/Linux/Command/_tpconfig: completion
	for tpconfig.

2006-01-11  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/zsh.h, Src/prompt.c, Src/utils.c,
	Src/Zle/complist.c, Src/Zle/compmatch.c, Src/Zle/zle_main.c,
	Src/Zle/zle_refresh.c, Src/Zle/zle_tricky.c, Src/Zle/zle_utils.c:
	more multibyte cleanup, including the MB_INVALID and MB_INCOMPLETE
	defines to make the mbrtowc() and mbsrtowcs() return values clearer.

2006-01-10  Peter Stephenson  <pws@csr.com>

	* 22151: Src/text.c: a here-string got too many quotes when
	output by which etc.

2006-01-09  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/utils.c, Src/Zle/compmatch.c, Src/Zle/zle_utils.c:
	a little more cleanup of the mbrtowc() code, including a bugfix
	for my new code in sub_match() that needed to check for -2.

2006-01-08  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Zle/zle_refresh.c, Src/Zle/zle_utils.c,
	Src/Zle/complist.c, Src/Zle/compmatch.c: changed the code that
	calls mbrtowc() to deal with its size_t return value as a size_t.
	Also, use STOUC() on char values passed to nicechar(), make sure
	that the mbstate_t object never gets left in an undefined state,
	and fixed a problem in sub_match() when dealing with a character
	that was assembled from multiple bytes.

	* 22140 (modified): Src/utils.c: Changed mb_niceformat() so that it
	does not truncate a name that has an invalid character sequence in
	the current character set (affected chars display as \M-... chars).

	* unposted: configure.ac: got rid of probe for wcswidth() and added
	probes for fchown() and fchmod() (the latter changes were accidentally
	left out of my 22091 patch).

	* unposted: Src/utils.c, Src/system.h: Changed the single spot
	that used wcswidth() over to use wcwidth() and got rid of the
	work-around for OpenBSD (which lacks wcswidth()).

2006-01-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22146: Functions/Zle/define-composed-chars: typo in AE and OE
	ligatures.

2006-01-06  Peter Stephenson  <pws@csr.com>

	* 22124: Src/Zle/zle_hist.c, Src/Zle/zle_misc.c: feep()
	if getrestchar() indicates bad character.

	* 22123: configure.ac, Src/system.h: probe for wcswidth() and
	assume 1 if not found.

2006-01-05  Peter Stephenson  <pws@csr.com>

	* 22118: Doc/Zsh/builtins.yo: fix documentation for what
	happens when . does or does not appear in $cdpath.

2006-01-04  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: when deleting
	 a fix, complete only jobs for the changelist given; when
	 deleting changes, unless -f is given complete only changes
	 on the current client.

2006-01-02  Clint Adams  <clint@zsh.org>

	* 22113: Completion/Unix/Command/_last: allow single option
	characters to be combined.

2005-12-26  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Doc/Zsh/options.yo: A couple more improvements to the
	HIST_SAVE_BY_COPY section.

2005-12-25  Clint Adams  <clint@zsh.org>

	* 22104, 22105: Completion/Unix/Command/_ssh: add
	support for new options such as ControlMaster and
	ControlPath, and for -M, -S, -O switches.

2005-12-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Scott Murray <semurray@ntlworld.com>:
	Completion/Redhat/Command/_yum: update.

2005-12-19  Peter Stephenson  <pws@csr.com>

	* 22082: Src/Modules/stat.c: print out UID or GID instead
	of ??? if the user or group name is unavailable.

2005-12-18  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Etc/FAQ.yo, Doc/Zsh/contrib.yo: Changed some UTF-8
	closing-single-quotes into ASCII apostrophes.

2005-12-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22095: INSTALL, Etc/FAQ.yo: more multibyte notes.

2005-12-17  Wayne Davison  <wayned@users.sourceforge.net>

	* 22091: Src/hist.c: improved HIST_SAVE_BY_COPY to have it (1)
	preserve the group and permissions on the history file, and (2)
	refuse to re-copy the history file if zsh's euid differs from
	the file's uid (to avoid changing the file's owner).

2005-12-15  Peter Stephenson  <pws@csr.com>

	* 22085 and back off 22075: Src/system.h, Src/utils.c: we
	may need <langinfo.h> even with MULTIBYTE_SUPPORT to get iconv.

	* 22076: INSTALL, Etc/FAQ.yo: more information on multibyte
	handling.

	* users/9788: Doc/Zsh/expn.yo, Src/glob.c: add (oN) qualifier
	for no sorting.

2005-12-14  Bart Schaefer  <schaefer@zsh.org>

	* 21814: Src/loop.c, Src/signals.c: if an error occurs in an
	inline trap, set $? to 1, to match the behavior of pre-4.2
	versions of zsh.  If and only if the trap is executed within the
	"try" part of an "always" construct, also propagate the error
	condition so that the "try" section is aborted.  (Belated commit.)

2005-12-14  Wayne Davison  <wayned@users.sourceforge.net>

	* 22078: Src/utils.c: made ucs4toutf8() a static function (when
	it's even defined).

2005-12-14  Peter Stephenson  <pws@csr.com>

	* 22075: Src/utils.c: assume the effect of __STDC_ISO_10646__ for
	character conversion when --enable-multibyte is in effect (since
	we do everywhere else).

2005-12-12  Peter Stephenson  <pws@csr.com>

	* unposted: Config/version.mk: aargh, didn't commit this for
	4.3.0-dev-2.

2005-12-12  Wayne Davison  <wayned@users.sourceforge.net>

	* 22071: Src/Zle/zle_hist.c: fixed a bug in zle_setline() where
	it would set zlecs to -1 for an empty line. (Reported by Jun T.)

2005-12-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22069: Src/Zle/complist.c: completion listings didn't get
	unmetafied.

2005-12-10  Clint Adams  <clint@zsh.org>

	* 22068: Completion/Debian/Command/_debdiff: completion
	for debdiff.

2005-12-09  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Modules/newuser.c: fixed return-without-value
	compiler warning.

2005-12-09  Oliver Kiddle  <opk@zsh.org>

	* Completion/Unix/Command/_surfraw, Completion/Unix/Command/_arp,
	Completion/Unix/Command/_joe, Completion/Unix/Command/_quilt,
	Completion/Debian/Command/_mergechanges: reindent and use lowercase
	letters for descriptions

	* unposted: Completion/Unix/Command/_mh: better completion for sortm

	* unposted: configure.ac: require autoconf 2.53b

2005-12-09  Clint Adams  <clint@zsh.org>

	* 22065: Functions/TCP/tcp_read: cope with TCP output that
	starts with "--".

2005-12-09  Peter Stephenson  <pws@csr.com>

	* 22058: NEWS, Doc/Zsh/roadmap.yo: tweak docs for release.

	* 22057: Doc/Zsh/mod_newuser.yo, Src/options.c,
	Src/Modules/newuser.c: make it explicit that zsh/newuser isn't
	used during emulation.

2005-12-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22056: Functions/MIME/zsh-mime-handler: restore original default
	settings for current-shell and never-background styles.

2005-12-07  Clint Adams  <clint@zsh.org>

	* 22054: Completion/Linux/Command/_fusermount:
	completion for fusermount.

	* 22055: Completion/Linux/Command/_sshfs: completion for
	the FUSE sshfs.

2005-12-06  Peter Stephenson  <pws@csr.com>

	* 22053: Etc/FAQ.yo, Functions/Newuser/zsh-newuser-install:
	minor FAQ addition plus improved documentation for options
	and parameters in zsh-newuser-install.

2005-12-05  Clint Adams  <clint@zsh.org>

	* Micah Anderson: 22052: Completion/Unix/Command/_surfraw:
	improvements to surfraw completion.

2005-12-05  Oliver Kiddle  <opk@zsh.org>

	* 22050: configure.ac, Completion/Unix/Command/_mount,
	Completion/Unix/Command/_sysctl, Completion/Unix/Type/_locales:
	fixes for Debian GNU/kfreebsd

	* 21712: Completion/Unix/Command/_date: include fallback for
	where $OSTYPE is not matched

2005-12-04  Bart Schaefer  <schaefer@zsh.org>

	* unposted (cf. users/9744): Functions/Zle/keeper: call
	_expand_word from _expand_word_and_keep so that completion context
	is not changed; add most-specific zstyle necessary to identify the
	all-expansions group within _expand_word_and_keep.

2005-12-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 22049: Src/init.c: "exit" within sourced file within shell
	function caused return from sourced file but execution of function
	continued.

2005-11-30  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Zle/zle_misc.c: fixed parsedigit() to have
	it use its arg instead of "lastchar".

	* unposted: configure.ac: changed the hard-wired "grep -E"
	into $EGREP (which is defined by AC_PROG_EGREP).

2005-11-29  Clint Adams  <clint@zsh.org>

	* 22046: Completion/Unix/Command/_rar: descriptions for
	unrar commands, some additional switches.

	* 22042: configure.ac: handle the Hurd's errno.h.

2005-11-29  Geoff Wing  <gcw@zsh.org>

	* unposted: Src/utils.c: fix prototype generation for non
	multibyte compilation

2005-11-25  Peter Stephenson  <pws@csr.com>

	* 22031: Nikolai Weibull: Completion/Unix/Command/_git: new
	completion function.

	* 22028: Src/exec.c: WARN_GLOBAL_CREATE warned when temporarily
	altering a global in the environment of a builtin or shell
	function.

	* 22027: Functions/Newuser/zsh-newuser-install: fix multiple
	compinstall lines; suggest selecting emacs keymap slightly
	more forcefully; ensure recommended selections are saved
	if not edited; trap bad keymap names; don't show initial
	explanatory screen if rerun explicitly by user; fix message
	about copying old .zshrc.

2005-11-25  Oliver Kiddle  <opk@zsh.org>

	* 22022: Completion/Debian/Command/_dchroot: completion for dchroot

2005-11-24  Peter Stephenson  <pws@csr.com>

	* 22021: Functions/Zle/insert-unicode-char: back-to-back
	insertions didn't work.

	* 22018: INSTALL, Functions/Newuser/zsh-newuser-install: tweak
	following suggestions from Bart.

	* 22014: Doc/Zsh/Contrib.yo, Doc/Zsh/zle.yo,
	Functions/Zle/.distfiles, Functions/Zle/insert-unicode-char,
	Src/Zle/iwidgets.list, Src/Zle/zle.h, Src/Zle/zle_main.c,
	Src/Zle/zle_misc.c: internal widget argument-base sets
	numeric base for next prefix argument, widget insert-unicode-char
	uses this to insert Unicode character by \U........

2005-11-23  Peter Stephenson  <pws@csr.com>

	* 22013: INSTALL, NEWS, Completion/compinstall,
	Functions/Newuser/zsh-newuser-install: initial go at a
	working zsh-newuser-install function.

2005-11-22  Clint Adams  <clint@zsh.org>

	* 22012: Completion/Debian/Command/_mergechanges:
	completion for mergechanges.

2005-11-22  Peter Stephenson  <pws@csr.com>

	* Mårten Svantesson <msv@kth.se>: 22011:
	Completion/Unix/Command/_cvs: the -R options is more generally
	available.

2005-11-21  Peter Stephenson  <pws@csr.com>

	* 22009: Src/Zle/zle_refresh.c: fix for double-width characters:
	stop when we reach the NULL at the end of the new line.

2005-11-18  Wayne Davison  <wayned@users.sourceforge.net>

	* users/9690: Completion/Unix/Command/_ssh: improved Hannu's
	completion code to handle multiple hostnames per "Host" directive
	and to skip wildcard-containing names.

	* unposted: Src/Zle/zle_tricky.c: got rid of two unneeded casts.

2005-11-18  Peter Stephenson  <pws@csr.com>

	* users/9688: Completion/Unix/Command/_ssh: improved
	_ssh_hosts from Hannu Koivisto <azure@iki.fi>; also
	rationalise reference to hosts to "remote host name".

2005-11-17  Clint Adams  <clint@zsh.org>

	* 22005: Completion/Unix/Command/_flasher: completion
	for flasher utility for Nokia 770 Internet Tablet.

2005-11-15  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Zle/zle_misc.c: Got rid of some compiler warnings
	about comparisons between signed and unsigned variables.

	* 22001: Src/hashtable.c, Src/input.c, Src/loop.c, Src/Zle/compcore.c,
	Src/Zle/compctl.c, Src/Zle/complist.c, Src/Zle/compresult.c,
	Src/Zle/zle_hist.c, Src/Zle/zle_misc.c, Src/Zle/zle_params.c,
	Src/Zle/zle_thingy.c, Src/init.c, Src/zsh.h, Src/utils.c, Src/Zle/zle.h,
	Src/Zle/zle_main.c, Src/Zle/zle_tricky.c, Src/Zle/zle_utils.c:
	Changed several functions and vars from using unsigned char pointers
	to normal char pointers, removing a bunch of forced casts in the code.

2005-11-13  Oliver Kiddle  <opk@zsh.org>

	* unposted: Completion/X/Command/qiv: fix completion of -F option

2005-11-11  Clint Adams  <clint@zsh.org>

	* 21999: Completion/Unix/Command/_gnutls:
	completion for certtool and srptool.

	* 22000: Completion/Unix/Command/_totd:
	completion for totdconfig.

2005-11-10  Clint Adams  <clint@zsh.org>

	* 21998: Completion/Unix/Command/_gnutls:
	completion for gnutls-cli and gnutls-cli-debug.

2005-11-10  Bart Schaefer  <schaefer@zsh.org>

	* 21994: Completion/Unix/Command/_sed: use correct semantics for
	arguments of the -e -f -i and -l options.  May need further tweaks
	for non-GNU seds.

2005-11-07  Clint Adams  <clint@zsh.org>

	* 21989: Completion/Debian/Command/_dpkg-cross:
	completion for dpkg-cross.

	* 21990: Completion/Debian/Command/_toolchain-source:
	completion for tpkg-debarch, tpkg-install, tpkg-install-libc,
	tpkg-make, and tpkg-update.

2005-11-07  Peter Stephenson  <pws@csr.com>

	* unposted: NEWS: note roadmap.

	* 21986: Src/Zle/compresult.c, Src/Zle/iwidgets.list,
	Src/Zle/zle.h, Src/Zle/zle_misc.c: make completion suffix
	system work with wide characters; also make magic-space
	behave like a normal space when it follows a suffix.

	* users/9638: Src/builtin.c, Doc/Zsh/builtins.yo,
	Doc/Zsh/roadmap.yo: allow FCEDIT to default to EDITOR before
	defaulting to the builtin default; mention edit-command-line in
	menu in roadmap.  Also (unposted) indicate roadmap in detailed
	texinfo node listing even though it doesn't have subentries.

2005-11-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Scott Murray <semurray@ntlworld.com>: users/9648:
	Completion/Redhat/Command/_yum,
	Completion/Redhat/Command/.distfiles: new yum completion.

2005-11-05  Clint Adams  <clint@zsh.org>

	* 21987: Completion/Unix/Command/_cplay: completion for
	cplay.

	* 21988: Completion/Debian/Command/_dput: fix "simulare"
	typo.

2005-11-04  Peter Stephenson  <pws@csr.com>

	* users/9618 modified as suggested in users/9621: Doc/Zsh/expn.yo,
	Src/hist.c: extend history substitution to allow trailing :G for
	global.

2005-11-02  Andrey Borzenkov  <bor@zsh.org>

	* 21978: Src/Modules/stat.c: unmetafy file name before calling
	system (l)stat

2005-11-02  Peter Stephenson  <pws@csr.com>

	* 21974: Src/params.c: memory leak with tied parameters.

	* users/9610: Src/Zle/zle_misc.c: Handle digit argument
	in copy-prev-word and copy-prev-shell-word.

	* 21973: Src/Zle/zle_misc.c: idigit() test in digitargument()
	had reversed sense.

2005-11-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 21971: Src/Zle/zle_refresh.c, Src/Zle/zle_tricky.c: rewrite
	pfxlen() for multibyte characters.

2005-11-01  Peter Stephenson  <pws@csr.com>

	* users/9604: Functions/Misc/run-help: enhanced to strip quotes
	from argument if necessary.

	* 21967 (documentation tweaked): Doc/Zsh/expn.yo, Src/subst.c:
	${(#)foo} uses matheval to produce characters.

2005-10-31  Wayne Davison  <wayned@users.sourceforge.net>

	* 21949 (modified): Src/zsh.h, Src/Zle/zle.h, Src/Zle/zle_misc.c,
	Src/Zle/zle_refresh.c, Src/Zle/zle_tricky.c, Src/Zle/zle_utils.c:
	Changed (in non-multibyte mode) ZLE_CHAR_T to be "char" (not int)
	and ZLE_STRING_T to be "char *" (not "unsigned char *"), including
	some related type changes (e.g. zle_text) and code improvements.

	* 21962: Src/utils.c, Src/ztype.h, Src/Modules/zftp.c,
	Src/Modules/zselect.c, Src/Zle/zle.h, Src/Zle/zle_move.c,
	Src/Zle/zle_vi.c, Src/Zle/zle_word.c: a bunch of fixes for
	iTYPE()/isTYPE() problems, e.g. avoiding using isTYPE() on
	a char value (which is undefined) and avoiding using normal
	isTYPE() functions on wide-character values.

	* unposted: Src/Zle/deltochar.c, Src/Zle/zle_move.c,
	Src/Zle/zle_utils.c: Fixed some compiler warnings about
	signed/unsigned comparisons.

	* unposted: Src/Modules/files.c, Src/Modules/mathfunc.c,
	Src/Modules/zutil.c, Src/Zle/computil.c: use idigit() instead
	of range-checking '0' - '9'.

2005-10-31  Clint Adams  <clint@zsh.org>

	* 21960: R. Ramkumar: Functions/Misc/zcalc:
	  put zcalc history file in ZDOTDIR if set.

2005-10-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/roadmap.yo: capitalize section headings to
	be consistent and add note on default history size.

	* 21957: Src/Zle/zle_refresh.c: more wide character stuff.

	* 21954 (plus comment): configure.ac: use /dev/fd/3 to check
	for availability of feature (works around FreeBSD 5
	configuration).

2005-10-28  Wayne Davison  <wayned@users.sourceforge.net>

	* 21948: Src/zsh.h, Src/Zle/zle_refresh.c: fixed a couple
	compiler warnings about comparing signed & unsigned values.
	The latter change should also remove a potential problem of
	using WEOF without multibyte support being enabled.

2005-10-28  Clint Adams  <clint@zsh.org>

	* 21946, 21947: Completion/Unix/Command/_gcc: update
	options for ia32, amd64, and sparc.

2005-10-28  Peter Stephenson  <pws@csr.com>

	* unposted: Src/Zle/zle_keymap.c: missed this out.

	* 21943, 21945: configure.ac, Src/prompt.c, Src/string.c,
	Src/system.h, Src/utils.c, Src/zsh.h, Src/Zle/complist.c,
	Src/Zle/compmatch.c, Src/Zle/compresult.c, Src/Zle/zle.h,
	Src/Zle/zle_hist.c, Src/Zle/zle_keymap.c, Src/Zle/zle_main.c,
	Src/Zle/zle_misc.c, Src/Zle/zle_refresh.c, Src/Zle/zle_thingy.c,
	Src/Zle/zle_tricky.c, Src/Zle/zle_utils.c, Src/Zle/zle_vi.c:
	Replace ZLE_UNICODE_SUPPORT by MULTIBYTE_SUPPORT throughout.
	Use multibyte versions of "nicechar" functions wherever
	possible.

	* 21942: Src/Zle/zle_refresh.c: another bug found when deleting
	an extra-wide character.

2005-10-26  Peter Stephenson  <pws@csr.com>

	* 21939: Src/Zle/zle_thingy.c: new UNMETACHECK() was too ruthless.

2005-10-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 21936: Src/Zle/zle_refresh.c: fix one bug when deleting
	an extra-wide character.

2005-10-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 21935: Documentation for 21933.

	* 21933: R. Ramkumar <ramk@cse.iitm.ernet.in>:
	Functions/MIME/zsh-mime-handler, Functions/MIME/zsh-mime-setup:
	add three styles to the MIME system.

2005-10-24  Peter Stephenson  <pws@csr.com>

	* 21931: 21913 means _hosts shouldn't complete for ping.

	* 21930: Src/Zle/zle_refresh.c: handle extra-wide characters at
	end of line by adding spaces.

2005-10-24  Clint Adams  <clint@zsh.org>

	* 21912: Src/Modules/cap.c: silence unused parameter
	compile warnings.

	* 21913: Completion/Unix/Command/_ping: completion
	for ping.

2005-10-23  Bart Schaefer  <schaefer@zsh.org>

	* unposted: Src/prompt.c: fix --disable-multibyte compile error
	introduced by 21906.

2005-10-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 21910:  abnormal return from insertlastword() didn't unmetafy
	the line; add extra UNMETACHECK() to pick up problems early from
	zle within widget.

2005-10-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 21906: Src/prompt.c, Src/zle_refresh.c: use modified
	multibyte truncation code for single byte truncation, fixing
	a bug with long truncation indicators; remove a couple of
	outmoded TODOs.

	* Spotted by Mikael Magnusson, 21905: Doc/Zsh/roadmap.yo: typos.

2005-10-21  Clint Adams  <clint@zsh.org>

	* 21902: Completion/Unix/Command/_xmlsoft: update for
	xmllint 2.6.22.

2005-10-21  Peter Stephenson  <pws@csr.com>

	* 21899: Doc/.distfiles, Doc/Makefile.in, Doc/zsh.yo,
	Doc/zshroadmap.yo, Doc/Zsh/.distfiles, Doc/Zsh/intro.yo,
	Doc/Zsh/invoke.yo, Doc/Zsh/manual.yo, Doc/Zsh/roadmap.yo:
	Add "roadmap" section to manual for new users to get
	acquainted.

	* 21898: Functions/Zle/insert-composed-char, Doc/Zsh/contrib.yo:
	insert-composed-char can take a command line argument.

2005-10-19  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Zle/zle_refresh.c: fixed a compiler warning.

2005-10-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 21891: Functions/Zle/define-composed-chars, Doc/Zsh/contrib.yo:
	double width characters can be composed with ^A etc.

	* 21890: Src/builtin.c, Src/prompt.c, Src/zle_utils.c: allocation
	inconsistencies in print builtin, segmentation error with
	left prompt truncation from 21882, warning about variable
	signedness in zle_utils.c.

	* 21887: Src/Zle/zle_refresh.c: attempt to display wide characters
	wider than one screen cell properly.

2005-10-19  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 21885: Src/Zle/zle_refresh.c: Convert some large macros
	into functions.

2005-10-19  Peter Stephenson  <pws@csr.com>

	* 21882: Src/prompt.c, Src/utils.c, Test/D01prompt.ztst: extend
	prompt truncation to handle multibyte characters.

2005-10-17  Bart Schaefer  <schaefer@zsh.org>

	* 21880: Completion/compinit: explicitly set IFS to the usual
	default string, plus carriage return, in case the surrounding
	environment has messed with it or a file with CRLF line breaks
	needs to be parsed.

2005-10-17  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Zle/define-composed-chars,
	Doc/Zsh/contrib.yo: a few more miscellaneous composable symbols.

2005-10-14  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Etc/FAQ.yo: Tweaked the precmd that works like
	PROMPT_SP so that it outputs "%#" like PROMPT_SP now does.

2005-10-13  Peter Stephenson  <pws@csr.com>

	* 21872: Src/jobs.c: job table wasn't cleared properly in
	subshells, possibly causing shell to hang; more efficient
	search for free job entry; don't record current job for
	use in saved job table.

	* 21871: Src/exec.c, Src/glob.c, Src/params.c, Src/subst.c,
	Src/utils.c, Src/zsh.h, Src/ztype.h, Src/Zle/compcore.c,
	Src/Zle/compctl.c, Src/Zle/zle_tricky.c: replace INULL() with
	more sensible inull() macro.

	* 21869: Src/prompt.c, Src/complist.c: fix multibyte characters
	in %-substitutions and output of invalid multibyte characters
	in completion listings.

	* 21870: Src/zsh.h: definition of INULL() in 21862/21863 was too
	liberal, causing problems with output of certain characters
	e.g. Cyrillic UTF-8.

2005-10-11  Peter Stephenson  <pws@csr.com>

	* 21862/21863: Src/glob.c, Src/lex.c, Src/pattern.c, Src/subst.c,
	Src/zsh.h, Test/D04parameter.ztst, Test/ztst.zsh:  Ensure that
	backslashes in parameters substituted by GLOB_SUBST are not
	swallowed up if there is no pattern match.

2005-10-07  Peter Stephenson  <pws@csr.com>

	* Stephen Rüger: 21846: Completion/Unix/Command/_chmod: too
	greedy looking for r, w, x, s, t in initial arguments to chmod.

2005-10-04  Bart Schaefer  <schaefer@zsh.org>

	* 21822 (annotated): Src/Zle/complist.c: prevent a long-standing
	infinite loop when redrawing the listing during menu-selection
	with a very narrow window.

	* 21821: Src/Zle/complist.c: fix infinite loop when multibyte
	support is disabled, introduced by 21784.

2005-10-03  Peter Stephenson  <pws@csr.com>

	* 21809: Src/utils.c: need to export nicedup() for
	--disable-multibyte in zle.

	* 21790: INSTALL, NEWS, README: add some documentation about
	the 4.3 release.

2005-10-02  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 21802: Src/Zle/complist.c, Src/Zle/compmatch.c,
	Src/Zle/zle_main.c: attempt to prevent matches ending in
	the middle of multibyte characters, also some minor tidy-ups.

	* unposted, c.f. 21799: Doc/Zsh/func.yo: documentation for
	returns from TRAPNAL functions was wayward.

2005-10-01  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/utils.c: changed PROMPT_SP to use the prompt-
	escape "%#" (as Bart suggested) instead of a hard-wired "#".

2005-09-29  Peter Stephenson  <pws@csr.com>

	* 21784: Src/utils.c, Src/Zle/complist.c, Src/Zle/compresult.c,
	Src/Zle/zle.h, Src/Zle/zle_keymap.c, Src/Zle/zle_main.c,
	Src/Zle/zle_thingy.c, Src/Zle/zle_tricky.c, Src/Zle/zle_utils.c:
	Use correct character lengths and widths for formatted character
	output.

2005-09-28  Clint Adams  <clint@zsh.org>

	* 21781: Completion/Unix/Command/_iconv: cope with
	`iconv --list` output from glibc 2.3.5.

	* 21780: Completion/Debian/Command/_dlocate: completion for
	dlocate.

2005-09-28  Peter Stephenson  <pws@csr.com>

	* 21779: Doc/Zsh/contrib.yo, Functions/Exceptions/throw, plus
	unposted Functions/Exceptions/catch: improvements from Bart in
	users/9452 plus clarifications to documentation.

2005-09-28  Clint Adams  <clint@zsh.org>

	* 21778: Completion/Debian/Command/_piuparts: completion for
	piuparts.

2005-09-27  Bart Schaefer  <schaefer@zsh.org>

	* 21770: Src/Zle/zle_keymap.c: tweak 21760 so binding XYA in a
	local keymap does not prevent bindings X or XY in the global
	keymap from being chosen (upon key timeout).

2005-09-27  Peter Stephenson  <pws@csr.com>

	* 21769: Src/utils.c, Src/Zle/complist.c: fix some consequences of
	21730 in completion lists.

2005-09-27  Clint Adams  <clint@zsh.org>

	* Vincent Lefevre: 21767: Completion/Unix/Command/_subversion:
	add ~ to the default svn status pattern.

2005-09-26  Peter Stephenson  <pws@csr.com>

	* 21764: Src/Zle/zle_hist.c: unmetafication mangled history lines
	in zle.

	* unposted: Doc/Zsh/redirect.yo: alter text referring to process
	substitutions slightly.

2005-09-26  Clint Adams  <clint@zsh.org>

	* 21763: Completion/Unix/Command/_baz: remove stray
	underscore.

2005-09-24  Bart Schaefer  <schaefer@zsh.org>

	* 21760: Src/Zle/zle_keymap.c: fix test for sequence prefixes
	in the local keymap in getkeymapcmd().

	* unposted: Functions/Misc/zargs: add range-checking of numeric
	options.

2005-09-23  Peter Stephenson  <pws@csr.com>

	* 21758: Doc/Zsh/expn.yo, Src/exec.c: optimise =(<<<...) to
	replace an argument by a filename containing it within the
	shell.

2005-09-22  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* unposted, c.f. 21752: Doc/Zsh/contrib.yo,
	Functions/Zle/.distfiles, Functions/Zle/defined-composed-chars,
	Functions/Zle/insert-composed-char: add some alphabets to
	insert-composed-chars.

2005-09-22  Clint Adams  <clint@zsh.org>

	* Stephen Rueger: 21744: Src/prompt.c: unconditionally assume
	that \t or \n are not part of multi-byte characters.

2005-09-20  Clint Adams  <clint@zsh.org>

	* 21740: Completion/Unix/Command/_quilt: completion for
	quilt.

2005-09-20  Wayne Davison  <wayned@users.sourceforge.net>

	* 21739: Src/utils.c: made PROMPT_SP work properly even when
	PROMPT_PERCENT is not set (as it is not when running as "sh").

2005-09-20  Peter Stephenson  <pws@csr.com>

	* unposted: Src/utils.c: screwed up iident() test in wcsiident().

	* 21737: Src/utils.c: unmetafy wordchars before looking for
	multibyte characters.

	* 21736: Src/init.c, Src/params.c, Src/pattern.c, Src/utils.c,
	Src/Zle/zle.h, Src/Zle/zle_main.c: Fix WORDCHARS to use multibyte
	characters; rationalise test for identifiers only to use ASCII
	characters; remove existing hack for 8-bit characters.

2005-09-19  Peter Stephenson  <pws@csr.com>

	* unposted, c.f. 21735: Doc/Zsh/grammar.yo: document
	that return at the top level of a script behaves like exit
	in a try-block.

2005-09-17  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 21731: Src/prompt.c, Src/Zle/zle_refresh.c: count multibyte
	characters and their widths properly in prompts.

	* 21730: Src/builtin.c, Src/utils.c: nicechar(), used in
	prompts and other forms of formatted output, didn't return
	a metafied string with confusing results.  Also outputting
	pwd didn't unmetafy it in one place.

2005-09-14  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_rake: update for version 0.6.0

2005-09-13  Clint Adams  <clint@zsh.org>

	* 21718: Completion/Unix/Command/_bzr: complete files
	after bzr's first argument until the bzr shell-complete
	stuff is improved.

2005-09-09  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 21722: Src/utils.c, Src/Zle/zle.h, Src/Zle/zle_misc.c,
	Src/Zle/zle_word.c: fix broken transpose-words and improve
	word character detection by assuming non-ASCII characters are word
	characters if and only if alphanumeric.

2005-09-09  Peter Stephenson  <pws@csr.com>

	* 21720: Src/Zle/zle_main.c: getrestchar() from 21709 didn't
	return properly.

	* d'après 21719: Src/builtin.c, Src/init.c, Src/params.c: Add some
	mod_exports.

	* 21717: Src/Zle/zle_misc.c: where-is and execute-named-command
	didn't work with multibyte support because the remainder of
	the character wasn't read properly.

	* 21709 plus tweaks: Doc/Zsh/zle.yo, Src/builtin.c, Src/init.c,
	Src/Zle/zle_keymap.c, Src/Zle/zle_main.c, Src/Zle/zle_misc.c,
	Src/Zle/zle_vi.c: Use $KEYTIMOUT for bytes after the first
	in a multibyte character.  Reset input state on invalid
	character or EOF.

2005-09-07  Clint Adams  <clint@zsh.org>

	* 21704, 21705: Completion/Unix/Command/_date: completion for
	Solaris, FreeBSD, and OpenBSD.

2005-09-06  Clint Adams  <clint@zsh.org>

	* 21703: Completion/Unix/Command/_bzr: completion for bzr 0.0.7.

2005-09-06  Peter Stephenson  <pws@csr.com>

	* 21701: Src/params.c, Test/D06subscript.ztst: negative offsets
	that indexed before the start of a scalar weren't handled properly.

2005-09-05  Peter Stephenson  <pws@csr.com>

	* 21698: Jean-Baptiste Quenot: Completion/Unix/Command/_ant:
	recursive completion could change directory.

2005-09-02  Clint Adams  <clint@zsh.org>

	* 21696: Completion/Unix/Command/_date: completion for
	GNU date.

2005-09-02  Peter Stephenson  <pws@csr.com>

	* 21695: Doc/Zsh/expn.yo: rewrite entry for u globbing flag.

	* 21693: Jean-Baptiste Quenot: Completion/Unix/Command/_ant:
	recursively find targets.

2005-08-31  Clint Adams  <clint@zsh.org>

	* 21686: Completion/Debian/Command/_make-kpkg: modernize
	make-kpkg completion.

	* 21692: Completion/Unix/Command/_baz: remove set-tree-version, fix
	tree-version, add tree-id.

2005-08-31  Peter Stephenson  <pws@csr.com>

	* users/9359: Francisco Borges: Completion/X/Command/_gv:
	completion of ps and PDF files was broken for gv.

2005-08-25  Clint Adams  <clint@zsh.org>

	* 21683: Completion/X/Command/_urxvt: more fixes
	to urxvt completion.

2005-08-23  Clint Adams  <clint@zsh.org>

	* 21682: Completion/Unix/Command/_subversion: handle usage output
	of commands with [0-9]. alternatives, and actually parse that
	output again.

2005-08-22  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Doc/Makefile.in: An even better fix than the one
	from 21677:  we now avoid more cases of lost characters due
	to yodl not escaping start-of-line apostrophes.

2005-08-22  Peter Stephenson  <pws@csr.com>

	* 21678: Src/params.c, Test/D04parameter.ztst: unsetting
	tied parameters was fraught with crashes.

	* 21676: Doc/zmacros.yo, Doc/Zsh/contrib.yo,
	Functions/Zle/.distfiles, Functions/Zle/insert-composed-char,
	Functions/Zle/insert-unicode-char: insert-unicode-char is now
	insert-composed-char and uses RFC 1345 for composing characters.

2005-08-22  Geoff Wing  <gcw@zsh.org>

	* unposted: Doc/Zsh/metafaq.yo, Etc/FAQ.yo: update some
	mirror site information

2005-08-19  Wayne Davison  <wayned@users.sourceforge.net>

	* 21677: Doc/Makefile.in: Filter apostrophes in the \fB...\fP
	headers of the nroff output since it appears that yodl is not
	properly escaping them.

2005-08-18  Andrey Borzenkov  <bor@zsh.org>

	* 21663: Src/Zle/complete.c: check for string overflow
	in do_comp_vars()

	* 21664: Src/Zle/compcore.c, Src/Zle/compresult.c: unmetafy
	argument in ztat() before calling (l)stat

2005-08-18  Peter Stephenson  <pws@csr.com>

	* unposted: Doc/Zsh/contrib.yo, Functions/Zle/insert-unicode-char:
	cent is now p % to avoid duplication.

	* 21662: Doc/Zsh/contrib.yo, Functions/Zle/insert-unicode-char:
	compose and insert a Unicode character using two-key codes.

	* 21661: Src/glob.c: variable in 21655 shouldn't be static.

2005-08-18  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 21655: Src/glob.c, Test/D04parameter.ztst: replacing multiple
	matches where the replacement string itself came from a match
	could get confused.

2005-08-17  Wayne Davison  <wayned@users.sourceforge.net>

	* 21654: Src/string.c, Src/utils.c: Marked some ifdef/endif lines
	as exportable to fix a compile bug when ZLE_UNICODE_SUPPORT is not
	defined.

	* unposted: configure.ac, aczsh.m4: Use AC_HELP_STRING macro in
	all AC_ARG_ENABLE and AC_ARG_WITH macros.

2005-08-16  Wayne Davison  <wayned@users.sourceforge.net>

	* 21629: configure.ac, Src/system.h: moved the optional definition
	of ZLE_UNICODE_SUPPORT into configure, and added support for the
	new --enable-multibyte and --disable-multibyte configure options.

	* 1/2 of 21644: Src/Zle/complete.c: fixed bug in do_comp_vars()
	when the first char in compprefix is metafied.

2005-08-16  Andrey Borzenkov  <bor@zsh.org>

	* 21642: Src/Zle/compcore.c: cleanup for 21627, remove redundant
	checks

2005-08-16  Clint Adams  <clint@zsh.org>

	* 21631: Src/Zle/compcore.c: make sure an unmetafied string is
	passed to ztat to determine file type.

2005-08-15  Andrey Borzenkov  <bor@zsh.org>

	* 21622: Src/Zle/zle_refresh.c: metafy line back before calling
	completion code in zrefresh()

	* 21627: Src/Zle/compcore.c: unmetafy line back before calling
	ZLE from within completion code in do_completion()

2005-08-15  Clint Adams  <clint@zsh.org>

	* 21619: Src/string.c, Src/utils.c, Src/Zle/zle.h: define wide
	versions of zarrdup, zputs, niceztrlen.

	* 21565: Completion/Unix/Command/_man: better handle uncompressed
	manpages with .[0-9] in their names.

2005-08-15  Wayne Davison  <wayned@users.sourceforge.net>

	* 21609: Src/glob.c: fixed the readlink() call in statfullpath().

2005-08-15  Felix Rosencrantz  <f.rosencrantz@gmail.com>

	* 21611: Completion/X/Command/_mozilla: Added Firefox support.

2005-08-15  Peter Stephenson  <pws@csr.com>

	* c.f. 21616: Src/zle_misc.c: "unmetafy_line" typo.

	* 21610: Src/system.h, Src/Zle/zle_hist.c, Src/Zle/zle_keymap.c,
	Src/Zle/zle_misc.c: Turn on ZLE_UNICODE_SUPPORT by default where
	allowed; fix suffix removal; fix metafication when removing
	suffix by function; fix insert-last-word.

2005-08-14  Bart Schaefer  <schaefer@zsh.org>

	* 21369: Completion/Unix/Command/_cvs: assign to array with
	builtin stat rather than parsing stdout.

	* unposted: Functions/Prompts/prompt_bart_setup: more adjustments
	for the PROMPT_SP option.

	* 21366: Src/jobs.c: LONG_LIST_JOBS applies to more places where
	job listing are printed.

2005-08-12  Wayne Davison  <wayned@users.sourceforge.net>

	* 21606: Src/Zle/zle.h: When compiled with gcc, the ZS_str* macros
	get replaced by inline functions that give us complete compile-time
	type-checking.  For other compilers, the ZS_str* macros now cast
	the string pointers to char*, which will avoid any warnings about
	pointer signedness.

2005-08-12  Peter Stephenson  <pws@csr.com>

	* 21603: Src/Zle/zle_utils.c: conversions from wide character
	to multibyte didn't convert the cursor position properly if it
	was at the end of the line.

	* 21412: Travis Spencer: Completion/Unix/Command/_pkg-config:
	new completion.

2005-08-11  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/Zle/zle_hist.c, Src/Zle/zle_refresh.c: changed some
	uses of ZWC() on string literals to use ZWS().

	* unposted: Test/B02typeset.ztst: improved the final test to ensure
	that all the locally-unset environment variables get restored after
	a function call. This also fixed an interaction with the cleanup
	code that caused the ztst.* temporary files to not be removed.

2005-08-11  Oliver Kiddle  <opk@zsh.org>

	* 21598: Completion/Unix/Command/_subversion: fix typo that broke
	svn ci completion and avoid problem if LC_ALL overrides LC_MESSAGES

	* 21571: Completion/Debian/Command/_aptitude: avoid localised
	translations that break parsing

2005-08-10  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 21596: Src/Zle/compresult.c, Src/Zle/zle_tricky.c: more fall out
	from 21590: run-help, which-command and accept-and-menu-complete
	were broken.

2005-08-10  Peter Stephenson  <pws@csr.com>

	* 21593: Src/Zle/complist.c, Src/Zle/zle_refresh.c: character
	arrays wrongly declared with ZLE_UNICODE_SUPPORT.

	* 21592: Src/Zle/complist.c: attempt to browse a new directory
	in menu selection caused crash.

	* c.f. 21590: Src/hist.c, Src/lex.c, Src/utils.c,
	Src/Zle/compcore.c, Src/Zle/compctl.c, Src/Zle/complist.c,
	Src/Zle/compresult.c, Src/Zle/zle.h, Src/Zle/zle_hist.c,
	Src/Zle/zle_main.c, Src/Zle/zle_misc.c, Src/Zle/zle_params.c,
	Src/Zle/zle_refresh.c, Src/Zle/zle_thingy.c, Src/Zle/zle_tricky.c,
	Src/Zle/zle_utils.c: upgrade metafy_line()/unmetafy_line() to
	take account of wide characters.  Add extra conversion where
	necessary.  Also attempt fix for singlerefresh() prompt with
	ZLE_UNICODE_SUPPORT (untested).

2005-08-10  Wayne Davison  <wayned@users.sourceforge.net>

	* 21579: Thorsten Dahlheimer: Src/builtin.c: Made printf %s
	handle embedded nuls in its arg.

2005-08-09  Peter Stephenson  <pws@csr.com>

	* 21583: Thorsten Dahlheimer: Src/module.c: extend circularity
	test of zmodload -A.

	* 21582: Thorsten Dahlheimer: Src/module.c: failure status of
	zmodload -R was wrong.

	* 21578: Thorsten Dahlheimer: Src/mkmakemod.sh: script used not
	to exit after cleaning up.

	* 21577 (adapted): Dan Bullok: Src/Zle/zle_main.c, Src/init.c,
	Src/utils.c: improved 21567 which re-expands the prompt and
	refreshes but doesn't trash the line editor.

2005-08-08  Wayne Davison  <wayned@users.sourceforge.net>

	* 21580: Thorsten Dahlheimer: Test/C03traps.ztst: disable any
	pre-existing traps that could interfere with the tests.

	* 21581: Thorsten Dahlheimer: Src/builtin.c: fixed error output
	for unknown signal names when using "trap -".

	* 21581 (modified): Doc/Zsh/builtins.yo: improved "trap" docs.

	* 21584: Src/builtin.c, Test/B03print.ztst: fixed a bug in printf
	%b (introduced in the 21552 changes) where a missing arg could not
	be printed with a zero width.

2005-08-08  Peter Stephenson  <pws@csr.com>

	* 21576: Test/E01options.ztst: test for 21575.

	* unposted: Src/exec.c: removed unnecessary augment variable from
	21575

	* 21575 plus unposted changes to Functions/TCP/*:
	Completion/compinit, Doc/Zsh/options.yo, Functions/TCP/tcp_expect,
	Functions/TCP/tcp_open, Functions/TCP/tcp_read, Src/exec.c,
	Src/options.c, Src/params.c, Src/zsh.h: Add WARN_CREATE_GLOBAL
	option to warn when an assignment in a function creates a global
	parameter.

	* 21567: Dan Bullok: Src/utils.c: trash zle when updating window
	size since otherwise multiline prompts get screwed up.

2005-08-08  Oliver Kiddle  <opk@zsh.org>

	* 21570: Completion/Unix/Command/_subversion: complete for the
	help sub-command

	* unposted: Completion/Linux/Command/_brctl: new brctl completion

	* 21566: Tobias Gruetzmacher: Completion/Unix/Command/_darcs:
	fix to list all repositories

2005-08-07  Clint Adams  <clint@zsh.org>

	unposted: Completion/Unix/Command/_mencal: fix syntax error
	introduced by recent cleanup.

2005-08-02  Peter Stephenson  <pws@csr.com>

	* 21557: Thorsten Dahlheimer: Src/glob.c: BRACE_CCL was broken
	for character 255.

2005-08-01  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/builtin.c: silenced a compiler warning.

	* unposted: Test/B03print.ztst: some slight improvements to
	the existing no-newline test cases, plus a few more tests.

2005-08-01  Oliver Kiddle  <opk@zsh.org>

	* unposted: Completion/Debian/Command/_apt-move,
	Completion/Debian/Command/_module-assistant,
	Completion/Debian/Command/_uscan, Completion/Debian/Command/_wajig,
	Completion/Unix/Command/_cal, Completion/Unix/Command/_ccal,
	Completion/Unix/Command/_dhclient, Completion/Unix/Command/_fortune,
	Completion/Unix/Command/_mencal, Completion/Unix/Command/_perforce,
	Completion/Unix/Command/_pump, Completion/Unix/Command/_surfraw:
	various cleanups: fix indentation and capitalisation of descriptions

	* 21393: Completion/Unix/Command/_kvno: add missing local declarations

2005-08-01  Peter Stephenson  <pws@csr.com>

	* 21552: Thorsten Dahlheimer: Src/builtin.c: various fixes to the
	print builtin.

	* unposted: Completion/Unix/Command/_perforce: add the as yet
	undocumented "attribute" command.

	* 21551: Matthias Kopfermann: FEATURES: file<20-> globbing
	example is confusing.

	* 21546: Doc/Zsh/params.yo: document the oddities of subscripts
	when searching arrays.

	* 21544: Thorsten Dahlheimer: configure.ac, Src/system.h: ioctl()
	prototyping was substandard and missing on Cygwin.

2005-07-31  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 21553: Doc/Makefile.in, Doc/.distfiles: Create zsh.pdf
	using texi2dvi to ensure cross-references and indexes are OK;
	don't distribute PostScript files any more, though they can
	still be made.

2005-07-29  Wayne Davison  <wayned@users.sourceforge.net>

	* 21548: Completion/Unix/Command/_rsync:  Made file completion
	work after --include-from= and --exclude-from=.

2005-07-28  Peter Stephenson  <pws@csr.com>

	* unposted: Functions/Exceptions/.distfiles: added to archive.

	* 21541: Src/Zle/zle_hist.c, Src/Zle/zle_main.c,
	Src/Zle/zle_misc.c, Src/Zle/zle_params.c, Src/Zle/zle_tricky.c,
	Src/Zle/zle_utils.c: remove some warnings from
	ZLE_UNICODE_SUPPORT.

	* unposted: Completion/Unix/Command/_perforce: updated for
	features of Perforce 2005.1 release.

2005-07-28  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 21540: Completion/Unix/Command/_aap: update aap completion for version
	1.076; add target descriptions; search up directory tree for main.aap
	recipe file if --up is specified

2005-07-26  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/utils.c, Src/Zle/zle_main.c, Doc/Zsh/options.yo:
	Moved the PROMPT_SP output into preprompt() so that it takes
	effect prior to things like precmd, the mail-check output, etc.
	Also added an inverse hash (#) that helps to distinguish when a
	partial line was preserved.

	* 21532: Etc/FAQ.yo: updated the precmd in the prompt-
	overwriting section to output an inverse hash when we preserve a
	partial line, to simplify the output (it's all one "print" now),
	and include a \r at the end (so that the echoing of user-input
	will be less likely to cause an unintended wrap).

2005-07-26  Clint Adams  <clint@zsh.org>

	* 21529: configure.ac, Src/zsh.mdd: move scriptdir to a scripts
	subdir, and don't include Scripts in fpath.

2005-07-26  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_rake: declare expl local

2005-07-26  Peter Stephenson  <pws@csr.com>

	* 21527: Functions/Newuser/.distfiles,
	Functions/Newuser/zsh-install-newuser,
	Functions/Newuser/zsh-newuser-install, Scripts/newuser: don't
	use function if it failed to load; rename to zsh-newuser-install
	in case there are more zsh-newuser-* functions in future.

2005-07-25  Clint Adams  <clint@zsh.org>

	* 21526: Completion/Unix/Command/_dhclient: handle dhclient V3 as
	well as V2.

	* 21523, 21524: Julius Plenz: Completion/Unix/Command/_dhclient,
	Completion/Unix/Command/_pump: completions for pump and dhclient.

2005-07-25  Wayne Davison  <wayned@users.sourceforge.net>

	* 21518 (modified): Src/builtin.c, Src/utils.c, Test/B03print.ztst:
	more collaboration with Thorsten Dahlheimer to change the handling
	of \c in echo and printf to make it comply with POSIX.

2005-07-25  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_php: add missing compset -S call
	when completing directives

2005-07-24  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/utils.c: improved the function comment for
	getkeystring().

	* 21509: Thorsten Dahlheimer: Src/utils.c, Src/params.c: fixed
	some issues with \c parsing.

	* 21501: Thorsten Dahlheimer: Src/Makefile.in: fixed a cygwin
	install target to make sure the bindir exists.

2005-07-24  Clint Adams  <clint@zsh.org>

	* 21519: Completion/Unix/Command/_baz: only complete files
	after baz commit, not archive/version.

	* 21517: Completion/Unix/Command/_baz: complete files after
	build-config if there's a configs subdir, even if one is not in a
	project tree.

	* 21510: Config/installfns.sh: use && rather than -a binary
	test operator.

2005-07-23  Clint Adams  <clint@zsh.org>

	* 21505, 21506: Completion/Unix/Command/_rubber: use an array for
	common arguments rather than an additional function, and use
	globbing instead of ls and sed.

	* 21504: Completion/Unix/Command/_xscreensaver,
	Completion/X/Command/_xscreensaver: move xscreensaver-command
	completion to the X dir.

2005-07-21  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Debian/Command/.distfiles,
	Completion/Unix/Command/.distfiles,
	Completion/Unix/Type/.distfiles, Completion/X/Command/.distfiles,
	Doc/Zsh/.distfiles, Functions/MIME/.distfiles,
	Functions/Newuser/.distfiles, Functions/TCP/.distfiles,
	Functions/Zle/.distfiles, Scripts/.distfiles,
	Src/Modules/.distfiles:  Bring .distfiles up to date.

2005-07-20  Peter Stephenson  <pws@csr.com>

	* 21500: Makefile.in, Config/installfns.sh,
	Config/uninstallfns.sh, Functions/Newuser/zsh-install-newuser,
	Scripts/newuser, Src/Modules/newuser.mdd: Add framework for
	function to be edited to provide new user startup files.

2005-07-20  Clint Adams  <clint@zsh.org>

	* 21499: Doc/Makefile.in: use newer texi2html syntax.

2005-07-20  Peter Stephenson  <pws@csr.com>

	* 21498: configure.ac, Configs/defs.mk.in, Doc/Makefile.in,
	Doc/Zsh/mod_newuser.yo, Src/init.c, Src/module.c, Src/zsh.mdd,
	Src/Modules/newuser.c, Src/Modules/newuser.mdd: Add zsh/newuser
	module, currently with no associated shell code.

2005-07-20  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_rake: add -s option to _arguments

2005-07-19  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Etc/FAQ.yo: revert erroneous 3.0 -> 4.3.0 change.

	* 21492: Etc/FAQ.yo: a more extensive update to the prompt-
	overwriting section in light of PROMPT_SP.

2005-07-18  Peter Stephenson  <pws@csr.com>

	* unposted: Etc/FAQ.yo: version in 21490 should be 4.3.0.

	* 21490: Etc/FAQ.yo: update FAQ to reflect 21464.

2005-07-16  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_python: escape colons in -W option
	argument message

2005-07-15  Wayne Davison  <wayned@users.sourceforge.net>

	* 21464: Doc/Zsh/options.yo, Src/zsh.h, Src/options.c, Src/init.c,
	Src/Zle/zle_main.c: added a new option, PROMPT_SP, designed to save
	a partial line before the prompt can cover it up (due to PROMPT_CR).

2005-07-15  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_python: add missing -C option to
	_arguments; complete script arguments with _normal

2005-07-14  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 21466: Src/Modules/files.c: lstat() should be stat() in mkdir -p
	test (from Fr. Br. George).

2005-07-12  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 21449: Completion/Unix/Command/_ruby: limit options available to
	RUBYOPT env variable to -[IdvwrK]; include directories specified with
	-I in the search path used to generate library matches

	* 21446 (modified): Completion/Unix/Command/_rake: generate targets for
	rakefiles in parent directories and those specified with -f; include
	directories specified with -I in the search path used to generate
	library matches

2005-07-12  Clint Adams  <clint@zsh.org>

	* 21447: Completion/Unix/Command/_rubber: completion for
	rubber, contributed by Emmanuel Hainry and Emmanuel
	Beffara.

2005-07-11  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 21443: Completion/Unix/Command/_rake: new completion for rake

	* unposted: Completion/Unix/Command/_ruby: fix typo in first normal arg
	action

2005-07-11  Bart Schaefer  <schaefer@zsh.org>

	* 21428: Travis Spencer: Src/Zle/computil.c: fix null pointer deref
	on wrong number of arguments to compvalues.

2005-07-10  Bart Schaefer  <schaefer@zsh.org>

	* 21423: Travis Spencer: Completion/Unix/Command/_unexpand:
	completion for both GNU and Sun/BSD unexpand variants.

	* unposted: Functions/Misc/allopt: use "set -o" to avoid twaddling
	the setting of kshoptionprint.

2005-07-10  Clint Adams  <clint@zsh.org>

	* 21416: Completion/Unix/Command/_gpg: cope with an equals
	sign after --keyring.

	* 21417: Completion/Unix/Command/_xscreensaver: completion
	for xscreensaver-command.

	* 21418: Completion/Debian/Command/_madison: completion
	for madison.

2005-07-08  Peter Stephenson  <pws@csr.com>

	* users/9059: Nikolai Weibull: Completion/Unix/Command/_vim:
	improved _vim_files.

2005-07-07  Peter Stephenson  <pws@csr.com>

	* users/9049: Completion/Unix/Command/_vim: add variant names
	of vim, but not yet vi, ex, view.

	* users/9045: Nikolai Weibull
	<mailing-lists.zsh-users@rawuncut.elitemail.org>:
	Completion/Unix/Command/_vim: new completion function.

2005-07-06  Peter Stephenson  <pws@csr.com>

	* 21402: Src/Zle/compmatch.c: Fix crash completing the set
	of files AIWebKitMessageViewController.m,
	AIWebKitMessageViewPlugin.m, AIWebkitMessageViewStyle.m
	with case-insensitive matching.

2005-07-03  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_w3m: add missing compset -S calls
	when completing option names and proxy usernames

	* 21400: Completion/Unix/Command/_ruby: add completion for RUBYOPT,
	RUBYLIB and RUBYPATH env variables

2005-06-30  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_links: declare parameter vals
	local

2005-06-28  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 21392: Completion/Unix/Command/_w3m: update w3m completion for
	version 0.5.x; add completion for URLs from the bookmarks file,
	options, charsets, and proxy authentication

2005-06-28  Peter Stephenson  <pws@csr.com>

	* 21391: Src/jobs.c: Restrict passing of signals from foreground
	processes to the shell to SIGINT and SIGQUIT (i.e. those
	generated from the keyboard).  This removes some unexpected
	behaviour with SIGPIPE being passed to the shell.

2005-06-27  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Type/_urls: complete WWW_HOME, ftp_proxy
	and https_proxy with URLs

2005-06-27  Peter Stephenson  <pws@csr.com>

	* 21387: Doc/Zsh/contrib.yo: document the precision features
	in zcalc.

2005-06-26  Clint Adams  <clint@zsh.org>

	* 21384: Completion/X/Command/_urxvt: small fixes
	to urxvt completion.

	* 21383: nuno alexandre: Completion/X/Command/_urxvt:
	completion for rxvt-unicode.

2005-06-24  Clint Adams  <clint@zsh.org>

	* 21382: Completion/Unix/Command/_kvno: completion for MIT
	krb5's kvno.

2005-06-24  Oliver Kiddle  <opk@zsh.org>

	* 21380: Completion/Linux/Command/_iwconfig,
	Completion/Linux/Command/_tune2fs, Completion/Unix/Command/_wget,
	Completion/Linux/Command/_mii-tool: update for wget 1.10, add
	missing descriptions and other minor improvements

2005-06-24  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Debian/Command/_apt-move: prevent function from
	returning early and preventing prefix-needed style from working when
	set to false

	* 21379: Completion/Unix/Command/_wget: improve --restrict-file-names
	completion by allowing 'nocontrol' as an argument

2005-06-21  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 21334: Completion/Linux/Command/_pkgtool: fix typo in -target_dir
	completion

2005-06-21  Oliver Kiddle  <opk@zsh.org>

	* 21317: Src/glob.c, Test/D02glob.ztst: fix bug where recursive
	glob within e qualifier would hang the shell

2005-06-20  Bart Schaefer  <schaefer@zsh.org>

	* unposted: Functions/Misc/zargs: support -I and -L as synonyms
	for -i and -l, except that the former require their arguments.
	Document several differences from POSIX xargs behavior.  V 1.4.

2005-06-18  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 21343: Completion/Unix/Command/_php: update php completion for
	version 5.0; continue supporting version 4.x via _pick_variant

2005-06-17  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_darcs: tidy up command
	descriptions

2005-06-17  Oliver Kiddle  <opk@zsh.org>

	* 21352: Harald van Dijk: Src/builtin.c: handle null after % in
	printf format specifier

	* unposted: Test/B03print.ztst: add test for 21352

2005-06-16  Clint Adams  <clint@zsh.org>

	* 21351: Completion/X/Command/_vnc: complete for xvnc4viewer and
	xtightvncviewer.

2005-06-14  Clint Adams  <clint@zsh.org>

	* 21243: Kazuhiro NISHIYAMA: Completion/Unix/Command/_subversion:
	complete first option of svn subcmds.

2005-06-13  Bart Schaefer  <schaefer@zsh.org>

	* 21328: Src/init.c: in loop(), avoid preprompt() when not looping at
	the top level (prevents double precmd call during "fc -e -").

2005-06-11  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 21316 (modified): Completion/Unix/Command/_less,
	Completion/Unix/Type/_ctags_tags: new completion for ctags tags; update
	less -t completion to use it

	* 21320: Completion/Unix/Command/_screen: complete -D and -R with the
	appropriate session types; fix incorrect completion of -c and -dmS
	options

	* 21321: Completion/Unix/Command/_antiword: update antiword completion
	for version 0.36

2005-06-09  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_less: fix typo in state name

2005-06-08  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_ant: add missing options specific
	to the launch script

2005-06-08  Oliver Kiddle  <opk@zsh.org>

	* 21315: Completion/AIX/Command/_floppy,
	Completion/AIX/Command/_lsdev, Completion/AIX/Command/_lslv,
	Completion/AIX/Command/_lsvg, Completion/AIX/Type/_logical_volumes,
	Completion/AIX/Type/_object_classes,
	Completion/AIX/Type/_physical_volumes,
	Completion/AIX/Type/_volume_groups,
	Completion/Darwin/Type/_mac_applications,
	Completion/Debian/Command/_bug, Completion/Unix/Command/_gs,
	Completion/Unix/Command/_imagemagick, Completion/Unix/Command/_java,
	Completion/Unix/Command/_last, Completion/Unix/Command/_links,
	Completion/Unix/Command/_lsof, Completion/Unix/Command/_mount,
	Completion/Unix/Command/_perldoc, Completion/Unix/Command/_user_admin,
	Completion/Unix/Command/_yp, Completion/Unix/Command/_zdump,
	Completion/Unix/Type/_dir_list, Completion/Unix/Type/_domains,
	Completion/Unix/Type/_file_systems, Completion/Unix/Type/_groups,
	Completion/Unix/Type/_hosts, Completion/Unix/Type/_java_class,
	Completion/Unix/Type/_locales, Completion/Unix/Type/_perl_basepods,
	Completion/Unix/Type/_perl_modules, Completion/Unix/Type/_pids,
	Completion/Unix/Type/_ports, Completion/Unix/Type/_printers,
	Completion/Unix/Type/_services, Completion/Unix/Type/_tex,
	Completion/Unix/Type/_texi, Completion/Unix/Type/_time_zone,
	Completion/Unix/Type/_users, Completion/X/Type/_x_cursor,
	Completion/X/Type/_x_extension, Completion/X/Type/_x_font,
	Completion/X/Type/_x_keysym, Completion/Zsh/Command/_print,
	Completion/Zsh/Command/_read, Completion/Zsh/Command/_unhash,
	Completion/Zsh/Type/_arrays, Completion/Zsh/Type/_file_descriptors,
	Completion/Zsh/Type/_functions, Completion/Zsh/Type/_jobs_bg,
	Completion/Zsh/Type/_jobs_fg, Completion/Zsh/Type/_limits,
	Completion/Zsh/Type/_options, Completion/Zsh/Type/_options_set,
	Completion/Zsh/Type/_options_unset: make completion functions
	give precedence to descriptions passed as parameters and
	cleanup descriptions in calling functions

	* 21314: Doc/Zsh/compsys.yo: declare expl local in example use
	of _wanted

	* unposted: Completion/Linux/Command/_yast: new yast completion

	* 21313: Completion/Unix/Type/_email_addresses: make code for
	extracting mutt aliases do a better job of finding rc files

2005-06-08  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 21306: Completion/Zsh/Command/_disable: add -s option for removing
	suffix aliases

	* 21310: Completion/Unix/Type/_global_tags: pass an array to compadd;
	redirect stderr to /dev/null when generating matches with _call_program

	* 21302: Completion/Linux/Command/_pkgtool,
	Completion/Unix/Command/_ant, Completion/Unix/Command/_bogofilter,
	Completion/Unix/Command/_cdrecord, Completion/Unix/Command/_chkconfig,
	Completion/Unix/Command/_chmod, Completion/Unix/Command/_gs,
	Completion/Unix/Command/_look, Completion/Unix/Command/_mount,
	Completion/Unix/Command/_python, Completion/Unix/Command/_rar,
	Completion/Unix/Type/_file_systems, Completion/Unix/Type/_global_tags,
	Completion/Unix/Type/_locales, Completion/Unix/Type/_user_at_host,
	Completion/X/Command/_mozilla, Completion/X/Command/_mplayer,
	Completion/X/Command/_netscape, Completion/X/Type/_x_visual,
	Completion/Zsh/Context/_equal: make sure expl is declared local in
	completion functions

2005-06-07  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Zsh/Command/_dirs: fix typo in opt description

2005-06-06  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_raggle: fix typo in tag name

2005-06-02  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 21293: Completion/Unix/Command/_ant: update ant completion for
	version 1.6.4; always use the -find and -buildfile options when
	completing targets

2005-06-01  Peter Stephenson  <pws@csr.com>

	* unposted: Src/builtin.c: need const for result of getsigname().

	* 21296: Doc/Zsh/builtins.yo [this hunk missing from post],
	Doc/Zsh/func.yo, Src/builtin.c, Src/jobs.c, Src/zsh.h:
	Allow ERR signal as alias for ZERR on systems that don't
	have SIGERR.  Make "trap" report the name used when the trap
	was set rather than the canonical name.

2005-06-01  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 21294: Completion/Cygwin/Command/_cygstart,
	Completion/Debian/Command/_apt-move,
	Completion/Debian/Command/_module-assistant,
	Completion/Unix/Command/_ccal, Completion/Unix/Command/_perl,
	Completion/Unix/Command/_surfraw, Completion/Unix/Command/_vux,
	Completion/X/Command/_kfmclient: fix incorrectly capitalized completion
	descriptions

2005-05-31  Geoff Wing  <gcw@zsh.org>

	* 21290: configure.ac: don't need backslash quoting within single-quote
	areas.  Change constant RE boundary characters to slash.

2005-05-30  Oliver Kiddle  <opk@zsh.org>

	* 21266: Completion/Unix/Command/_mh: improve completion of sequences

2005-05-26  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 21275 (modified): Completion/Unix/Command/_raggle: update raggle
	completion for version 0.4.0

2005-05-23  Bart Schaefer  <schaefer@zsh.org>

	* unposted: Functions/Prompts/prompt_bart_setup: print whitespace
	to stderr for promptcr adjustments, because the prompt itself is
	printed to stderr.

2005-05-23  Peter Stephenson  <pws@csr.com>

	* 21270: Src/system.h: don't use poll() on Apple.

	* users/8863: Doc/Zsh/contrib.yo, Functions/Zle/which-command:
	enhanced which-command that traces the final command better.

	* users/8856: Src/Zle/zle_tricky.c: which-command shouldn't expand
	aliases before passing first argument.

2005-05-22  Bart Schaefer  <schaefer@zsh.org>

	* unposted: Completion/Base/Widget/_complete_debug: add a colon
	command so name and version of zsh appear in debug output.

2005-05-21  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* unposted: Completion/Unix/Command/_webbrowser: add firefox to
	list of basic URL completed web browsers

2005-05-17  Peter Stephenson  <pws@csr.com>

	* 21264: Doc/Zsh/arith.yo: document the return status of (( ... )).

2005-05-17  Geoff Wing  <gcw@zsh.org>

	* unposted: Etc/FAQ.yo: update mirror sites

2005-05-13  Oliver Kiddle  <opk@zsh.org>

	* Jesse W: 21244 (modified): Completion/Darwin/Command/_qtplay:
	new completion for qtplay (Quick Time wrapper for Mac OS X)

	* unposted: Completion/X/Command/_qiv: new completion for qiv

2005-05-13  Motoi Washida  <a66@h8.dion.ne.jp>

	* users/8826: Completion/Darwin/Type/_retrieve_mac_apps: search
	applications using spotlight.

2005-05-12  Felix Rosencrantz  <f.rosencrantz@gmail.com>

	* 21257: Completion/Unix/Command/_perforce: fix minor typo
	in completion for the p4 password command.

2005-05-11  Oliver Kiddle  <opk@zsh.org>

	* Joerg Sonnenberger: 21252: configure.ac, Src/Modules/zpty.c,
	Completion/BSD/Command/_chflags, Completion/Unix/Command/_apm,
	Completion/Unix/Command/_cvs, Completion/Unix/Command/_ifconfig,
	Completion/Unix/Command/_mount, Completion/Unix/Command/_mt,
	Completion/Unix/Command/_sysctl, Completion/Unix/Type/_file_systems,
	Completion/Unix/Type/_net_interfaces: Dragonfly BSD support

2005-05-10  Oliver Kiddle  <opk@zsh.org>

	* 21248: Doc/Zsh/mod_socket.yo: avoid use of subsection within
	list because it causes makeinfo to produce broken docbook XML

	* Haakon Riiser: 21188: Completion/X/Command/_acroread: handle
	acroread 7.x

2005-05-09  Bart Schaefer  <schaefer@zsh.org>

	* unposted (see 21240): Functions/Prompts/prompt_bart_setup,
	Functions/Prompts/prompt_bigfade_setup,
	Functions/Prompts/prompt_elite2_setup,
	Functions/Prompts/prompt_elite_setup,
	Functions/Prompts/prompt_fade_setup,
	Functions/Prompts/prompt_fire_setup, Functions/Prompts/promptinit:
	assorted cleanup triggered by the discovery that elite2 has never
	really worked correctly.

2005-05-09  Clint Adams  <clint@zsh.org>

	* 21239: Completion/Unix/Command/_ccal: completion for
	ccal.

2005-05-09  Peter Stephenson  <pws@csr.com>

	* 21211: Doc/Zsh/expn.yo, Src/pattern.c, Test/D02glob.ztst:
	Add [[:IDENT:]], [[:IFS:]], [[:IFSSPACE:]], [[:WORD:]] tests.

2005-05-08  Bart Schaefer  <schaefer@zsh.org>

	* 21235, 21236: Completion/Unix/Command/_ssh: fix remote filename
	quoting and wrong exit status, both in _remote_files.

2005-05-07  Clint Adams  <clint@zsh.org>

	* Jesse Weinstein: 21233: Completion/Debian/Command/_dpkg:
	completion for dpkg-query.

2005-05-06  Bart Schaefer  <schaefer@zsh.org>

	* 21229: Doc/Makefile.in: fix fake build run when yodl isn't found

2005-05-05  Clint Adams  <clint@zsh.org>

	* Jesse Weinstein: 21230 (reformatted as 21231):
	Completion/Debian/Command/_dpkg: complete -W/--show
	for dpkg-deb.

2005-04-30  Bart Schaefer  <schaefer@zsh.org>

	* 21215: Test/C03traps.ztst: clean up TRAPEXIT file left behind by
	autoloaded trap test.

2005-04-27  Peter Stephenson  <pws@csr.com>

	* 21197: Src/exec.c, Src/signals.c: LOCAL_TRAPS didn't restore
	a trap when modified inside another trap.

2005-04-27  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync:  Made some
	options repeatable (--include, --exclude, --filter, -f)
	and added the one new option that will be in 2.6.5.

2005-04-26  Peter Stephenson  <pws@csr.com>

	* 21195 (c.f. 21194 from Bart): Src/pattern.c,
	Test/D04parameter.ztst: 21170 broke handling of zero-length
	quoted test strings.

2005-04-25  Peter Stephenson  <pws@csr.com>

	* 21184: Test/B04read.ztst: test for foregoing fix.

	* users/8752: Src/builtin.c: stripping IFS characters after
	reading a line in the read builtin wasn't sensitive to metafied
	characters.

2005-04-24  Bart Schaefer  <schaefer@zsh.org>

	* unposted: Src/parse.c: get rid of unused third argument of
	zwcstat().

	* unposted: Functions/Prompts/prompt_bart_setup: employ a variant
	of Oliver's suggestion from 21117 to handle promptcr better.

	* unposted: Doc/Zsh/builtins.yo, Doc/Zsh/compctl.yo,
	Doc/Zsh/compsys.yo, Doc/Zsh/compwid.yo, Doc/Zsh/expn.yo,
	Doc/Zsh/invoke.yo, Doc/Zsh/mod_zutil.yo, Doc/Zsh/tcpsys.yo:
	fix a lot of places where info compilation was reducing two
	hyphens to only one.

	* unposted: Doc/Makefile.in: yodl with a little less echo.

	* unposted (cf. 20494): Completion/Base/Widget/_generic,
	Doc/Zsh/compsys.yo: pass the positional parameters of _generic
	through to _main_complete.

	* 21174: Src/glob.c: additional Meta-increment/decrement of
	pointers when walking metafied strings (goes with 21170).

	* Tobias Gruetzmacher 21168 (slightly tweaked):
	Completion/Debian/Command/_apt,
	Completion/Debian/Type/_deb_packages,
	Completion/Unix/Command/_mount,
	Completion/Unix/Command/_subversion: localize some completion
	variables that were unnecessarily made global, and hide from
	typeset display the values of a few others.

2005-04-24  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 21170: Src/glob.c, Src/pattern.c: optimise length calculations
	which were causing inefficiency in ${...//.../...} on large
	string.

2005-04-22  Geoff Wing  <gcw@zsh.org>

	* 20162: Src/Zle/compresult.c: in printlist() don't output new line
	if we haven't printed anything

2005-04-21  Clint Adams  <clint@zsh.org>

	* users/8733: Completion/Unix/Command/_surfraw: rudimentary
	completion for surfraw.

2005-04-19  Clint Adams  <clint@zsh.org>

	* 21156: Completion/Debian/Command/_dpkg: tweaks to
	dpkg-reconfigure completion.

2005-04-18  Felix Rosencrantz  <f_rosencrantz@gmail.com>

	* 21154: Completion/Unix/Command/_perforce: add pid completion for
	monitor (clear|terminate) commands.

2005-04-17  Clint Adams  <clint@zsh.org>

	* 21153: Completion/Debian/Command/_module-assistant: incorporate
	most of the features of Stephen Rueger's _module-assistant, posted
	as 21152.

	* 21151: Completion/Debian/Command/_module-assistant: completion
	for module-assistant.

	* 21150: Completion/Unix/Command/_baz,
	Completion/Unix/Command/_tla: handle parsing of subcommand help
	output a bit more sanely.

2005-04-16  Bart Schaefer  <schaefer@zsh.org>

	* unposted (see 21148): Test/A04redirect.ztst: update test for
	change in error message.

2005-04-16  Clint Adams  <clint@zsh.org>

	* 21147: Completion/Unix/Command/_baz,
	Completion/Unix/Command/_tla, Completion/Unix/Type/_arch_archives,
	Completion/Unix/Type/_arch_namespace: factor out some common code
	from _tla and _baz, and fix some breakage from 21075.

2005-04-15  Peter Stephenson  <pws@csr.com>

	* 21143: Src/exec.c, Src/Modules/socket.c: be more careful when
	closing or opening sockets onto file descriptors.

2005-04-14  Peter Stephenson  <pws@csr.com>

	* 21141: Doc/Zsh/redirect.yo, Src/exec.c, Test/A04redirect.ztst:
	make NO_CLOBBER apply to {myfd}>... redirections, improve
	some error cases, fix bug that {myfd}>>(...) hung on a builtin.

2005-04-13  Bart Schaefer  <schaefer@zsh.org>

	* 21064: Test/D03procsubst.ztst: test case for 21049.

2005-04-13  Peter Stephenson  <pws@csr.com>

	* 21136: Test/C03traps.ztst: don't leave TRAPEXIT file lying
	around in Test directory.

2005-04-12  Clint Adams  <clint@zsh.org>

	* 21135: Completion/Unix/Command/_screen: complete attached
	sessions after screen -x.

2005-04-12  Peter Stephenson  <pws@csr.com>

	* 21134: Test/A04redirect.ztst: error for bad file descriptor
	can vary between systems.

	* 21133: Doc/Zsh/redirect.yo, Src/exec.c, Src/parse.c, Src/text.c,
	Src/zsh.h, Test/A04redirect.ztst: New {myfd}> syntax for
	allocating file descriptors.

2005-04-11  Clint Adams  <clint@zsh.org>

	* 21132: Completion/Unix/Type/_pdf, Completion/X/Command/_xpdf:
	complete xpdf options, and also complete .pdf.bz2 files when
	completing compressed PDF files.

2005-04-11  Peter Stephenson  <pws@csr.com>

	* 21131: Src/init.c, Test/A01grammar.ztst: exit with status 127
	when a script is not found, making the error message more
	sensible.

2005-04-10  Clint Adams  <clint@zsh.org>

	* unposted: config.guess, config.sub: update to 2005-03-24 and
	2005-02-10, respectively.

2005-04-08  Clint Adams  <clint@zsh.org>

	* 21125: Src/Zle/zle_main.c: do an initial conversion when
	zle is loaded.

	* 21124: Src/Zle/zle_main.c, Src/init.c, Src/params.c:
	have zle cache a wide-char version of WORDCHARS each time
	it's changed (when ZLE_UNICODE_SUPPORT is defined).

2005-04-08  Oliver Kiddle  <opk@zsh.org>

	* 21107: configure.ac: handle case where there is a native iconv
	but GNU libiconv's iconv.h is picked up first

2005-04-06  Clint Adams  <clint@zsh.org>

	* 21096: Completion/X/Command/_gv: update for gv 3.6,
	which uses double-hyphen options.

2005-04-06  Peter Stephenson  <pws@csr.com>

	* Carlos Phillips <carlos.phillips@mail.mcgill.ca>:
	private email: Completion/Unix/Command/_darcs: much improved
	completion for darcs.

2005-04-05  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync:  Made --address
	work for both client- and daemon-mode.

2005-04-05  Peter Stephenson  <pws@csr.com>

	* 21095 slightly tweaked to include bits of users/8658:
	Etc/FAQ.yo: update completion FAQ and the most out-of-date
	parts of the description of bugs and features.

2005-04-04  Peter Stephenson  <pws@csr.com>

	* Toby Peterson: 21083: On Mac OS X 10.4, the AS and RSS rlimits
	are the same.  Also utmpx doesn't have ut_name.  In fact, it
	doesn't seem to have it on any system.

	* Dan Nelson: 21082: Src/exec.c, Test/A01grammar.ztst: fix zsh -c
	exit status on parse error.

2005-04-03  Andrey Borzenkov  <bor@zsh.org>

	* 21086: Completion/Unix/Command/_rsync: fix module completion,
	redirect rsync errors to /dev/null, use -S "" as suggested
	by Oliver.

	* 21085: Completion/Mandrake/Command/_urpmi: update for 10.2,
	add parsehdlist, use urpmq --list options to get media and
	package list

2005-04-01  Oliver Kiddle  <opk@zsh.org>

	* 21081: Completion/Unix/Command/_fuser: complete network
	services for the psmisc version of fuser

	* unposted: Completion/Unix/Command/_subversion: minor correction

2005-04-01  Peter Stephenson  <pws@csr.com>

	* c.f. 21071: Doc/Zsh/{builtins.yo,compsys.yo,compwid.yo,func.yo,
	grammar.yo,mod_clone.yo,mod_computil.yo,mod_system.yo,mod_zftp.yo,
	mod_zpty.yo,mod_zselect.yo,mod_zutil.yo,params.yo,prompt.yo,
	tcpsys.yo}: use "status" for exit and return status
	instead of "value" or "code".

	* 21078: Src/init.c, Test/A01grammar.ztst: parse errors didn't
	cause non-zero exit status.

2005-03-31  Oliver Kiddle  <opk@zsh.org>

	* 21076: Completion/Unix/Command/_subversion: use _files with
	(e) glob qualifier to handle completing files by their status

2005-03-27  Clint Adams  <clint@zsh.org>

	* 21075: Completion/Unix/Command/_baz: update baz completion
	to not use -A option since it's being dropped in baz 1.3.

	* Zack Cerza: 21074: Completion/Debian/Command/_aptitude: update
	for newer aptitude.

2005-03-31  Peter Stephenson  <pws@csr.com>

	* 21049: Src/exec.c, Src/init.c, Src/utils.c, Src/zsh.h: Don't
	close file descriptors opened for process substitution when
	executing external programmes in a shell function.  Rewrite
	the corresponding code to make it more transparent.

2005-03-28  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync:  Added --protocol.

2005-03-27  Clint Adams  <clint@zsh.org>

	* 21068: Completion/Unix/Command/_subversion: complete modified
	files for 'svn revert'.

2005-03-27  Andrey Borzenkov  <bor@zsh.org>

	* 21066: Completion/Unix/Command/_rsync: rsync:// URL support,
	fix modules completion, strip remote banners

2005-03-24  Andrey Borzenkov  <bor@zsh.org>

	* 21053: Completion/X/Command/_kfmclient: use kde search path
	to find profiles in openProfile

2005-03-22  Andrey Borzenkov  <bor@zsh.org>

	* 21051 (modified as suggested by Oliver in 21052):
	Completion/Unix/Command/_fuser: for SVR4 complete signals only after
	-k; fix file name as first argument.

2005-03-21  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 21046: Completion/Base/Completer/_approximate:  use extra tests
	and "always" block to make unfunction of compadd more reliable.

2005-03-21  Peter Stephenson  <pws@csr.com>

	* 21045: Src/Zle/compcore.c, Src/Zle/complete.c: more places
	where completion didn't handled Meta characters.

2005-03-21  Oliver Kiddle  <opk@zsh.org>

	* Stephen Rüger: 21019: Completion/Unix/Command/_mpc:
	new completion for mpc

2005-03-21  Peter Stephenson  <pws@csr.com>

	* 21042: Src/Zle/zle_main.c, Doc/Zsh/zle.yo: test for and
	document limitation that execute-named-command and
	execute-last-named-command can't be redefined or called by name.

2005-03-18  Wayne Davison  <wayned@users.sourceforge.net>

	* 20984 (modified): Src/zsh.h, Src/options.c, Src/hist.c,
	Doc/Zsh/options.yo:  Added a new option, HIST_SAVE_BY_COPY, and
	made it enabled by default.  This changes the rewriting of the
	history file to be done via copy and rename rather than truncate
	and write-in-place.

2005-03-18  Peter Stephenson  <pws@csr.com>

	* 21014: Src/Zle/zle_hist.c: remember_edits() was broken,
	which meant that searching the current line didn't work.

	* zsh-users/8609: Doc/Zsh/expn.yo: document order of (u), (o)
	and (O) parameter expansion flags.

2005-03-16  Peter Stephenson  <pws@csr.com>

	* 20983: Test/D02glob.ztst, Src/glob.c: fixed string segments
	in globbed paths could be copied wrongly, resulting in failed globs.

2005-03-15  Peter Stephenson  <pws@csr.com>

	* 20978: Src/zle_main.c: don't propagate EOFs from recursive
	edit.

2005-03-11  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync:  A few more tweaks
	to the various --*-dest options.

2005-02-28  Philippe Troin  <phil@fifi.org>

	* 20886: configure.ac: Use TTOU with trap rather than SIGTTOU.

2005-03-13  Bart Schaefer  <schaefer@zsh.org>

	* unposted: Functions/Prompts/prompt_bart_setup: Update to some
	4.2.2+ features, and add special handling for nopromptcr.

2005-03-11  Bart Schaefer  <schaefer@zsh.org>

	* 20892: Src/utils.c: sanity improvements for setopt correctall,
	plus spell-check directory names for autocd with setopt correct.
	(Note this works only one level deep, not for paths with slashes.)

2005-03-11  Peter Stephenson  <pws@csr.com>

	* 20966: Src/Zle/zle_misc.c: need to copy strings to avoid
	crash in completion for execute-named-command.

2005-03-09  Clint Adams  <clint@zsh.org>

	* 20961: Completion/Unix/Command/_baz: fix completion of status and
	diff subcommands.

2005-03-10  Andrey Borzenkov  <bor@zsh.org>

	* 20957: Completion/Unix/Command/_fuser:
	Add support for Solaris and SVR4

2005-03-10  Peter Stephenson  <pws@csr.com>

	* 20959 (variant of 20958): Src/params.c, Src/Module/parameter.c,
	Test/V01zmodload.ztst: fix crash unloading zsh/parameter and test.

2005-03-09  Peter Stephenson  <pws@csr.com>

	* 20955: README, Src/builtin.c: "unset foo" should return
	status 0 if foo was not set.

2005-03-09  Motoi Washida  <a66@h8.dion.ne.jp>

	* 20953: Completion/Unix/Command/_du: "du --version" tries to
	display size of files in current directory on FreeBSD and Darwin.

2005-03-09  Clint Adams  <clint@zsh.org>

	* 20951: Completion/Unix/Command/_baz: fix version detection
	and baz merge completion.

2005-03-07  Clint Adams  <clint@zsh.org>

	* 20946: Completion/Linux/Command/_iwconfig: completion for
	iwconfig command.

2005-03-07  Peter Stephenson  <pws@csr.com>

	* 20945: Src/Zle/zle_misc.c: rename static variables to
	avoid clash with "cmdstr" exported by zle_tricky.c.

2005-03-07  Clint Adams  <clint@zsh.org>

	* 20944: Completion/Debian/Command/_uscan: completion for
	uscan command.

	* 20943: Completion/Linux/Command/_tune2fs: completion for
	tune2fs command.

	* 20942: Completion/Unix/Command/_showmount: completion for
	showmount command.

	* 20941: Completion/Unix/Command/_mii-tool: completion for mii-tool
	command.

	* 20940: Completion/Unix/Command/_knock: completion for knock
	command.

	* 20939: Completion/Unix/Command/_groff: completion for groff
	command.

	* 20938: Completion/Unix/Command/_fuser: completion for fuser
	command.

	* 20937: Completion/Unix/Command/_fortune: completion for fortune
	command.

	* 20936: Completion/Linux/Command/_acpi: completion for acpi
	command.

2005-03-05  Andrey Borzenkov  <bor@zsh.org>

	* Tobias Gruetzmacher: 20932: Completion/X/Command/_kfmclient:
	Add copy command

2005-03-04  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* unposted: Src/Zle/zle_refresh.c: correct deliberate mistake.

	* 20928: Src/Zle/zle_refresh.c: null terminate lines so that they
	can be compared reliably.

2005-03-04  Motoi Washida  <a66@h8.dion.ne.jp>

	* unposted: Completion/Darwin/Command/_softwareupdate: new completion

	* unposted: Completion/Darwin/Command/_hdiutil: arguments are
	required after -imagekey, -srcimagekey options

2005-03-03  Oliver Kiddle  <opk@zsh.org>

	* 20921, 20924: Src/utils.c, Completion/Unix/Command/_iconv:
	using UCS-4BE instead of ISO-10646 to identify character
	encoding is more portable; make error message more specific;
	find more encodings in iconv completion on Solaris

	* Henryk Konsek: 20918 (modified): Completion/Unix/Command/_unace:
	new completion for unace

2005-03-03  Peter Stephenson  <pws@csr.com>

	* from Wayne, adapted: 20900: another way of preventing
	text without a newline from being overwritten by the prompt.
	(Originally suggested by Karl Chen in 20896.)

2005-03-02  Clint Adams  <clint@zsh.org>

	* 20906: Completion/Unix/Command/_make: patch from
	Mike "Stew" O'Connor to limit recursion depth in make
	completion variable expansion.

2005-03-02  Wayne Davison  <wayned@users.sourceforge.net>

	* 20917: Completion/Unix/Command/_make: Don't try to expand a
	single-character Makefile variable if it is a digit.  Avoids
	an infinite recursion from a Makefile referencing $1.

2005-03-02  Clint Adams  <clint@zsh.org>

	* 20909, 20911: Src/Modules/termcap.c: reverse row and col
	arguments to tgoto(), and set affcnt to 1 unconditionally
	when we echotc a capability with arguments (which we then
	assume to be the 'cm' capability, with arguments in the
	form <rows> <columns>.

2005-03-01  Peter Stephenson  <pws@csr.com>

	* 20897: Completion/Unix/Command/_a2ps: complete system printers
	as well as those configured into a2ps.

2005-02-28  Peter Stephenson  <pws@csr.com>

	* 20888: Doc/Zsh/builtins.yo, Src/jobs.c: allow the prefix
	SIG in signal names used with the trap and kill builtins, for
	compatibility.

2005-02-26  Andrey Borzenkov  <bor@zsh.org>

	* 20872: Src/Zle/zle_utils.c, Src/Zle/zle_vi.c, Src/Zle/zle_word.c:
	Fix ZC_ vs. ZS_ confusion.

2005-02-25  Peter Stephenson  <pws@csr.com>

	* 20869: Src/Zle/zle.h, Src/Zle/zle_hist.c, Src/Zle/zle_main.c,
	Src/Zle/zle_refresh.c, Src/Zle/zle_utils.c, Src/Zle/zle_vi.c,
	Src/Zle/zle_word.c: more small Unicode tweaks

2005-02-25  Oliver Kiddle  <opk@zsh.org>

	* 20867: Completion/Unix/Command/_ant: handle imported files
	that are specified using a relative path

2005-02-24  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 20866: Src/Zle/zle_misc.c: two mistakes in 20861.

2005-02-24  Oliver Kiddle  <opk@zsh.org>

	* Konstantin Sobolev: 20832 (modified):
	Completion/Unix/Command/_ant: gather targets from imported files

	* 20862: configure.ac, Src/system.h, Src/utils.c: attempt to
	fix configure scripts to detect iconv properly

2005-02-24  Peter Stephenson  <pws@csr.com>

	* 20863: Src/utils.c, Src/zsh.h, Src/Zle/zle.h,
	Src/Zle/zle_hist.c, Src/Zle/zle_utils.c: fix history (i)searching
	for Unicode.

	* 20861: Src/Zle/complist.c, Src/Zle/zle.h, Src/Zle/zle_hist.c,
	Src/Zle/zle_main.c, Src/Zle/zle_misc.c, Src/Zle/zle_refresh.c,
	Src/Zle/zle_thingy.c, Src/Zle/zle_vi.c: Fix use of statusline
	with Unicode, apart from isearch.

2005-02-23  Andrey Borzenkov  <bor@zsh.org>

	* 20857 (modified): Src/Zle/zle.h, Src/Zle/zle_refresh.c: use
	wide characters internally. This fixed cursor position with
	multibyte characters bug without any significant code change.
	Is still does not use character width information.

2005-02-23  Peter Stephenson  <pws@csr.com>

	* 20856: Src/Zle/complist.c: use VARARR for multibyte string.

	* 20854: Src/Zle/complist.c, Src/Zle/zle.h, Src/Zle/zle_hist.c,
	Src/Zle/zle_main.c, Src/Zle/zle_misc.c, Src/Zle/zle_move.c,
	Src/Zle/zle_params.c, Src/Zle/zle_refresh.c, Src/Zle/zle_tricky.c,
	Src/Zle/zle_utils.c, Src/Zle/zle_vi.c: more Unicode stuff.

2005-02-23  Clint Adams  <clint@zsh.org>

	* 20847: Completion/compaudit: stop adding gratuitous
	elements to fpath when MARK_DIRS is set.

2005-02-23  Andrey Borzenkov  <bor@zsh.org>

	* 20845: Src/Zle/zle_main.c, Src/Zle/zle_utils.c: fix
	multibyte input in getrestchar; fix cursor position in
	zlelineasstring when cs == ll.

2005-02-22  Peter Stephenson  <pws@csr.com>

	* 20843: Doc/Zsh/expn.yo, Src/utils.c: named directories always
	have trailing slashes pruned.  Any related parameter remains
	unmodified.

	* Andrey Borzenkov: 20838 with minor tweaks: Src/system.h,
	Src/Zle/zle.h, Src/Zle/zle_main.c, Src/Zle/zle_misc.c,
	Src/Zle/zle_tricky.c, Src/Zle/zle_utils.c: fixes to
	get ZLE_UNICODE_SUPPORT basically working.

2005-02-21  Peter Stephenson  <pws@csr.com>

	* 20837: Doc/Zsh/contrib.yo: typos.

	* 20834: Completion/X/Command/_kfmclient: use _webbrowser for
	file/URL arguments.

	* 20833: Src/Zle/zle.h: typo in 20822: int_t should have
	been wint_t.

2005-02-19  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync:  A little more
	cleanup and 2 more options for the upcoming rsync 2.6.4
	release.

2005-02-19  Motoi Washida  <a66@h8.dion.ne.jp>

	* users/8522: Completion/Darwin/Command/_defaults: fixed the
	number of spaces broken while sending the patch by email.

2005-02-18  Peter Stephenson  <pws@csr.com>

	* 20828: Src/zle_main.c, Src/zle_misc.c: typos in 20822.

	* 20823: Src/Modules/stat.c: debugging test failed on 64-bit
	machines.

	* 20822: system.h, Src/Zle/complist.c, Src/Zle/deltochar.c,
	Src/Zle/zle.h, Src/Zle/zle_hist.c, Src/Zle/zle_keymap.c,
	Src/Zle/zle_main.c, Src/Zle/zle_misc.c, Src/Zle/zle_move.c,
	Src/Zle/zle_thingy.c, Src/Zle/zle_tricky.c, Src/Zle/zle_utils.c,
	Src/Zle/zle_vi.c: improve input ready for multibyte/Unicode
	handling, massaging use of getkey() and lastchar.

	* Motoi Washida: users/8522: Completion/Darwin/Command/_defaults:
	Fix quotation in Darwin completion.

2005-02-16  Peter Stephenson  <pws@csr.com>

	* 20816: Src/Builtins/rlimits.awk: extra tricks to get limit
	names and numbers required with new glibc.

2005-02-15  Peter Stephenson  <pws@csr.com>

	* 20812: Doc/Zsh/contrib.yo, Functions/Exceptions/catch,
	Functions/Exceptions/throw, Src/zsh.mdd: add functions for
	exception handling using "always" block.

2005-02-14  Peter Stephenson  <pws@csr.com>

	* 20811: configure.ac: Copy the trick for finding the
	file with signal names to make finding the file with resource
	names more reliable.

2005-02-14  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync:  Divided the options
	so that daemon options and client options are not intermixed.
	Improved some descriptions and added new options for 2.6.4.

2005-02-10  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_yodl:  Added missing
	closing double-quote.

2005-02-09  Bart Schaefer  <schaefer@zsh.org>

	* Kris Shannon: 20801: Completion/Unix/Command/_init_d: fix
	missing $ in the param expansion that parses the init script.

2005-02-07  Peter Stephenson  <pws@csr.com>

	* 20798: Src/init.c: need to propagate some #ifdef's to get
	warnings to go away.

	* 20794: Config/version.mk, Src/init.c: change dev version
	to 4.3.0-dev-1 and (unrelated) don't compile in static function
	unless needed.

2005-02-06  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* (cheated and guessed) 20793: Src/builtin.c, Src/exec.c,
	Src/hashtable.c, Src/Modules/parameter.c, Src/Module/zftp.c,
	Src/parse.c, Src/signals.c, Test/C03traps.ztst: Fix bug that
	autoloaded TRAPEXIT wasn't restored properly after running an
	intermediate function; only use sigfuncs (renamed to siglists) for
	eval-style traps; augment and fix trap tests.

2005-02-04  Peter Stephenson  <pws@csr.com>

	* 20787: configure.ac, Config/defs.mk.in, Doc/.distfiles,
	Doc/Makefile.in: generate zsh.pdf from zsh.texi using pdfetex;
	much better output than PS from DVI.

	* Motoi Washida: 20785: configure.ac: libiconv test needed
	for Mac OS X 3.

2005-02-02  Peter Stephenson  <pws@csr.com>

	* 20777: Test/A06assign.ztst, Test/C02cond.ztst: tests for
	users/8422 and 20774.

2005-02-01  Bart Schaefer  <schaefer@zsh.org>

	* 20774: Src/exec.c: fix e.g. "FOO=BAR BAR=FOO echo" failure to
	unset FOO after finishing.

2005-02-01  Clint Adams  <clint@zsh.org>

	* 20773: Completion/Unix/Command/_getconf: additional variables
	from confstr().

2005-02-01  Peter Stephenson  <pws@csr.com>

	* Peter A. Castro: 20759 updated as 20760 and 20765: configure.ac,
	Src/system.h, Src/utils.c: Improve configuration of libiconv and
	pcre on Cygwin.

2005-01-28  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync: Added new options
	for impending 2.6.4 release and improved the descriptions of
	several others.  Also dropped "-- ..." options to _arguments.

2005-01-27  Peter Stephenson  <pws@csr.com>

	* users/8433: configure.ac: Latest Cygwin hangs on FIFO test,
	so tell it explicitly that FIFOs don't work.

2005-01-26  Clint Adams  <clint@zsh.org>

	* 20753: Src/system.h, Src/Zle/zle_params.c: use ZS_memmove
	instead of memmove.

2005-01-26  Peter Stephenson  <pws@csr.com>

	* 20752: Src/system.h, Src/Zle/zle.h, Src/Zle/zle_hist.c,
	Src/Zle/zle_main.c, Src/Zle/zle_params.c, Src/Zle/zle_refresh.c,
	Src/Zle/zle_utils.c: Fix access to zle parameters.

2005-01-26  Clint Adams  <clint@zsh.org>

	* 20747, 20751: Src/Zle/zle_refresh.c, Src/system.h: some
	wide char support in the zle refresh code.

2005-01-26  Peter Stephenson  <pws@csr.com>

	* 20750: Src/zle_utils.c: 20742 could cause hang when line
	resized to empty.

2005-01-25  Peter Stephenson  <pws@csr.com>

	* 20742: Src/system.h, Src/Zle/zle.h, Src/Zle/zle_main.c,
	Src/Zle/zle_misc.c, Src/Zle/zle_params.c, Src/Zle/zle_utils.c:
	More Unicode stuff.  A few more definitions, some conversion
	utilities between line and string, fix types and sizes for
	cutbuffer/killring and undo.

2005-01-24  Peter Stephenson  <pws@csr.com>

	* users/8422: Src/cond.c: [[ ... -nt ... ]] and [[ ... -ot ... ]]
	with non-existent files (or any failed state) were recorded
	as errors, causing initialisation scripts, functions, etc., etc.
	to exit.

2005-01-23  Clint Adams  <clint@zsh.org>

	* 20737, 20739: Completion/Unix/Command/_subversion: run svn
	  commands with LC_MESSAGES=C.

2005-01-22  Clint Adams  <clint@zsh.org>

	* 20736: Src/Zle/zle_utils.c: change zlegetline() to return
	a metafied string.

	* unposted (cf. zsh-users/8412): Config/version.mk: fix
	year typo.

	* 20735: Src/Zle/zle_utils.c, Src/hist.c: modify zlegetline() and
	zlegetline caller so that the octet-based and wide-character
	versions should return the same string.

2005-01-21  Bart Schaefer  <schaefer@zsh.org>

	* unposted (cf. zsh-users/8409): Functions/Zle/keeper: "keeper"
	suite from unixreview.com article.

2005-01-21  Oliver Kiddle  <opk@zsh.org>

	* unposted: remove Completion/Unix/Command/_larch: larch has
	been superseded by tla and is no longer available

	* 20734: Completion/Linux/Command/_valgrind: rewrite to handle
	version 2.2.0 of valgrind

	* 20730 (modified): Completion/Base/Completer/_expand: fix
	suffix style to regard quoted special characters as not special

2005-01-19  Peter Stephenson  <pws@csr.com>

	* 20728 (with typo fixed): configure.ac, Doc/Zsh/builtins.yo,
	Src/Builtins/rlimits.awk, Src/Builtins/rlimits.c: Handle
	RLIMIT_MSGQUEUE (-q), RLIMIT_SIGPENDING (-i), also use
	-x for RLIMIT_LOCKS in ulimit.

2005-01-17  Peter Stephenson  <pws@csr.com>

	* unposted: suggested by Bart: Etc/FAQ.yo: update a few entries.

2005-01-17  Oliver Kiddle  <opk@zsh.org>

	* Motoi Washida: users/8380: Completion/Darwin/Command/_defaults:
	complete plist files

2005-01-16  Clint Adams  <clint@zsh.org>

	* 20718: Src/Zle/zle_utils.c: minor cleanup for proto-Unicode
	stuff.

2005-01-14  Peter Stephenson  <pws@csr.com>

	* unposted: update version to 4.2.3-dev-1.

	* c.f. 20675: configure.ac, Src/builtin.c, Src/exec.c, Src/hist.c,
	Src/init.c, Src/input.c, Src/jobs.c, Src/lex.c, Src/loop.c,
	Src/params.c, Src/signals.c, Src/system.h, Src/utils.c, Src/zsh.h,
	Src/Zle/compcore.c, Src/Zle/compctl.c,
	Src/Zle/complist.c, Src/Zle/compresult.c, rc/Zle/deltochar.c,
	Src/Zle/zle.h, Src/Zle/zle_hist.c, Src/Zle/zle_main.c,
	Src/Zle/zle_misc.c, Src/Zle/zle_move.c, Src/Zle/zle_params.c,
	Src/Zle/zle_refresh.c, Src/Zle/zle_tricky.c, Src/Zle/zle_utils.c,
	Src/Zle/zle_vi.c, Src/Zle/zle_word.c: Make it easier to add
	support for Unicode etc. to Zle. line is called zleline and is not
	directly visible in the main shell.  cs and ll are called zlecs
	and zlell but are still visible in the main shell (this will
	probably need changing).  Pointers to zle functions are addressed
	by pointer not by confusing #define's.  Add beginnings of support
	to configure.ac and system.h.  Very many pitfalls remain.

2005-01-13  Peter Stephenson  <pws@csr.com>

	* 20708: Doc/Zsh/contrib.yo, Functions/Zle/replace-string:
	replace-string can offer previous values for editing.

	* unposted: README, Config/version.mk, Etc/FAQ.yo:
	release 4.2.3.

	* 20698: Test/ztst.zsh: improve 20692 by using tail function
	to overcome POSIX problems.

2005-01-12  Oliver Kiddle  <opk@zsh.org>

	* 20701: Src/system.h: fix compilation on Mac OS X

2005-01-12  Peter Stephenson  <pws@csr.com>

	* users/8359: Src/Zle/complete.mdd: add in Completion/Darwin
	directories to default installation.

	* users/8354: Doc/Zsh/options.yo: with glob_complete, completing
	a word with a pattern does not use matching control.

	* unposted: Config/version.mk, README, Etc/FAQ.yo: release
	zsh version 4.2.2.

	* 20695: Src/module.c, Src/zsh.h, Src/Modules/parameter.c,
	Src/Zle/zleparameter.c: Cygwin barfs on an attempt to
	use a pointer to an imported variable in a compile-time
	initialiser.

	* unposted: Fix .distfiles and .cvsignore for distribution.

	* unposted: Completion/Unix/Command/_perforce: minor comment
	change.

	* 20692: Test/ztst.zsh: having POSIXLY_CORRECT set makes
	GNU tail report warning with -<NUM>.

2005-01-11  Clint Adams  <clint@zsh.org>

	* unposted: config.guess, config.sub: update to 2004-11-12 and
	2004-11-30, respectively.

	* 20689: Etc/FAQ.yo: fix missing-word typo.

	* 20657: Src/Zle/zle_tricky.c: sort completions partially based on
	LC_COLLATE setting.

	* unposted: Completion/X/Command/_gnome-gv: move gnome-gv
	completion from C/U/C to C/X/C.

2005-01-11  Peter Stephenson  <pws@csr.com>

	* 20688: Etc/FAQ.yo: add notes on Unicode/UTF-8 adapted from
	Clint.

	* 20687: NEWS: news for 4.2.2.

2005-01-11  Bart Schaefer  <schaefer@zsh.org>

	* 20666 (tweaked): Src/exec.c: In closemn(), discard the multio
	structure when it has only one descriptor so far, to avoid
	creating an unnecessary multio if a later redirect re-opens that
	descriptor.

2005-01-10  Clint Adams  <clint@zsh.org>

	* 20665: Completion/Unix/Command/_gnome-gv,
	Completion/Unix/Type/_pspdf: improve completion for
	ggv/gnome-gv.

2005-01-10  Peter Stephenson  <pws@csr.com>

	* 20661: Doc/Zsh/expn.yo, Src/glob.c: allow (+func) as shorthand
	for (e:func:) in glob qualifier.

2005-01-10  Oliver Kiddle  <opk@zsh.org>

	* 20662: Completion/X/Command/_nedit: update for nedit 5.5

2005-01-09  Clint Adams  <clint@zsh.org>

	* 20655: Completion/Debian/Type/_deb_packages:
	_deb_packages fix from Karl Chen.

	* 20654: Completion/Debian/Command/_dpkg,
	Completion/Debian/Command/_wajig,
	Completion/Debian/Type/_deb_packages: completion for wajig, and
	dpkg/deb_packages improvements from Karl Chen.

2005-01-07  Clint Adams  <clint@zsh.org>

	* 20650: Completion/Unix/Command/_mencal:
	completion for mencal.

	* 20649: Completion/Unix/Command/_cal:
	completion for cal and ncal.

2005-01-05  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: limit many
	uses of pending changes to pending changes on the current client.

	* 20632: propagating signals incorrectly to current process
	group could kill shell.

2004-12-27  Clint Adams  <clint@zsh.org>

	* 20639: Completion/Unix/Command/_bogofilter:
	improve 'bogoutil' completion for 0.93.3.1.

2004-12-25  Clint Adams  <clint@zsh.org>

	* 20637: Completion/Debian/Command/_lintian: add
	completion for 'lintian', a Debian package checker.

	* 20636: Completion/Unix/Command/_bogofilter: add
	completion for 'bogofilter' and 'bogotune' commands.

2004-12-24  Clint Adams  <clint@zsh.org>

	* 20635: Completion/Unix/Command/_bogofilter: update
	bogoutil completion for 0.93.3.

	* 20634: Completion/Unix/Command/_postfix: completion
	for postsuper.

2004-12-15  Clint Adams  <clint@zsh.org>

	* 20626: Completion/Unix/Command/_baz: completion
	derived from _tla by Matt Zimmerman.

	* 20627: Completion/Unix/Command/_bogofilter:
	updated completion for newer bogoutil.

2004-12-10  Andrey Borzenkov  <bor@zsh.org>

	* 20617: Completion/Linux/Command/_modutils: fix
	completion of compressed modules on kernel 2.6; add
	trivial insmod completion.

2004-12-09  Peter Stephenson  <pws@csr.com>

	* 20613, 20614: Functions/Zle/match-words-by-style: fix
	inconsistencies with embedded whitespace when matching by shell
	words.

	* 20612: Doc/Zsh/contrib.yo, Functions/Zle/match-words-by-style:
	options to match-words-by-style can override styles.

2004-12-07  Peter Stephenson  <pws@csr.com>

	* 20605: Doc/Zsh/builtins.yo, Src/builtin.c, Src/exec.c,
	Src/module.c, Src/params.c, Src/subst.c, Src/zsh.h,
	Src/Modules/datetime.c, Src/Modules/langinfo.c,
	Src/Modules/mapfile.c, Src/Modules/parameter.c,
	Src/Modules/system.c, Src/Modules/termcap.c,
	Src/Modules/terminfo.c, Src/Modules/zftp.c, Src/Zle/compctl.c,
	Src/Zle/complete.c, Src/Zle/computil.c, Src/Zle/zle_params.c,
	Src/Zle/zleparameter.c, Test/B02typeset.ztst: Use separate
	structures for get, set and unset methods of parameters.
	Separate width and base/precision for parameters, so that
	justification works for integers.

	* 20606: Test/V03mathfunc.ztst: simple verification of
	pseudorandom numbers.

2004-12-06  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 20601: Completion/Unix/Command/_python: update python completion for
	version 2.4

2004-12-01  Wayne Davison  <wayned@users.sourceforge.net>

	* 20595 (modified): Src/compat.c: some style tweaks to zchdir().

2004-12-01  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 20587: Completion/Unix/Command/_screen: update screen completion for
	version 4.00

2004-11-30  Peter Stephenson  <pws@csr.com>

	* 20599: Test/C01arith.ztst: 20592 needs consequent test change.

2004-11-29  Peter Stephenson  <pws@csr.com>

	* 20591: Stephane Chazelas <Stephane_Chazelas@yahoo.fr>:
	Src/compat.c: use of fchdir in zchdir could leak a file descriptor.

	* 20592: Src/math.c: $((##)) caused mayhem by passing null
	string to getkeystring().  Report error instead.

2004-11-24  Clint Adams  <clint@zsh.org>

	* 20583: Completion/Unix/Command/_ssh: complete "modern" options
	such as GSSAPIAuthentication.

2004-11-27  Doug Kearns  <djkea2@gus.gscit.monash.edu.au>

	* 20584: Completion/Unix/Command/_screen: offer multiuser screen
	sessions for attaching/detaching

2004-11-24  Clint Adams  <clint@zsh.org>

	* 20578: Functions/Prompts/prompt_elite2_setup:
	handle ttys with slashes in them.

2004-11-23  Peter Stephenson  <pws@csr.com>

	* 20576: Src/signals.c: 20572 caused core dump when
	trying to run a signal where the function had already
	been removed.

2004-11-22  Peter Stephenson  <pws@csr.com>

	* 20572: Doc/Zsh/builtins.yo, Src/builtin.c, Src/exec.c,
	Src/jobs.c, Src/signals.c, Src/utils.c: Allow -CLD and -IO
	as alternatives to -CHLD and -POLL where they are the same signal.

2004-11-20  Doug Kearns  <djkea2@mugca.its.monash.edu.au>

	* 20571: Completion/Unix/Command/_java: update javac completion for
	J2SE 5.0

2004-11-19  Peter Stephenson  <pws@csr.com>

	* 20568: Src/pattern.c: in debug test, checking for NULL
	character is no longer valid.

	* 20566: Src/signames2.awk: prefer SIGCHLD to SIGCLD.
	Also (unposted) prefer SIGPOLL to SIGIO.

2004-11-18  Clint Adams  <clint@zsh.org>

	* unposted: Completion/Unix/Command/_bogofilter: fix -w/-p typo, which was
	noticed by Michał Politowski.
	* unposted: Completion/Unix/Type/_pdf: complete pdf files for kpdf.

2004-11-16  Peter Stephenson  <pws@csr.com>

	* users/8219: Doc/Zsh/params.yo, Doc/Zsh/zle.yo,
	Src/params.c: Add $HISTCMD which gives the current history
	line number as in bash.  Works like ${(%):-%!} except that a human
	being could find out how to use it, too.  Note it is
	distinct from zle's $HISTNO.

	* 20556: AIX 5.3 has a SOCKLEN_T definition, so use
	ZSOCKLEN_T internally.

2004-11-12  Peter Stephenson  <pws@csr.com>

	* Motoi Washida <a66@h8.dion.ne.jp>: 20274, 20552:
	Completion/Darwin/Command/_fink,
	Completion/Darwin/Command/_hdiutil,
	Completion/Darwin/Command/_open,
	Completion/Darwin/Type/_mac_applications,
	Completion/Darwin/Type/_mac_files_for_application,
	Completion/Darwin/Type/_retrieve_mac_apps: improved completion
	for Mac.

2004-11-10  Wayne Davison  <wayned@users.sourceforge.net>

	* 20551: Completion/Unix/Command/_make: handle $$ when
	expanding variables.

2004-11-09  Peter Stephenson  <pws@csr.com>

	* Jussi Pakkanen <jpakkane@yahoo.com>: users/8189:
	Completion/Unix/Command/_bittorrent: new completion.

2004-11-05  Bart Schaefer  <schaefer@zsh.org>

	* 20546: Src/Zle/compcore.c: fix "compadd -k assoc1 assoc2".

2004-11-02  Clint Adams  <clint@zsh.org>

	* 20539: Completion/Unix/Command/_make: avoid problems with
	minus signs in expandVars().

2004-10-29  Peter Stephenson  <pws@csr.com>

	* 20528: Src/exec.c: Clint spotted that fix in 18492 to make
	> >(...) synchronous failed in the case of an fd opened for the
	shell's own use with an exec.

2004-10-26  Peter Stephenson  <pws@csr.com>

	* 20522: Src/glob.c, Test/D02glob.ztst: must-match optimisation
	was broken for pattern substitutions in parameters.

2004-10-22  Wayne Davison  <wayned@users.sourceforge.net>

	* 20510: Borzenkov Andrey: Src/jobs.c: Fixed the arg to a call
	to times().

2004-10-22  Bart Schaefer  <schaefer@zsh.org>

	* unposted (based on 20514): Completion/compinit: _comp_options
	needs to include NO_kshtypeset.

2004-10-22  Peter Stephenson  <pws@csr.com>

	* 20513: Src/pattern.c, Test/D02glob.ztst: tests of zero length
	patterns didn't work after 20500.

	* unposted: Src/jobs.c: trivial optimisation.

2004-10-20  Wayne Davison  <wayned@users.sourceforge.net>

	* 20505: Src/utils.c, Src/builtin.c, Src/exec.c, Src/hist.c,
	Src/Modules/zftp.c:  Added gettempfile(), which works like a
	specialized mkstemp().

2004-10-19  Wayne Davison  <wayned@users.sourceforge.net>

	* 20503: Alexey Tourbin: Doc/Zsh/compsys.yo: corrected the
	completion-cache's default value.

2004-10-18  Wayne Davison  <wayned@users.sourceforge.net>

	* 20499 (modified): Src/builtin.c, Src/exec.c, Src/hist.c,
	Src/string.c, Src/utils.c, Src/Modules/zftp.c: improved gettempname(),
	added bicat(), and used these improvements to make the history-file
	locking better.

2004-10-18  Peter Stephenson  <pws@csr.com>

	* 20500: Misc/globtests, Src/glob.c, Src/pattern.c, Src/zsh.h,
	Src/Zle/complist.c, Test/D02glob.ztst: Use unmetafied strings
	in patterns more; improve glob.c/pattern.c interface; fix
	minor <num-> issue; add bogus quotation from Proust (it's
	my file and I'll do what I like with it).

2004-10-17  Wayne Davison  <wayned@users.sourceforge.net>

	* 20496: Src/utils.c: made zclose() not call close() when the
	fd arg is < 0.

	* unposted: Src/Zle/zle_main.c: initialize the first byte of
	the allocated "line" buffer so that we avoid uninitialized-
	memory warnings in valgrind.

2004-10-16  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 20490: Src/pattern.c, Src/zsh.h: use lengths for test strings in
	patterns instead of null termination.

2004-10-14  Peter Stephenson  <pws@csr.com>

	* 20482: Src/Zle/complist.c: A TAB after entering interactive
	completion caused nonsense to be inserted into the command
	line.  The behaviour of TAB is still probably not ideal.

2004-10-12  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_make: got rid of an unused
	local vaiable (cmdargs).

	* unposted: Completion/Unix/Command/_rsync: added 7 more options
	that were not described.

2004-10-08  Peter Stephenson  <pws@csr.com>

	* 20467: configure.ac, Doc/Zsh/params.yo, Src/exec.c, Src/jobs.c,
	Src/signals.c, Src/zsh.h: Finally reintroduce the
	TIMEFMT escapes from struct rusage removed ages ago.  Uses more
	sophisticated autconf tests to make configuration seamless.

2004-10-07  Peter Stephenson  <pws@csr.com>

	* 20462: configure.ac, Src/exec.c, Src/init.c, Src/jobs.c,
	Src/signals.c, Src/zsh.h: Improve process timing by using
	getrusage() where available (everywhere?) and by starting
	the wallclock just before a process is forked.

2004-10-07  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Completion/Unix/Command/_rsync: added options that
	are new in rsync 2.6.3.

2004-10-05  Peter Stephenson  <pws@csr.com>

	* unposted: Update README to indicate 20412.

	* 20435: Src/pattern.c: fix crash in negative matching.  Could do
	with being streamlined but that might be a big change.

	* 20412 (tweaked): Doc/Zsh/builtins.yo, Src/builtin.c, Src/cond.c,
	Src/exec.c, Src/utils.c: Make test and [ builtins more POSIX
	compatible: return status 2 for errors, require integer
	constants for numeric tests.

2004-10-01  Wayne Davison  <wayned@users.sourceforge.net>

	* 20438: Src/builtin.c, Src/hist.c, Src/params.c, Src/zsh.h:
	If the shell is exiting because it received a signal, we now
	skip rewriting the history file after appending any new lines.
	Has no affect unless APPEND_HISTORY, INC_APPEND_HISTORY, or
	SHARE_HISTORY are set.  This should avoid a history truncation
	glitch when too many shells are all trying to update the history
	file at the same time before being killed by a follow-up signal.

2004-10-01  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/params.c: silenced two compiler warnings about
	unused parameters.

2004-10-01  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: Src/builtin.c, Src/Modules/parameter.c: use convbase
	instead of a "%d" format to convert a zlong.

2004-10-01  Wayne Davison  <wayned@users.sourceforge.net>

	* 20277 (modified): Completion/Unix/Command/_make: completer now
	follows include files and expands variables (and does it all in
	zsh code instead of using awk or perl).

2004-10-01  Peter Stephenson  <pws@csr.com>

	* 20427, 20339 (modified): Completion/Base/Core/_main_complete,
	Doc/Zsh/compsys.yo:  Fix for problem with _oldlist and custom
	completion.  Also snuck in show-completer style with documentation.

2004-09-30  Clint Adams  <clint@zsh.org>

	* 20358: Completion/Unix/Command/_make: avoid potential gawk
	  locale bug by not using awk.

2004-09-29  Bart Schaefer  <schaefer@zsh.org>

	* 20418: Src/parse.c: fix crash-inducing bug with mis-parsing of
	incomplete pipeline expressions (e.g. "zsh -c 'echo |').

2004-09-28  Clint Adams  <clint@zsh.org>

	* 20414: Completion/Unix/Type/_diff_options: correct missing
	minus in --unified, spotted by Paul Wagland.

2004-09-27  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: when adding
	files, ignore files already open for whatever reason,
	including those already being added.

2004-09-24  Wayne Davison  <wayned@users.sourceforge.net>

	* 20409: Completion/Unix/Command/_darcs: Completion for the darcs
	revision control system.  Derived from the zsh-completion example
	that comes with darcs.

2004-09-21  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: updated for
	Perforce release 2004.2.

	* 20398: Src/Zle/zle_main.c: allow clean exit from within
	a zle widget function.

2004-09-20  Bart Schaefer  <schaefer@zsh.org>

	* 20397: Doc/zmacros.yo, Doc/Zsh/invoke.yo, Doc/Zsh/zle.yo: tweaks
	to account for texinfo's tendency to condense "--" into "-".

2004-09-20  Peter Stephenson  <pws@csr.com>

	* 20391: Src/params.c: SHLVL didn't get updated in the
	environment if it was already present.

2004-09-20  Bart Schaefer  <schaefer@zsh.org>

	* 20388: Src/Zle/zle_main.c: arrange that "zle internal-widget"
	called from a "zle -N" widget does not trip the ignoreeof warning.
	This is the long-documented behavior, but may break old "zle -N"
	widgets designed as wrappers around delete-char-or-list.

	* 20387: Src/init.c, Src/Zle/zle_main.c: rather than counting EOF
	keystrokes as in 20363, pretend that we received an EOF each time
	the "use 'logout' to logout" warning is printed, and let the top-
	level loop keep the count.  This way, disabling the warning (by
	rebinding that key to a "zle -N" widget) also disables counting.

2004-09-17  Peter Stephenson  <pws@csr.com>

	* 20378: Matthias B <msb@winterdrache.de>: Src/params.c,
	Src/utils.c, B02typeset.ztst: Fix bugs with metafied characters
	in tied arrays.

2004-09-16  Peter Stephenson  <pws@csr.com>

	* 20364: Functions/Completer/_oldlist: use $WIDGETSTYLE.

2004-09-13  Peter Stephenson  <pws@csr.com>

	* 20363: Src/init.c, Src/Zle/zle_main.c: exiting after 10 EOFs
	with ignore_eof set was broken in zle.

2004-09-10  Peter Stephenson  <pws@csr.com>

	* 20348: Doc/Zsh/zle.yo, Src/Zle/zle_params.c: Rejig WIDGETSTYLE
	and add WIDGETFUNC.

2004-09-09  Peter Stephenson  <pws@csr.com>

	* 20332: Src/Zle/zle_params.c, Doc/Zsh/zle.yo: add WIDGETSTYLE zle
	parameter to reveal widget implementation: function name for zle
	-N widgets and internal completion widget for zle -C widgets.

	* 20331: Src/builtin.c, Src/hist.c, Src/params.c, Src/prompt.c,
	Src/zsh.h, Src/Zle/compctl.c: Where possible use internal zlong
	variables for integers that correspond to shell variables.

2004-09-08  Peter Stephenson  <pws@csr.com>

	* 20330: Src/Zle/zle_thingy.c, Doc/Zsh/zle.yo: rationalise status
	from zle -I and improve documentation of status from zle, zle -I,
	zle -R.

2004-09-08  Bart Schaefer  <schaefer@zsh.org>

	* 20325: Src/exec.c, Test/E01options.ztst: fix crash when using
	the "command" builtin (as opposed to the "command" precommand
	modifier) when POSIX_BUILTINS is set; (unposted) add test for that
	and also for EVAL_LINENO.

	* 20320: Src/builtin.c: rewrite 20318 for simplicity and clarity.

2004-09-04  Bart Schaefer  <schaefer@zsh.org>

	* 20318: Src/builtin.c: fix subtle xtrace output bug introduced
	by 20308.

2004-09-03  Peter Stephenson  <pws@csr.com>

	* 20308: Doc/Zsh/options.yo, Src/builtin.c, Src/exec.c,
	Src/options.c, Src/zsh.h: add option EVAL_LINENO <Z> which
	issues separate line numbers inside eval's, as at present.
	Without it, the line from the surrounding environment is
	reported.

2004-09-02  Peter Stephenson  <pws@csr.com>

	* 20303: Src/Zle/zle_thingy.c, Doc/Zsh/zle.yo: Make test for
	zle -I more consistent with other uses of zle. Make zle widgets
	runnable inside traps.

	* 20300: Src/Zle/zle_main.c: typing ^D to list completions,
	then two ^C's caused a spurious EOF.

2004-08-24  Wayne Davison  <wayned@users.sourceforge.net>

	* 20283: Completion/Unix/Command/_ant: Improved the parsing
	of the <target...> tag as suggested by Jean-Baptiste Quenot.

2004-08-23  Wayne Davison  <wayned@users.sourceforge.net>

	* 20282: Src/Zle/zle_hist.c: fixed a problem with a negative
	NUMERIC causing wrong movement in combo zle commands such as
	up-/down-line-or-history and up-/down-line-or-search.

2004-08-18  Wayne Davison  <wayned@users.sourceforge.net>

	* 20269, 20270: Completion/Unix/Command/_make: Don't output the
	make targets all clumped into a single string when useperl is
	enabled.  Don't output a bogus target for a "VAR := VAL" line.

2004-08-16  Peter Stephenson  <pws@csr.com>

	* unposted: rename version to 4.2.1-dev-1 so as to avoid
	confusion with the released version.

	* unposted: update Etc/FAQ.yo as already sent to ftp.zsh.org

	* 20258: Doc/Zsh/options.yo, Src/prompt.c: save command status
	as well as error flag when performing substitutions in prompts.

	* 20251: Src/math.c, Src/utils.c: Warn when an integer converted
	from a string is too long and truncate it rather than let it
	overflow.

2004-08-13  Clint Adams  <clint@zsh.org>

	* unposted: config.guess, config.sub: update to 2004-07-19 and
	2004-06-24, respectively.

2004-08-13  Peter Stephenson  <pws@csr.com>

	* unposted: Version 4.2.1.

2004-08-11  Oliver Kiddle  <opk@zsh.org>

	* 20254: Completion/Base/Core/_tags: restrict the scope of the
	default tag-order to fix a problem with cdrecord completion

2004-08-10  Bart Schaefer  <schaefer@zsh.org>

	* 20244: Functions/Misc/zed: fix bug with editing of autoloaded
	functions (introduced by 20089).

2004-08-07  Oliver Kiddle  <opk@zsh.org>

	* 20237: Completion/Unix/Command/_screen: rewrite completion of
	screen sessions

	* 20237: Completion/Unix/Command/_mysql_utils: complete for
	mysqlimport and update some of the options

	* 20236: Completion/Base/Completer/_expand: fix problem with
	keep-prefix style where a modifier changes or removes the prefix

	* 20235: Completion/Unix/Command/_rsync: synched remote file
	completion with that in _ssh. quoting needed quoting.

2004-08-07  Geoff Wing  <gcw@zsh.org>

	* 20196: Src/prompt.c: still allow user specified text modifiers
	with a short terminal.  Only disallow if the terminal is really
	unknown or without sufficient capabilities or if SINGLE_LINE_ZLE
	option is specified

2004-08-06  Peter Stephenson  <pws@csr.com>

	* 20232 with typo corrected: Functions/Zftp/zfcd: remove
	cached directory listing when changing directory.

	* unposted: Config/version.mk: version 4.2.1-test-A.

2004-08-01  Clint Adams  <clint@zsh.org>

	* 20230: Completion/Debian/Command/_apt: dumb down apt-get
	install completion and always complete from all available
	packages.

	* 20225: Doc/Zsh/mod_clone.yo: add Philippe Troin's explanations
	of clone usage.

2004-07-30  Peter Stephenson  <pws@csr.com>

	* unposted: minor tidy up for 20219: neaten read-from-minibuffer
	and make history-pattern-search use last pattern as default.

	* unposted: README: mention max function depth is on by default

	* 20222: INSTALL, configure.ac: turn on max function depth by
	default to avoid crash.

2004-07-29  Peter Stephenson  <pws@csr.com>

	* 20221: Src/exec.c, Src/signals.c, Test/A05execution.ztst:
	$LINENO in trap '...' DEBUG was wrongly reported as the line
	in the trap, not in the surrounding code.  Probably broken
	in all 4.x builds to date.

	* 20219: Doc/Zsh/contrib.yo, Doc/Zsh/zle.yo,
	Functions/Zle/.distfiles, Functions/Zle/history-pattern-search,
	Src/Zle/zle_hist.c, Src/Zle/zle_params.c: make zle parameter
	HISTNO writeable, add history-pattern-search sample to use it.

	* 20208: Src/prompt.c, Doc/Zsh/prompt.yo: ternary code character C
	etc. treat / as path with zero elements.

2004-07-28  Peter Stephenson  <pws@csr.com>

	* 20214: Src/parse.c: fix debugging test that didn't work
	with recursive functions.

	* 20204: Motoi Washida: Completion/Base/Utils/_retrieve_cache:
	typo in definition of _cache_dir.

	* 20200: Completion/Unix/Command/_kfmclient,
	Completion/Unix/Type/_mime_types: fix some points made by Oliver
	to tidy up.  Also unposted: don't let _kfmclient drop through
	to `no more arguments' on failed completion.

2004-07-26  Peter Stephenson  <pws@csr.com>

	* 20199: Completion/Unix/Command/_elinks,
	Completion/Unix/Type/.distfiles, Completion/Unix/Type/_mime_types,
	Completion/X/Command/.distfiles, Completion/X/Command/_kfmclient,
	Doc/Zsh/contrib.yo, Functions/MIME/pick-web-browser,
	Functions/MIME/zsh-mime-setup: add completion for MIME types
	and kfmclient, use kfmclient to talk to konqueror and
	improve mime-types and mailcap styles.

	* 20198: Src/exec.c, Src/signals.c, Test/C03traps.ztst,
	Test/Makefile.in, Test/ztst.zsh: EXIT traps were freed before
	being run.  This isn't recommended by most programming text books.

2004-07-25  Bart Schaefer  <schaefer@zsh.org>

	* unposted: Doc/Zsh/contrib.yo: documentation for "zargs".

2004-07-23  Oliver Kiddle  <opk@zsh.org>

	* 20180 (based on Jean-Baptiste Quenot's 20177):
	Completion/Unix/Command/_killall: fix to work on BSD systems

	* Motoi Washida <a66@h8.dion.ne.jp>: 20179 (tweaked):
	Completion/Darwin/Type/_mac_applications,
	Completion/Darwin/Command/_open, Completion/Darwin/Command/_defaults:
	new completions for Mac OS X

2004-07-19  Oliver Kiddle  <opk@zsh.org>

	* Jean-Baptiste Quenot: 20167: Completion/Unix/Command/_ant:
	find targets enclosed in single instead of double quotes

2004-07-17  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 20173: Src/mem.c: crash when globbing lots of files; need to
	NULLify fheap optimisation when reallocating a heap.

2004-07-13  Peter Stephenson  <pws@csr.com>

	* 20153: Src/Zle/zle_main.c: make zle-line-init run after
	the initial zrefresh() by moving the latter out of zlecore().
	Needs an extra call in recursiveedit().

2004-07-12  Peter Stephenson  <pws@csr.com>

	* unposted: NEWS: read it through and tidied it up.
	Also additions from Oliver.

	* 20151: NEWS: notes on (F) and history -p.

	* unposted: improve 20150 by setting pointer to NULL when
	freed.

2004-07-11  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 20150: Src/Zle/compresult.c: repost of ancient attempt
	to fix memory leak in completion.

	* 20149: Doc/Zsh/zle.yo, Src/init.c, Src/input.c, Src/loop.c,
	Src/zsh.h, Src/Zle/zle_main.c: alter users/7650 so that
	prompt variable is always reread; fixes bug that if PS1
	was altered the prompt string was invalid.

2004-07-10  Bart Schaefer  <schaefer@zsh.org>

	* 20145: Doc/Zsh/contrib.yo, Functions/Zle/read-from-minibuffer:
	second and third arguments of read-from-minibuffer now specify the
	initial values of LBUFFER and RBUFFER.

2004-07-07  Peter Stephenson  <pws@csr.com>

	* 20142: Test/A06assign.ztst: add test for bug fixed in
	20141.

	* 20141: Src/builtin.c, Src/exec.c, Src/params.c:  Crash
	after restoring exported special parameters.  The
	answer was `pm = tpm' at exec.c:2590.

2004-07-02  Peter Stephenson  <pws@csr.com>

	* 20127: Doc/Zsh/zle.yo, Src/Zle/zle_main.c,
	Src/Zle/zle_refresh.c: slightly tweaked version of Wayne's
	patch in users/7652 which only reexpands the prompt when
	the commandline was trashed by output.

	* 20126, with modifications: .distfiles, ChangeLog-3.1,
	ChangeLog-4.1, ChangeLog.3.0, FEATURES, INSTALL, MACHINES,
	NEWS, README, Etc/.distfiles, Etc/ChangeLog-3.1,
	Etc/ChangeLog-4.1, Etc/FAQ.yo, Etc/FEATURES, Etc/MACHINES,
	Etc/NEWS, Test/.distfiles, Etc/ChangeLog-3.0: tidy up
	ready for 4.2.1

	* 20125: Doc/Zsh/jobs.yo: say where the output for job
	notifications goes.

2004-07-01  Peter Stephenson  <pws@csr.com>

	* users/7650: Doc/Zsh/zle.yo, Src/Zle/iwidgets.list,
	Src/Zle/zle_main.c: new zle widget prompt-reset redisplays screen
	with prompt updated.

2004-06-30  Peter Stephenson  <pws@csr.com>

	* 20118: Doc/Zsh/builtins.yo, Src/Builtins/rlimits.c:
	Attempt to handle unknown limits by number.  Also improve
	output and collect common code.

2004-06-28  Peter Stephenson  <pws@csr.com>

	* 20112, changed as per 20113: Src/exec.c, Src/parse.c,
	Src/subst.c, Doc/Zsh/redirect.yo, Test/A04redirect.yo:
	Fix here-strings to do standard single-word expansion (which
	was always intended but was partially broken), and also
	attempt to parse the end string for here-documents in
	a more standard fashion.

2004-06-26  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* unposted: Functions/Zle/.distfiles: add zed-set-file-name.

2004-06-24  Bart Schaefer  <schaefer@zsh.org>

	* unposted (see 20092): Completion/Zsh/Context/_condition: fix
	typos in descriptions.

2004-06-23  Peter Stephenson  <pws@csr.com>

	* 20089: Doc/Zsh/contrib.yo, Functions/Misc/zed,
	Functions/Zle/zed-set-file-name: various zed enhancements.

2004-06-22  Clint Adams  <clint@zsh.org>

	* 20091: Src/Modules/pcre.c: silence gcc "unused parameter" warnings.

2004-06-22  Peter Stephenson  <pws@csr.com>

	* 20076, 20084: Doc/Zsh/grammar.yo, Doc/Zsh/params.yo, Src/exec.c,
	Src/loop.c, Src/params.c, Src/parse.c, Src/prompt.c, Src/text.c,
	Src/zsh.h, Test/A01grammar.ztst: { ... } always { ... } syntax
	for making sure tidy-up code is run.

2004-06-21  Bart Schaefer  <schaefer@zsh.org>

	* unposted: Doc/Zsh/zle.yo: copy-prev-shell-word has no default
	bindings, so it shouldn't claim those of copy-prev-word.

	* 19785 (cont'd): Doc/zsh/builtins.yo, Doc/zsh/compsys.yo:
	Previously uncommitted documentation changes (Oliver).

	* users/7267: Functions/Zle/predict-on: Minor update to cooperate
	with zle-line-init.

2004-06-19  Clint Adams  <clint@zsh.org>

	* 20081: Doc/Zsh/mod_pcre.yo: document -pcre-match condition.

2004-06-18  Oliver Kiddle  <opk@zsh.org>

	* 20077: Completion/Zsh/Command/_disable,
	Completion/Zsh/Command/_enable: fix completion of reserved words

2004-06-18  Peter Stephenson  <pws@csr.com>

	* 20033: Completion/Base/Utility/_arguments: unconfirmed fix
	for configure output parsing with square brackets.

2004-06-17  Oliver Kiddle  <opk@zsh.org>

	* 20069: Completion/Unix/Command/_iconv: complete character
	encodings case-insensitively for GNU iconv

	* 20059: Completion/Unix/Command/_chown: check for systems
	using . separator instead of for those using :

2004-06-16  Oliver Kiddle  <opk@zsh.org>

	* users/7553: Completion/compdump, Completion/compinit:
	include zsh version in dump file to avoid problems with upgrades

2004-06-15  Clint Adams  <clint@zsh.org>

	* 20055: Completion/Unix/Command/_tla: additions and fixes
	from Jason McCarty.

2004-06-09  Peter Stephenson  <pws@csr.com>

	* c.f. 20034: Test/V03mathfunc.ztst: tests for the zsh/mathfunc
	module.

2004-06-08  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 20029: Src/Modules/mathfunc.c: rand48(seed) stopped being
	random after the second call.

2004-06-08  Peter Stephenson  <pws@csr.com>

	* Philippe Troin: 20026: INSTALL: nit-pick.

	* Philippe Troin, 19996, plus 20025: configure.ac, INSTALL: add
	configure option --with-tcsetpgrp.

	* 20024: Doc/Zsh/func.yo: Improve documentation for TRAPNAL
	functions.

2004-06-03  Felix Rosencrantz  <f_rosencrantz@yahoo.com>

	* 20002: Src/Zle/compmatch.c: Fix a problem with an inconsistent
	struct change in cmp_anchors().

2004-06-03  Peter Stephenson  <pws@csr.com>

	* 20017: Doc/.distfiles: add zsh.html to doc distribution.

	* users/7467: Completion/Base/Core/_dispatch: quoted commands
	weren't found in dispatcher lookup.

2004-06-02  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: builtin.c, exec.c, glob.c, hashtable.c, hist.c, init.c,
	jobs.c, loop.c, mem.c, module.c, options.c, params.c, parse.c,
	subst.c, system.h, utils.c, watch.c, Builtins/rlimits.c,
	Builtins/sched.c, Modules/cap.c, Modules/clone.c,
	Modules/datetime.c, Modules/example.c, Modules/files.c,
	Modules/langinfo.c, Modules/mapfile.c, Modules/mathfunc.c,
	Modules/parameter.c, Modules/socket.c, Modules/stat.c,
	Modules/system.c, Modules/tcp.c, Modules/termcap.c,
	Modules/terminfo.c, Modules/zftp.c, Modules/zprof.c,
	Modules/zpty.c, Modules/zselect.c, Modules/zutil.c, Zle/compcore.c,
	Zle/compctl.c, Zle/complete.c, Zle/complist.c, Zle/compresult.c,
	Zle/computil.c, Zle/deltochar.c, Zle/zle_hist.c, Zle/zle_keymap.c,
	Zle/zle_main.c, Zle/zle_misc.c, Zle/zle_move.c, Zle/zle_params.c,
	Zle/zle_refresh.c, Zle/zle_thingy.c, Zle/zle_tricky.c,
	Zle/zle_utils.c, Zle/zle_vi.c, Zle/zle_word.c, Zle/zleparameter.c:
	Silenced unused-parameter compiler warnings.

2004-05-28  Wayne Davison  <wayned@users.sourceforge.net>

	* 19980: Src/glob.c, Src/hashtable.c, Src/jobs.c, Src/loop.c,
	Src/params.c, Src/parse.c, Src/pattern.c, Src/Modules/datetime.c,
	Src/prompt.c, Src/subst.c, Src/utils.c, Src/Modules/zftp.c,
	Src/Zle/compcore.c, Src/Zle/compctl.c, Src/Zle/complete.c,
	Src/Zle/computil.c, Src/Zle/zle_hist.c, Src/Zle/zle_refresh.c,
	Src/Zle/zle_tricky.c:  Fixed some compiler warnings that gcc
	outputs with -W.

2004-05-28  Clint Adams  <clint@zsh.org>

	* 19991: Completion/Unix/Command/_lynx: complete .htm files
	too.

2004-05-25  Peter Stephenson  <pws@csr.com>

	* 19976: Src/exec.c, Src/jobs.c: `job table full' messages
	spotted by many people were traced by Wayne to thisjob
	being -1, which wasn't handled in a test no one understands
	anyway.

	* Compiled by Thorsten Kampe in zsh-users/7474:
	Doc/Zsh/options.yo: reorder option descriptions into subheadings.

2004-05-21  Wayne Davison  <wayned@users.sourceforge.net>

	* 19967+: Src/builtin.c, Src/hist.c Src/params.c,
	Doc/Zsh/builtins.yo, Functions/Misc/zcalc: added a -a
	option to `fc -p' to enable automatic popping of the
	pushed history list on function exit.  Updated zcalc.

2004-05-21  Peter Stephenson  <pws@csr.com>

	* 19971: Src/exec.c, Src/params.c: use putenv to put "_"
	into exec'd environment, avoiding horrific hack.

2004-05-20  Wayne Davison  <wayned@users.sourceforge.net>

	* 19962: Src/builtin.c, Src/hist.c, Doc/Zsh/builtins.yo,
	Functions/Misc/zcalc: added the ability to push/pop the history
	list via the new -p/-P options to fc.  Used this in zcalc to
	make the switch to zcalc's private history-list very smooth.

2004-05-19  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/Unix/Command/_perforce: tweak
	to allow changes and revisions with >, <, = qualifiers.

2004-05-13  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 19941: Src/math.c, Test/C01arith.ztst: (( x, )) triggered
	an internal bug instead of reporting an error.

2004-05-13  Peter Stephenson  <pws@csr.com>

	* 19936: Functions/Misc/zcalc: bad name for temporary history
	file invites clashes.

2004-05-12  Peter Stephenson  <pws@csr.com>

	* 19920 modified c.f. 19921: Src/mem.c: attempt to improve
	behaviour of hrealloc, particularly when using mmap().

2004-05-11  Wayne Davison  <wayned@users.sourceforge.net>

	* 19893 (plus one extra tweak): Src/hist.c: Fix the
	potential for an infinite loop in lockhistfile().

2004-05-05  Wayne Davison  <wayned@users.sourceforge.net>

	* 19878: Src/utils.c: a single-character change fixes the
	new strftime() return-check idiom.

2004-05-04  Peter Stephenson  <pws@csr.com>

	* 19877: Src/prompt.c, Src/utils.c, Src/Modules/datetime.c:
	Improve 19869: remove infinite loop and attempt to test
	for whether strftime() encountered an error.

2004-05-04  Clint Adams  <clint@zsh.org>

	* 19869: Src/prompt.c, Src/utils.c: avoid segfault when
	prompt-expanding '%D{%p}' or '%D{%P}' under locales with null
	strings for am_pm.

2004-05-02  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 19858: Doc/Zsh/options.yo, Src/jobs.c, Src/options.c,
	Src/signals.c, Src/signals.h: TRAPS_ASYNC option done properly,
	not blocking signals during sigsuspend to wait for children.

2004-05-01  Clint Adams  <clint@zsh.org>

	* 19863: Completion/Zsh/Type/_command_names, Doc/Zsh/compsys.yo:
	allow search path for command names to be overridden by means of new
	command-path style.

2004-04-28  Clint Adams  <clint@zsh.org>

	* 19845: Completion/Debian/Command/_apt-move: apt-move
	completion function from Steven Kowalik.

2004-04-27  Peter Stephenson  <pws@csr.com>

	* 19839 (plus suggestion from 19842):
	Completion/Unix/Type/_path_files: handle existing (#q)'s
	in qualifiers when adding sort options and adding back
	qualifiers from command line.

	* 19840: Src/Zle/zle_main.c: also, vared now only takes
	one normal argument.

	* 19837: Src/Zle/zle_main.c: fix 19733 which accidentally
	removed the -e option to vared.

2004-04-26  Doug Kearns  <djkea2@mugca.its.monash.edu.au>

	* unposted: Completion/Unix/Command/_aap: short and long options
	are mutually exclusive

2004-04-23  Peter Stephenson  <pws@csr.com>

	* 19825: Completion/Unix/Command/_perforce: suggested by Michael
	Denio: add `changes' style to allow limitting list of changes
	offered for completion.

	* 19810: Src/exec.c: avoid setting flag on Eprog which may
	no longer be valid.  Had no feedback, so don't know if
	it helps, but at worst harmless.

	* 19812: Src/builtin.c: avoid race with autoloaded trap functions.
	However, I think these still need substantial improvement.

2004-04-21  Peter Stephenson  <pws@csr.com>

	* 19809: Src/jobs.c, Src/signals.c, Src/signals.h: improve
	zsh-users/7365 by only queuing traps when TRAPS_ASYNC is set.
	This avoids any nasty races, including one reported by Vincent
	Stemen.

2004-04-21  Oliver Kiddle  <opk@zsh.org>

	* 19806: Src/prompt.c: fix bug with %v expansion and negative index

2004-04-20  Peter Stephenson  <pws@csr.com>

	* 19801: Src/builtin.c: Autoloading of TRAP functions was never
	implemented.

2004-04-20  Oliver Kiddle  <opk@zsh.org>

	* 19767, 19785: Src/builtin.c, Src/exec.c, Src/hashtable.c,
	Src/zsh.h, Completion/compinit, Completion/compdump,
	Completion/compinstall, Completion/bashcompinit,
	Completion/Base/Widget/_next_tags, Completion/Zsh/Type/_functions,
	Completion/Zsh/Command/_typeset, Doc/Zsh/builtins.yo:
	store flags for -z and -k options to autoload allowing the
	completion system to be used with ksh_autoload set

	* 19800: Test/B02typeset.ztst: reverse sense of `declare +m' test

2004-04-19  Clint Adams  <clint@zsh.org>

	* 19798: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_bogofilter: rudimentary completion for
	bogoutil.

2004-04-19  Peter Stephenson  <pws@csr.com>

	* zsh-users/7365: Doc/Zsh/options.yo, Src/jobs.c, Src/options.c,
	Src/signals.c, Src/zsh.h, plus unposted Etc/NEWS hunk: new option
	TRAPS_ASYNC, turn off to stop traps being run while waiting
	for a child process.

2004-04-18  Clint Adams  <clint@zsh.org>

	* 19792: Completion/X/Command/_mplayer: complete .m2v and .m2p,
	thanks to Rene H. Larsen.

2004-04-17  Oliver Kiddle  <opk@zsh.org>

	* 19790: Completion/Zsh/Command/_zcompile: complete functions
	after -a and allow multiple -z/-k options

2004-04-17  Doug Kearns  <djkea2@mugca.its.monash.edu.au>

	* 19775: Completion/Unix/Command/_php: new completion for php

	* unposted: Completion/Unix/Command/_elinks: declare and initialise
	return value parameter

2004-04-15  Peter Stephenson  <pws@csr.com>

	* see 19778 etc.: Doc/Makefile.in: remove change from 19735.

2004-04-15  Clint Adams  <clint@zsh.org>

	* 19606: Completion/Unix/Command/_tla: switch tla completion to
	the version by Jason McCarty, Erik Toubro Nielsen, and Rob Weir.

2004-04-14  Clint Adams  <clint@zsh.org>

	* Jay Berkenbilt: 19769: Completion/Unix/Command/_rsync:
	fix quoting for remote file completion, add -L to ls command.

2004-04-14  Oliver Kiddle  <opk@zsh.org>

	* Ingo Rohlfs: 19747: Completion/Unix/Command/_subversion:
	complete files/urls for svn cp and mv commands

	* unposted: Completion/Unix/Command/_cdrecord: add missing local

	* 19768: Completion/compinit: suggest running compaudit to see
	insecure files and directories and send errors to stderr

2004-04-06  Wayne Davison  <wayned@users.sourceforge.net>

	* 19743: Test/D02glob.ztst: Test the new F glob qualifier.

	* 19741: Src/glob.c: Minor optimization to qualnonemptydir() when
	a dir contains a subdir.

2004-04-06  Oliver Kiddle  <opk@zsh.org>

	* 19712, 19740: Src/params.c, Doc/Zsh/params.c: allow assigning to
	associative array elements where the i or r subscript flag is used

2004-04-06  Peter Stephenson  <pws@csr.com>

	* Peter Castro <doctor@fruitbat.org>: 19735 (minus texinfo hunk):
	Doc/Makefile.in, Src/builtin.c, Src/exec.c, Src/main.c,
	Src/system.h, configure.ac: improved use of paths, text/binary
	and dynamic library usage for Cygwin.

	* 19733 (with improved documentation): Doc/Zsh/contrib.yo,
	Doc/Zsh/zle.yo, Functions/Misc/zed, Src/Zle/zle_keymap.c,
	Src/Zle/zle_main.c: vared -M and -m allow you to provide
	main and alternate keymap; zed will use keymaps zed and zed-vicmd.

2004-04-05  Peter Stephenson  <pws@csr.com>

	* unposted, suggested by Wayne: Doc/Zsh/expn.yo:
	make 19728 clearer.

	* 19728: Doc/Zsh/expn.yo: explain that (^F) (from 19717)
	doesn't mean `non-empty directories', you need (/^F) for that.

	* unposted: ChangeLog, ChangeLog-4.1: move stuff up to 4.2.0
	out of ChangeLog.

	* unposted: Config/version.mk: update version to 4.2.0-dev-1;
	not tagged or released, this is just to avoid clashes with
	the released version.

2004-04-01  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 19717: Doc/Zsh/expn.y, Src/glob.c: use F glob qualifier
	for `full' (non-empty) directories.

2004-03-31  Bart Schaefer  <schaefer@zsh.org>

	* unposted: Functions/Misc/zrecompile: change "mv" to "mv -f"
	when backing up .zwc files, because zcompile creates the files
	read-only.  See thread ending at users/7269.

2004-03-30  Oliver Kiddle  <opk@zsh.org>

	* 19708: Completion/compaudit: change getent() function to
	handle two arguments

	* 19707: Src/params.c, Test/D05array.ztst: fix bug where a
	nagative index into an array returned a one element array
	instead of a scalar

2004-03-25  Clint Adams  <clint@zsh.org>

	* 19691: Completion/Unix/Type/_diff_options: Allow more than
	one --exclude or -x to diff.

2004-03-25  Peter Stephenson  <pws@csr.com>

	* 19683: Src/utils.c: Work around occasional problem on
	Cygwin with dllwrap.

	* 19682: Doc/Zsh/builtins.yo, Etc/NEWS, Src/signals.c: Don't
	run ZERR, DEBUG or EXIT traps inside other traps; caused confusion
	and incompatibility.

2004-03-24  Peter Stephenson  <pws@csr.com>

	* 19674 plus unposted changes suggested in 19676:
	configure.ac, Doc/Zsh/mod_zftp.yo, Src/Modules/zftp.c,
	Etc/NEWS, Functions/Zftp/zfstat: Add support for non-standard
	ports to core zftp.  Not yet handled by the function system
	(except zfstat reports port): needed in lastloc and bookmarks.

2004-03-23  Peter Stephenson  <pws@csr.com>

	* 19661: Danek Duvall: Completion/Unix/Type/_diff_options:
	support diff -u on Solaris from 2.10 up.

2004-03-22  Clint Adams  <clint@zsh.org>

	* 19673: Peter Palfrader: Completion/Unix/Command/_cvs:
	tags can contain the + character.

2004-03-22  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 19669, 19670: Danek Duvall: Completion/compaudit: Use of
	getent to check groups was slow; typo caused duplicate fpath
	entries.

	* 19671: Src/Zle/zle_main.c: error in zle-line-init caused
	infinite loop.

2004-03-20  Bart Schaefer  <schaefer@zsh.org>

	* 19666 (tweaked): Completion/Unix/Command/_ssh: fixes for remote
	file completion for scp, suggested by Jay Berkenbilt <ejb@ql.org>.

	* users/7172: Functions/Prompts/prompt_bart_setup: include "unset"
	among the localoptions, as this relies on it.
